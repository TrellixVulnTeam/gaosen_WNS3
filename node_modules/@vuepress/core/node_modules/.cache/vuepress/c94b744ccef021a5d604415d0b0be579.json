{"remainingRequest":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\CodingForFun\\Vue\\gaosen\\docs\\.vuepress\\components\\Chess1.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\CodingForFun\\Vue\\gaosen\\docs\\.vuepress\\components\\Chess1.vue","mtime":1653294757823},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648514419946},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\babel-loader\\lib\\index.js","mtime":1648514420186},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648514419946},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\vue-loader\\lib\\index.js","mtime":1648514420515}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgJCBmcm9tICdqcXVlcnknDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkNoZXNzIiwNCiAgcHJvcHM6IHsNCiAgICBkaXNwbGF5Q2hlc3M6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdDogWw0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLC8vMw0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLC8vMTINCiAgICAgICAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwNCiAgICAgIF0sDQogICAgfSwNCiAgICBwbGF5ZXJTaWRlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIGlzU2VsZWN0TWFjaGluZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgIHRlc3Q6IFtdLA0KICAgICAgSU5fQk9BUkRfOiBbDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICBdLA0KICAgICAgSU5fRk9SVF86IFsvL+i+heWKqeaVsOe7hO+8jOagh+ivhuaYr+WQpuWcqOS5neWuq+WGhQ0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLA0KICAgICAgXSwNCiAgICAgIGRpc3BsYXlDaGVzc1RlbXA6IFsNCiAgICAgICAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwvLzMNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwNCiAgICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwvLzEyDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsDQogICAgICBdLA0KICAgICAgRkVOOiAncm5iYWthYm5yLzkvMWM1YzEvcDFwMXAxcDFwLzkvOS9QMVAxUDFQMVAvMUM1QzEvOS9STkJBS0FCTlInLA0KICAgICAgRkVOQXJyYXk6IFtdLA0KICAgICAgdXNlcklucHV0RkVOOiAnJywNCiAgICAgIHVzZXJJbnB1dDogJycsDQogICAgICBzcVNlbGVjdGVkOiAwLC8v6byg5qCH5piv5ZCm6YCJ5Lit5LiA5qOL5a2QDQogICAgICBjdXJyZW50Q2hlc3M6ICcnLC8v5b2T5YmN6YCJ5Lit55qE5qOL5a2Q77yM55qE6aaW5a2X5q+NLA0KICAgICAgZGlzcGxheUNoZXNzX09sZDogW10sDQogICAgICBpc0hhdmVLX3c6IGZhbHNlLA0KICAgICAgaXNIYXZlS19iOiBmYWxzZSwNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgaW1nRG9tQXJyKCkgew0KICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5pbWdCb3ggaW1nJykNCiAgICB9LA0KICB9LA0KICB3YXRjaDogew0KICAgIGRpc3BsYXlDaGVzczogew0KICAgICAgaGFuZGxlcih2YWwsIG9sZFZhbCkgew0KICAgICAgICBpZih2YWwgPT09IHVuZGVmaW5lZCkgcmV0dXJuDQogICAgICAgIHRoaXMuZGlzcGxheUNoZXNzX09sZCA9IG9sZFZhbC5tYXAoKGl0ZW0pID0+IHtyZXR1cm4gaXRlbX0pDQogICAgICAgIHRoaXMuZGlzcGxheUNoZXNzVGVtcCA9IHZhbC5tYXAoaXRlbSA9PiB7cmV0dXJuIGl0ZW19KQ0KICAgICAgICB0aGlzLmRyYXdXaXRoU3EoKS8v57uY5Yi25qOL55uYDQogICAgICB9LA0KICAgICAgLy8gZGVlcDogdHJ1ZQ0KICAgIH0sDQogICAgYXN5bmMgcGxheWVyU2lkZShuZXdWYWwsb2xkVmFsKSB7DQogICAgICBpZighbmV3VmFsICYmIHRoaXMuaXNTZWxlY3RNYWNoaW5lKSB7Ly/ooajnpLrpu5HmlrnotbDmo4vkuJTpgInmi6nkuobkurrmnLrlr7nmiJgNCiAgICAgICAgbGV0IHNraWxsID0gYXdhaXQgdGhpcy5tYWNoaW5lX3Bhc3NpdmVTa2lsbHMoKQ0KICAgICAgICBpZihza2lsbCA9PT0gMSkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6Kem5Y+R6KKr5Yqo5oqA6IO977ya5YW157q/5Yi35pawJykNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmKHNraWxsID09PSAyKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfop6blj5HooqvliqjmioDog73vvJrmm7/niLbku47lhpsnKQ0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYoc2tpbGwgPT09IDMpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+inpuWPkeiiq+WKqOaKgOiDve+8muiNieacqOeahuWFtScpDQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZihza2lsbCA9PT0gMCkgew0KICAgICAgICAgIC8vIGxldCBkb20xID0gJCgnI3BvczgnKQ0KICAgICAgICAgIGxldCBkb21BcnIgPSB0aGlzLm1hY2hpbmVfZ2V0UGNUb0JlTW92ZWQoKS5tYXAoZSA9PiB7cmV0dXJuIGV9KQ0KICAgICAgICAgIGxldCBkb20xID0gZG9tQXJyWzBdDQogICAgICAgICAgLy8gbGV0IGRvbTIgPSB0aGlzLm1hY2hpbmVfZ2V0U3RlcHMoZG9tMSlbMF0NCiAgICAgICAgICAvLyBsZXQgZG9tMiA9IHRoaXMubWFjaGluZV9nZXRFeGFjdFN0ZXAoZG9tMSkNCiAgICAgICAgICBsZXQgZG9tMiA9IGRvbUFyclsxXQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn55S16ISR56e75Yqo5LqGJyArIHRoaXMuSW1nTmFtZVRvQ2hlc3NOYW1lKGRvbTEuYXR0cignc3JjJykuc2xpY2UoMTEsMTIpKSkNCg0KICAgICAgICAgIHRoaXMubWFjaGluZU1vdmUoZG9tMSxkb20yKQ0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRvbTEpOw0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRvbTIpOw0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWFjaGluZV9nZXRTdGVwcyhkb20xKSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIC8vIGNvbnN0IGNzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsNCiAgICAvLyBjc3MucmVsID0gJ3N0eWxlc2hlZXQnOw0KICAgIC8vIGNzcy5ocmVmID0gJ2h0dHBzOi8vY2RuLnJlcG9zaXRvcnkud2ViZm9udC5jb20vd2ViZm9udHMvbm9tYWwvMTQ4NDA3LzQ2NDg5LzYyNTQwN2FhZjYyOWQ4MTMwMGFjMTliMy5jc3MnOw0KICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY3NzKTsNCg0KICAgIHRoaXMuaW5pdEJvYXJkKCkNCiAgICAvKuavj+S4qmltZ+e7keWumuS4gOS4queCueWHu+S6i+S7tiovDQogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmltZ0JveCBpbWcnKS5mb3JFYWNoKChlLCBpbmRleCkgPT4gew0KICAgICAgZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSwgaW5kZXgpID0+IHsNCiAgICAgICAgbGV0IGZpbGVOYW1lID0gZS50YXJnZXQuc3JjLnNsaWNlKDMyLCAzMykNCiAgICAgICAgLy8gY29uc29sZS5sb2coZmlsZU5hbWUpOw0KICAgICAgICBsZXQgYWxlcnRTdHIgPSB0aGlzLkltZ05hbWVUb0NoZXNzTmFtZShmaWxlTmFtZSkNCg0KICAgICAgICBsZXQgaW1nSW5kZXggPSBwYXJzZUludChlLnRhcmdldC5pZC5zbGljZSgzKSkgKyAxDQogICAgICAgIC8vIGNvbnNvbGUubG9nKGltZ0luZGV4KTsNCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kaXNwbGF5Q2hlc3NUZW1wKTsNCiAgICAgICAgbGV0IGNoZXNzSW5mbyA9IHsvL+aji+WtkOeahOS4gOS6m+S/oeaBrw0KICAgICAgICAgIGRpc3BsYXlDaGVzczogdGhpcy5kaXNwbGF5Q2hlc3NUZW1wLA0KICAgICAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZSwNCiAgICAgICAgICBpbWdJbmRleDogaW1nSW5kZXgsDQogICAgICAgICAgc3FTZWxlY3RlZDogdGhpcy5pbWdJbmRleFRvU3EoaW1nSW5kZXgpDQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmNoZXNzMUNsaWNrKGNoZXNzSW5mbykNCg0KICAgICAgICAvKueUqOaIt+avj+asoeeCueWHu+aji+WtkOW6lOivpeWwhuivpeaji+WtkOWCqOWtmOWIsOW9k+WJjeaji+WtkGN1cnJlbnRDaGVzcyovDQogICAgICAgIC8vIHRoaXMuY3VycmVudENoZXNzID0gZmlsZU5hbWUNCiAgICAgICAgLy8gaWYodGhpcy5zcVNlbGVjdGVkKSB7DQogICAgICAgIC8vICAgaWYodGhpcy5jdXJyZW50Q2hlc3MgIT0gJ1UnKSB7DQogICAgICAgIC8vICAgICBjb25zb2xlLmxvZygn5LiK5qyh54K55Ye755qE5piv56m655m95aSEJyk7DQogICAgICAgIC8vICAgfQ0KICAgICAgICAvLyB9DQogICAgICB9KQ0KICAgIH0pDQoNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8q55S16ISR6LWw5qOLDQogICAgKiBkb20655S16ISR5pON5o6n5qih5ouf6byg5qCH54K55Ye75aSE55qEZG9t5a+56LGhKOWunumZheS4iuaYr+iwg+eUqOS6hmNoZXNzMUNsaWNr5Ye95pWw77yM5rKh5pyJ54K55Ye7KQ0KICAgICogMeS7o+ihqOi1t+eCue+8jDLku6Pooajnu4jngrkNCiAgICAqIOWunueOsOaViOaenOS4uuaji+WtkOenu+WKqA0KICAgICogKi8NCiAgICBtYWNoaW5lTW92ZShkb20xLGRvbTIpew0KICAgICAgbGV0IGZpbGVOYW1lMSA9IGRvbTEuYXR0cignc3JjJykuc2xpY2UoMTEsIDEyKQ0KICAgICAgbGV0IGltZ0luZGV4MSA9IHBhcnNlSW50KGRvbTEuYXR0cignaWQnKS5zbGljZSgzKSkgKyAxDQogICAgICBsZXQgY2hlc3NJbmZvMSA9IHsvL+aji+WtkOeahOS4gOS6m+S/oeaBrw0KICAgICAgICBkaXNwbGF5Q2hlc3M6IHRoaXMuZGlzcGxheUNoZXNzVGVtcCwNCiAgICAgICAgZmlsZU5hbWU6IGZpbGVOYW1lMSwNCiAgICAgICAgaW1nSW5kZXg6IGltZ0luZGV4MSwNCiAgICAgICAgc3FTZWxlY3RlZDogdGhpcy5pbWdJbmRleFRvU3EoaW1nSW5kZXgxKQ0KICAgICAgfQ0KICAgICAgdGhpcy5jaGVzczFDbGljayhjaGVzc0luZm8xKS8v55u45b2T5LqO6byg5qCH54K55Ye75LqGcG9zMOi9pueahOS9jee9rg0KDQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgbGV0IGZpbGVOYW1lMiA9IGRvbTIuYXR0cignc3JjJykuc2xpY2UoMTEsIDEyKQ0KICAgICAgICBsZXQgaW1nSW5kZXgyID0gcGFyc2VJbnQoZG9tMi5hdHRyKCdpZCcpLnNsaWNlKDMpKSArIDENCiAgICAgICAgbGV0IGNoZXNzSW5mbzIgPSB7Ly/mo4vlrZDnmoTkuIDkupvkv6Hmga8NCiAgICAgICAgICBkaXNwbGF5Q2hlc3M6IHRoaXMuZGlzcGxheUNoZXNzVGVtcCwNCiAgICAgICAgICBmaWxlTmFtZTogZmlsZU5hbWUyLA0KICAgICAgICAgIGltZ0luZGV4OiBpbWdJbmRleDIsDQogICAgICAgICAgc3FTZWxlY3RlZDogdGhpcy5pbWdJbmRleFRvU3EoaW1nSW5kZXgyKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuY2hlc3MxQ2xpY2soY2hlc3NJbmZvMikNCiAgICAgIH0sNTAwKQ0KDQogICAgfSwNCiAgICAvKuagueaNrui+k+WFpeeahOaji+WtkGRvbeWvueixoe+8jOi/lOWbnuivpeaji+WtkOaJgOacieWPr+iDveeahOS4i+S4gOatpei1sOazle+8iGFycmF55Z6L77yM5L2G5pWw57uE5YWD57Sg5Li6ZG9t5a+56LGh77yJKi8NCiAgICBtYWNoaW5lX2dldFN0ZXBzKGRvbSwgYXJyKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhhcnIpOw0KICAgICAgaWYoYXJyICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgbGV0IHN0ZXAgPSBbXQ0KICAgICAgICBsZXQgZmlsZU5hbWUgPSBkb20uYXR0cignc3JjJykuc2xpY2UoMTEsIDEyKQ0KICAgICAgICBsZXQgc3FTcmMgPSB0aGlzLmltZ0luZGV4VG9TcShwYXJzZUludChkb20uYXR0cignaWQnKS5zbGljZSgzKSkgKyAxKS8v6I635Y+W5LiA57u05Z2Q5qCHDQogICAgICAgIHN3aXRjaCAoZmlsZU5hbWUpIHsNCiAgICAgICAgICBjYXNlICdrJzogew0KICAgICAgICAgICAgbGV0IEtJTkdfREVMVEE9IFstMTYsIC0xLCAxLCAxNl07DQogICAgICAgICAgICBmb3IgKGxldCBpIGluIEtJTkdfREVMVEEpIHsvLyDlsIbnmoQ05Liq5pa55ZCRDQogICAgICAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgS0lOR19ERUxUQVtpXTsgLy8g5b6X5Yiw5LiA5Liq5Y+v6IO955qE57uI54K55L2N572uDQogICAgICAgICAgICAgIGlmKCF0aGlzLklOX0JPQVJEKHNxRHN0KSkgey8v57uI54K55aSE5LiN5Zyo5qOL55uY5YaFDQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZihhcnJbc3FEc3RdIDwgMTYgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgew0KICAgICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI6buR5pa577yJ5qOL5a2Q77yM5LiU57uI54K55Zyo5Lmd5a6r5qC85YaFDQogICAgICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICAgIGNhc2UgJ2EnOiB7DQogICAgICAgICAgICBsZXQgQURWSVNPUl9ERUxUQSA9IFstMTUsIC0xNywgMTcsIDE1XTsNCiAgICAgICAgICAgIGZvcihsZXQgaSBpbiBBRFZJU09SX0RFTFRBKSB7DQogICAgICAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgQURWSVNPUl9ERUxUQVtpXTsgLy8g5b6X5Yiw5LiA5Liq5Y+v6IO955qE57uI54K55L2N572uDQogICAgICAgICAgICAgIGlmKCF0aGlzLklOX0JPQVJEKHNxRHN0KSApIHsvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhe+8jOaIluS4jeWcqOS5neWuq+agvOWGhQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYoYXJyW3NxRHN0XSA8IDE2ICYmIHRoaXMuSU5fRk9SVChzcURzdCkpIHsNCiAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOm7keaWue+8ieaji+WtkCzkuJTnu4jngrnlnKjkuZ3lrqvmoLzlhoUNCiAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICB9DQogICAgICAgICAgY2FzZSAnYic6IHsNCiAgICAgICAgICAgIGxldCBCSVNIT1BfREVMVEEgPSBbLTM0LCAtMzAsIDMwLCAzNF07DQogICAgICAgICAgICBmb3IobGV0IGkgaW4gQklTSE9QX0RFTFRBKSB7DQogICAgICAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgQklTSE9QX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrlj6/og73nmoTnu4jngrnkvY3nva4NCiAgICAgICAgICAgICAgaWYoIXRoaXMuSU5fQk9BUkQoc3FEc3QpIHx8ICF0aGlzLlNBTUVfSEFMRihzcVNyYyxzcURzdCkNCiAgICAgICAgICAgICAgICAgIHx8IGFyclsoc3FTcmMrc3FEc3QpLzJdID4gMSkgew0KICAgICAgICAgICAgICAgIC8v57uI54K55aSE5LiN5Zyo5qOL55uY5YaFLOaIlui/h+aysyzmiJbosaHnnLzml6Dmo4vlrZANCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmKGFycltzcURzdF0gPCAxNikgew0KICAgICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI6buR5pa577yJ5qOL5a2QDQogICAgICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICAgIGNhc2UgJ24nOiB7DQogICAgICAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsNCiAgICAgICAgICAgIGxldCBLTklHSFRfREVMVEEgPSBbWy0zMywgLTMxXSwgWy0xOCwgMTRdLCBbLTE0LCAxOF0sIFszMSwgMzNdXTsNCiAgICAgICAgICAgIGZvcihsZXQgaSBpbiBLTklHSFRfREVMVEEpIHsvLyDpqazohb/nmoQ05Liq5pa55ZCRDQogICAgICAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgS0lOR19ERUxUQVtpXTsgLy8g5b6X5Yiw5LiA5Liq6ams6IW/55qE5L2N572uDQogICAgICAgICAgICAgIGlmKGFycltzcURzdF0gPiAxKSB7DQogICAgICAgICAgICAgICAgLy/pqazohJrlpITmnInmo4vlrZANCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMjsgaiArKykgeyAvLyAx5Liq6ams6IW/5a+55bqUMuS4qumprOeahOaWueWQkQ0KICAgICAgICAgICAgICAgIHNxRHN0ID0gc3FTcmMgKyBLTklHSFRfREVMVEFbaV1bal07IC8vIOW+l+WIsOS4gOS4qumprOeahOWPr+iDveeahOe7iOeCueS9jee9rg0KICAgICAgICAgICAgICAgIGlmICghdGhpcy5JTl9CT0FSRChzcURzdCkpIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZihhcnJbc3FEc3RdIDwgMTYpIHsNCiAgICAgICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI6buR5pa577yJ5qOL5a2QDQogICAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICAgIGNhc2UgJ3InOiB7DQogICAgICAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSArKykgew0KICAgICAgICAgICAgICBsZXQgZGVsdGEgPSBLSU5HX0RFTFRBW2ldOyAgICAvLyDlvpfliLDkuIDkuKrmlrnlkJENCiAgICAgICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBkZWx0YTsgICAgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQ0KICAgICAgICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChzcURzdCkpIHsNCiAgICAgICAgICAgICAgICAvL+WcqOaji+ebmOS4ig0KICAgICAgICAgICAgICAgIGlmKGFycltzcURzdF0gPCAxNikgew0KICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjpu5HmlrnvvInmo4vlrZAs5oiW5pyJ57qi5pa55qOL5a2QDQogICAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgICAgICAgICAgICAgIGlmKGFycltzcURzdF0gPj0gOCkgew0KICAgICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOacieWvueaWue+8iOe6ouaWue+8ieaji+WtkA0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGJyZWFrDQogICAgICAgICAgICAgICAgc3FEc3QgKz0gZGVsdGE7ICAgICAvLyDmsr/nnYDmlrnlkJFkZWx0YeWQkeWJjei1sOS4gOatpQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIH0NCiAgICAgICAgICBjYXNlICdjJzogew0KICAgICAgICAgICAgbGV0IEtJTkdfREVMVEE9IFstMTYsIC0xLCAxLCAxNl07DQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkgKyspIHsNCiAgICAgICAgICAgICAgbGV0IGRlbHRhID0gS0lOR19ERUxUQVtpXTsgICAgLy8g5b6X5Yiw5LiA5Liq5pa55ZCRDQogICAgICAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgZGVsdGE7ICAgIC8vIOS7jui1t+eCuXNxU3Jj5byA5aeL77yM5rK/552A5pa55ZCRZGVsdGHotbDkuIDmraUNCiAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7DQogICAgICAgICAgICAgICAgaWYoYXJyW3NxRHN0XSA9PT0gMSkgew0KICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZANCiAgICAgICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsgICAgICAgICAgICAvLyDnu4jngrnlrZjlnKjmo4vlrZDvvIzngq7pnIDopoHnv7vlsbENCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgIC8vIOayv+edgOaWueWQkWRlbHRh5ZCR5YmN6LWw5LiA5q2lDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgc3FEc3QgKz0gZGVsdGE7ICAgICAgIC8vIOayv+edgOaWueWQkWRlbHRh5ZCR5YmN6LWw5LiA5q2lDQogICAgICAgICAgICAgIHdoaWxlICh0aGlzLklOX0JPQVJEKHNxRHN0KSkgeyAvLyDlpoLmnpxzcURzdOS7jeS9jeS6juaji+ebmO+8jOmCo+S5iOatpOaXtueCruW3sue7j+e/u+WxseS6hg0KICAgICAgICAgICAgICAgIGlmKGFycltzcURzdF0gPj0gOCAmJiBhcnJbc3FEc3RdIDwgMTYpIHsNCiAgICAgICAgICAgICAgICAgIC8v57uI54K55aSE5piv57qi5pa55qOL5a2QDQogICAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0gMjkgLSAxDQogICAgICAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNxRHN0ICs9IGRlbHRhOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIH0NCiAgICAgICAgICBjYXNlICdwJzogew0KICAgICAgICAgICAgbGV0IFBBV05fZGVsdGEgPSBbMTYsMSwtMV0gLy/lhbXkuIDlvIDlp4vlj6rog73lkJHkuIvotbAs6L+H5rKz5ZCO5Y+v5ZCR5bemL+WPs+i1sA0KICAgICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBQQVdOX2RlbHRhWzBdDQogICAgICAgICAgICBpZihhcnJbc3FEc3RdIDwgMTYpIHsvL+e7iOeCueWkhOS4jeaYr+m7keaWueaji+WtkA0KICAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8v6Iul5YW16L+H5rKz5LqGKOatpOWkhOeahDEzMeaYr+e7j+i/h+iuoeeul+W+l+WIsOeahOi/h+ays+S4tOeVjOWAvO+8jOS4lOe7iOeCueWcqOaji+ebmOWGhQ0KICAgICAgICAgICAgaWYoc3FTcmMgPj0gdGhpcy5kb21Ub1NxKCQoJyNwb3M0NScpKSkgew0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykgew0KICAgICAgICAgICAgICAgIHNxRHN0ID0gc3FTcmMgKyBQQVdOX2RlbHRhW2krMV0NCiAgICAgICAgICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkpIGJyZWFrDQogICAgICAgICAgICAgICAgaWYoYXJyW3NxRHN0XSA8IDE2KSB7DQogICAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KDQogICAgICAgICAgY2FzZSAnSyc6IHsNCiAgICAgICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOw0KICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBLSU5HX0RFTFRBKSB7Ly8g5bCG55qENOS4quaWueWQkQ0KICAgICAgICAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIEtJTkdfREVMVEFbaV07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rg0KICAgICAgICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkpIHsvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYoIShhcnJbc3FEc3RdICYgOCkgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgew0KICAgICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2Q77yM5LiU57uI54K55Zyo5Lmd5a6r5qC85YaFDQogICAgICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICAgIGNhc2UgJ0EnOiB7DQogICAgICAgICAgICBsZXQgQURWSVNPUl9ERUxUQSA9IFstMTUsIC0xNywgMTcsIDE1XTsNCiAgICAgICAgICAgIGZvcihsZXQgaSBpbiBBRFZJU09SX0RFTFRBKSB7DQogICAgICAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgQURWSVNPUl9ERUxUQVtpXTsgLy8g5b6X5Yiw5LiA5Liq5Y+v6IO955qE57uI54K55L2N572uDQogICAgICAgICAgICAgIGlmKCF0aGlzLklOX0JPQVJEKHNxRHN0KSApIHsvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhe+8jOaIluS4jeWcqOS5neWuq+agvOWGhQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYoIShhcnJbc3FEc3RdICYgOCkgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgew0KICAgICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2QLOS4lOe7iOeCueWcqOS5neWuq+agvOWGhQ0KICAgICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIH0NCiAgICAgICAgICBjYXNlICdCJzogew0KICAgICAgICAgICAgbGV0IEJJU0hPUF9ERUxUQSA9IFstMzQsIC0zMCwgMzAsIDM0XTsNCiAgICAgICAgICAgIGZvcihsZXQgaSBpbiBCSVNIT1BfREVMVEEpIHsNCiAgICAgICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBCSVNIT1BfREVMVEFbaV07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rg0KICAgICAgICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkgfHwgIXRoaXMuU0FNRV9IQUxGKHNxU3JjLHNxRHN0KQ0KICAgICAgICAgICAgICAgICAgfHwgYXJyWyhzcVNyYytzcURzdCkvMl0gPiAxKSB7DQogICAgICAgICAgICAgICAgLy/nu4jngrnlpITkuI3lnKjmo4vnm5jlhoUs5oiW6L+H5rKzLOaIluixoeecvOaXoOaji+WtkA0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYoIShhcnJbc3FEc3RdICYgOCkpIHsNCiAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOe6ouaWue+8ieaji+WtkA0KICAgICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIH0NCiAgICAgICAgICBjYXNlICdOJzogew0KICAgICAgICAgICAgbGV0IEtJTkdfREVMVEE9IFstMTYsIC0xLCAxLCAxNl07DQogICAgICAgICAgICBsZXQgS05JR0hUX0RFTFRBID0gW1stMzMsIC0zMV0sIFstMTgsIDE0XSwgWy0xNCwgMThdLCBbMzEsIDMzXV07DQogICAgICAgICAgICBmb3IobGV0IGkgaW4gS05JR0hUX0RFTFRBKSB7Ly8g6ams6IW/55qENOS4quaWueWQkQ0KICAgICAgICAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIEtJTkdfREVMVEFbaV07IC8vIOW+l+WIsOS4gOS4qumprOiFv+eahOS9jee9rg0KICAgICAgICAgICAgICBpZihhcnJbc3FEc3RdID4gMSkgew0KICAgICAgICAgICAgICAgIC8v6ams6ISa5aSE5pyJ5qOL5a2QDQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDI7IGogKyspIHsgLy8gMeS4qumprOiFv+WvueW6lDLkuKrpqaznmoTmlrnlkJENCiAgICAgICAgICAgICAgICBzcURzdCA9IHNxU3JjICsgS05JR0hUX0RFTFRBW2ldW2pdOyAvLyDlvpfliLDkuIDkuKrpqaznmoTlj6/og73nmoTnu4jngrnkvY3nva4NCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYoIShhcnJbc3FEc3RdICYgOCkpIHsNCiAgICAgICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2QDQogICAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICAgIGNhc2UgJ1InOiB7DQogICAgICAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSArKykgew0KICAgICAgICAgICAgICBsZXQgZGVsdGEgPSBLSU5HX0RFTFRBW2ldOyAgICAvLyDlvpfliLDkuIDkuKrmlrnlkJENCiAgICAgICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBkZWx0YTsgICAgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQ0KICAgICAgICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChzcURzdCkpIHsNCiAgICAgICAgICAgICAgICAvL+WcqOaji+ebmOS4ig0KICAgICAgICAgICAgICAgIGlmKCEoYXJyW3NxRHN0XSAmIDgpKSB7DQogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOe6ouaWue+8ieaji+WtkCzmiJbmnInnuqLmlrnmo4vlrZANCiAgICAgICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgICAgICAgICAgICAgaWYoYXJyW3NxRHN0XSAmIDE2KSB7DQogICAgICAgICAgICAgICAgICAgIC8v57uI54K55aSE5pyJ5a+55pa577yI6buR5pa577yJ5qOL5a2QDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgYnJlYWsNCiAgICAgICAgICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgIC8vIOayv+edgOaWueWQkWRlbHRh5ZCR5YmN6LWw5LiA5q2lDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICAgIGNhc2UgJ0MnOiB7DQogICAgICAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSArKykgew0KICAgICAgICAgICAgICBsZXQgZGVsdGEgPSBLSU5HX0RFTFRBW2ldOyAgICAvLyDlvpfliLDkuIDkuKrmlrnlkJENCiAgICAgICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBkZWx0YTsgICAgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQ0KICAgICAgICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChzcURzdCkpIHsNCiAgICAgICAgICAgICAgICBpZihhcnJbc3FEc3RdID09PSAxKSB7DQogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkA0KICAgICAgICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgIC8vIOe7iOeCueWtmOWcqOaji+WtkO+8jOeCrumcgOimgee/u+WxsQ0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNxRHN0ICs9IGRlbHRhOyAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUNCiAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7IC8vIOWmguaenHNxRHN05LuN5L2N5LqO5qOL55uY77yM6YKj5LmI5q2k5pe254Ku5bey57uP57+75bGx5LqGDQogICAgICAgICAgICAgICAgaWYoYXJyW3NxRHN0XSAmIDE2KSB7DQogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOaYr+m7keaWueaji+WtkA0KICAgICAgICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtIDI5IC0gMQ0KICAgICAgICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzcURzdCArPSBkZWx0YTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICB9DQogICAgICAgICAgY2FzZSAnUCc6IHsNCiAgICAgICAgICAgIGxldCBQQVdOX2RlbHRhID0gWy0xNiwxLC0xXSAvL+WFteS4gOW8gOWni+WPquiDveWQkeS4iui1sCzov4fmsrPlkI7lj6/lkJHlt6Yv5Y+z6LWwDQogICAgICAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIFBBV05fZGVsdGFbMF0NCiAgICAgICAgICAgIGlmKCEoYXJyW3NxRHN0XSAmIDgpKSB7Ly/nu4jngrnlpITkuI3mmK/nuqLmlrnmo4vlrZAs5YiZ6LWw5rOV5ZCI5rOVDQogICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy/oi6XlhbXov4fmsrPkuoYo5q2k5aSE55qEMTMx5piv57uP6L+H6K6h566X5b6X5Yiw55qE6L+H5rKz5Li055WM5YC877yM5LiU57uI54K55Zyo5qOL55uY5YaFDQogICAgICAgICAgICBpZihzcVNyYyA8IDEzMSAmJiB0aGlzLklOX0JPQVJEKHNxRHN0KSkgew0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykgew0KICAgICAgICAgICAgICAgIHNxRHN0ID0gc3FTcmMgKyBQQVdOX2RlbHRhW2krMV0NCiAgICAgICAgICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkpIGJyZWFrDQogICAgICAgICAgICAgICAgaWYoIShhcnJbc3FEc3RdICYgOCkpIHsNCiAgICAgICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICB9DQogICAgICAgICAgZGVmYXVsdDogc3RlcC5wdXNoKG51bGwpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHN0ZXANCiAgICAgIH0NCiAgICAgIGVsc2UgcmV0dXJuICdFUlJPUicNCiAgICAgIC8vIGVsc2Ugew0KICAgICAgLy8gICBsZXQgc3RlcCA9IFtdDQogICAgICAvLyAgIGxldCBmaWxlTmFtZSA9IGRvbS5hdHRyKCdzcmMnKS5zbGljZSgxMSwgMTIpDQogICAgICAvLyAgIGxldCBzcVNyYyA9IHRoaXMuaW1nSW5kZXhUb1NxKHBhcnNlSW50KGRvbS5hdHRyKCdpZCcpLnNsaWNlKDMpKSArIDEpLy/ojrflj5bkuIDnu7TlnZDmoIcNCiAgICAgIC8vICAgc3dpdGNoIChmaWxlTmFtZSkgew0KICAgICAgLy8gICAgIGNhc2UgJ2snOiB7DQogICAgICAvLyAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsNCiAgICAgIC8vICAgICAgIGZvciAobGV0IGkgaW4gS0lOR19ERUxUQSkgey8vIOWwhueahDTkuKrmlrnlkJENCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBLSU5HX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrlj6/og73nmoTnu4jngrnkvY3nva4NCiAgICAgIC8vICAgICAgICAgaWYoIXRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7Ly/nu4jngrnlpITkuI3lnKjmo4vnm5jlhoUNCiAgICAgIC8vICAgICAgICAgICBjb250aW51ZQ0KICAgICAgLy8gICAgICAgICB9DQogICAgICAvLyAgICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gPCAxNiAmJiB0aGlzLklOX0ZPUlQoc3FEc3QpKSB7DQogICAgICAvLyAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjpu5HmlrnvvInmo4vlrZDvvIzkuJTnu4jngrnlnKjkuZ3lrqvmoLzlhoUNCiAgICAgIC8vICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAvLyAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAvLyAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgIC8vICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgfQ0KICAgICAgLy8gICAgICAgYnJlYWsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgICAgY2FzZSAnYSc6IHsNCiAgICAgIC8vICAgICAgIGxldCBBRFZJU09SX0RFTFRBID0gWy0xNSwgLTE3LCAxNywgMTVdOw0KICAgICAgLy8gICAgICAgZm9yKGxldCBpIGluIEFEVklTT1JfREVMVEEpIHsNCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBBRFZJU09SX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrlj6/og73nmoTnu4jngrnkvY3nva4NCiAgICAgIC8vICAgICAgICAgaWYoIXRoaXMuSU5fQk9BUkQoc3FEc3QpICkgey8v57uI54K55aSE5LiN5Zyo5qOL55uY5YaF77yM5oiW5LiN5Zyo5Lmd5a6r5qC85YaFDQogICAgICAvLyAgICAgICAgICAgY29udGludWUNCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdIDwgMTYgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgew0KICAgICAgLy8gICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI6buR5pa577yJ5qOL5a2QLOS4lOe7iOeCueWcqOS5neWuq+agvOWGhQ0KICAgICAgLy8gICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgIC8vICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgLy8gICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgICB9DQogICAgICAvLyAgICAgICB9DQogICAgICAvLyAgICAgICBicmVhaw0KICAgICAgLy8gICAgIH0NCiAgICAgIC8vICAgICBjYXNlICdiJzogew0KICAgICAgLy8gICAgICAgbGV0IEJJU0hPUF9ERUxUQSA9IFstMzQsIC0zMCwgMzAsIDM0XTsNCiAgICAgIC8vICAgICAgIGZvcihsZXQgaSBpbiBCSVNIT1BfREVMVEEpIHsNCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBCSVNIT1BfREVMVEFbaV07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rg0KICAgICAgLy8gICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkgfHwgIXRoaXMuU0FNRV9IQUxGKHNxU3JjLHNxRHN0KQ0KICAgICAgLy8gICAgICAgICAgICAgfHwgdGhpcy5kaXNwbGF5Q2hlc3NUZW1wWyhzcVNyYytzcURzdCkvMl0gPiAxKSB7DQogICAgICAvLyAgICAgICAgICAgLy/nu4jngrnlpITkuI3lnKjmo4vnm5jlhoUs5oiW6L+H5rKzLOaIluixoeecvOaXoOaji+WtkA0KICAgICAgLy8gICAgICAgICAgIGNvbnRpbnVlDQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSA8IDE2KSB7DQogICAgICAvLyAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjpu5HmlrnvvInmo4vlrZANCiAgICAgIC8vICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAvLyAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAvLyAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgIC8vICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgfQ0KICAgICAgLy8gICAgICAgYnJlYWsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgICAgY2FzZSAnbic6IHsNCiAgICAgIC8vICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOw0KICAgICAgLy8gICAgICAgbGV0IEtOSUdIVF9ERUxUQSA9IFtbLTMzLCAtMzFdLCBbLTE4LCAxNF0sIFstMTQsIDE4XSwgWzMxLCAzM11dOw0KICAgICAgLy8gICAgICAgZm9yKGxldCBpIGluIEtOSUdIVF9ERUxUQSkgey8vIOmprOiFv+eahDTkuKrmlrnlkJENCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBLSU5HX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrpqazohb/nmoTkvY3nva4NCiAgICAgIC8vICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSA+IDEpIHsNCiAgICAgIC8vICAgICAgICAgICAvL+mprOiEmuWkhOacieaji+WtkA0KICAgICAgLy8gICAgICAgICAgIGNvbnRpbnVlDQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAyOyBqICsrKSB7IC8vIDHkuKrpqazohb/lr7nlupQy5Liq6ams55qE5pa55ZCRDQogICAgICAvLyAgICAgICAgICAgc3FEc3QgPSBzcVNyYyArIEtOSUdIVF9ERUxUQVtpXVtqXTsgLy8g5b6X5Yiw5LiA5Liq6ams55qE5Y+v6IO955qE57uI54K55L2N572uDQogICAgICAvLyAgICAgICAgICAgaWYgKCF0aGlzLklOX0JPQVJEKHNxRHN0KSkgew0KICAgICAgLy8gICAgICAgICAgICAgY29udGludWU7DQogICAgICAvLyAgICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gPCAxNikgew0KICAgICAgLy8gICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjpu5HmlrnvvInmo4vlrZANCiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgICAgIH0NCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgfQ0KICAgICAgLy8gICAgICAgYnJlYWsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgICAgY2FzZSAncic6IHsNCiAgICAgIC8vICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOw0KICAgICAgLy8gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpICsrKSB7DQogICAgICAvLyAgICAgICAgIGxldCBkZWx0YSA9IEtJTkdfREVMVEFbaV07ICAgIC8vIOW+l+WIsOS4gOS4quaWueWQkQ0KICAgICAgLy8gICAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIGRlbHRhOyAgICAvLyDku47otbfngrlzcVNyY+W8gOWni++8jOayv+edgOaWueWQkWRlbHRh6LWw5LiA5q2lDQogICAgICAvLyAgICAgICAgIHdoaWxlICh0aGlzLklOX0JPQVJEKHNxRHN0KSkgew0KICAgICAgLy8gICAgICAgICAgIC8v5Zyo5qOL55uY5LiKDQogICAgICAvLyAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSA8IDE2KSB7DQogICAgICAvLyAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOm7keaWue+8ieaji+WtkCzmiJbmnInnuqLmlrnmo4vlrZANCiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSA+PSA4KSB7DQogICAgICAvLyAgICAgICAgICAgICAgIC8v57uI54K55aSE5pyJ5a+55pa577yI57qi5pa577yJ5qOL5a2QDQogICAgICAvLyAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAvLyAgICAgICAgICAgICB9DQogICAgICAvLyAgICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICAgIGVsc2UgYnJlYWsNCiAgICAgIC8vICAgICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgIC8vIOayv+edgOaWueWQkWRlbHRh5ZCR5YmN6LWw5LiA5q2lDQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgIH0NCiAgICAgIC8vICAgICAgIGJyZWFrDQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICAgIGNhc2UgJ2MnOiB7DQogICAgICAvLyAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsNCiAgICAgIC8vICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSArKykgew0KICAgICAgLy8gICAgICAgICBsZXQgZGVsdGEgPSBLSU5HX0RFTFRBW2ldOyAgICAvLyDlvpfliLDkuIDkuKrmlrnlkJENCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBkZWx0YTsgICAgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQ0KICAgICAgLy8gICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChzcURzdCkpIHsNCiAgICAgIC8vICAgICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdID09PSAxKSB7DQogICAgICAvLyAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkA0KICAgICAgLy8gICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAvLyAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgLy8gICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAvLyAgICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgIC8vIOe7iOeCueWtmOWcqOaji+WtkO+8jOeCrumcgOimgee/u+WxsQ0KICAgICAgLy8gICAgICAgICAgICAgYnJlYWs7DQogICAgICAvLyAgICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICAgIHNxRHN0ICs9IGRlbHRhOyAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUNCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUNCiAgICAgIC8vICAgICAgICAgd2hpbGUgKHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7IC8vIOWmguaenHNxRHN05LuN5L2N5LqO5qOL55uY77yM6YKj5LmI5q2k5pe254Ku5bey57uP57+75bGx5LqGDQogICAgICAvLyAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSA+PSA4ICYmIHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gPCAxNikgew0KICAgICAgLy8gICAgICAgICAgICAgLy/nu4jngrnlpITmmK/nuqLmlrnmo4vlrZANCiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLSAyOSAtIDENCiAgICAgIC8vICAgICAgICAgICAgIGxldCBkb21UZW1wID0gJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgICAgICAgYnJlYWsNCiAgICAgIC8vICAgICAgICAgICB9DQogICAgICAvLyAgICAgICAgICAgc3FEc3QgKz0gZGVsdGE7DQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgIH0NCiAgICAgIC8vICAgICAgIGJyZWFrDQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICAgIGNhc2UgJ3AnOiB7DQogICAgICAvLyAgICAgICBsZXQgUEFXTl9kZWx0YSA9IFsxNiwxLC0xXSAvL+WFteS4gOW8gOWni+WPquiDveWQkeS4i+i1sCzov4fmsrPlkI7lj6/lkJHlt6Yv5Y+z6LWwDQogICAgICAvLyAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIFBBV05fZGVsdGFbMF0NCiAgICAgIC8vICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gPCAxNikgey8v57uI54K55aSE5LiN5piv6buR5pa55qOL5a2QDQogICAgICAvLyAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAvLyAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAvLyAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgfQ0KICAgICAgLy8gICAgICAgaWYoc3FTcmMgPj0gMTMxICYmIHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7Ly/oi6XlhbXov4fmsrPkuoYo5q2k5aSE55qEMTMx5piv57uP6L+H6K6h566X5b6X5Yiw55qE6L+H5rKz5Li055WM5YC8DQogICAgICAvLyAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7DQogICAgICAvLyAgICAgICAgICAgc3FEc3QgPSBzcVNyYyArIFBBV05fZGVsdGFbaSsxXQ0KICAgICAgLy8gICAgICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gPCAxNikgew0KICAgICAgLy8gICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAvLyAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgLy8gICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAvLyAgICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICB9DQogICAgICAvLyAgICAgICB9DQogICAgICAvLyAgICAgICBicmVhaw0KICAgICAgLy8gICAgIH0NCiAgICAgIC8vDQogICAgICAvLyAgICAgY2FzZSAnSyc6IHsNCiAgICAgIC8vICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOw0KICAgICAgLy8gICAgICAgZm9yIChsZXQgaSBpbiBLSU5HX0RFTFRBKSB7Ly8g5bCG55qENOS4quaWueWQkQ0KICAgICAgLy8gICAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIEtJTkdfREVMVEFbaV07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rg0KICAgICAgLy8gICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkpIHsvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhQ0KICAgICAgLy8gICAgICAgICAgIGNvbnRpbnVlDQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgICAgaWYoISh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgOCkgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgew0KICAgICAgLy8gICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2Q77yM5LiU57uI54K55Zyo5Lmd5a6r5qC85YaFDQogICAgICAvLyAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgLy8gICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgLy8gICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAvLyAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgIH0NCiAgICAgIC8vICAgICAgIGJyZWFrDQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICAgIGNhc2UgJ0EnOiB7DQogICAgICAvLyAgICAgICBsZXQgQURWSVNPUl9ERUxUQSA9IFstMTUsIC0xNywgMTcsIDE1XTsNCiAgICAgIC8vICAgICAgIGZvcihsZXQgaSBpbiBBRFZJU09SX0RFTFRBKSB7DQogICAgICAvLyAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgQURWSVNPUl9ERUxUQVtpXTsgLy8g5b6X5Yiw5LiA5Liq5Y+v6IO955qE57uI54K55L2N572uDQogICAgICAvLyAgICAgICAgIGlmKCF0aGlzLklOX0JPQVJEKHNxRHN0KSApIHsvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhe+8jOaIluS4jeWcqOS5neWuq+agvOWGhQ0KICAgICAgLy8gICAgICAgICAgIGNvbnRpbnVlDQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgICAgaWYoISh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgOCkgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgew0KICAgICAgLy8gICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2QLOS4lOe7iOeCueWcqOS5neWuq+agvOWGhQ0KICAgICAgLy8gICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgIC8vICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgLy8gICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgICB9DQogICAgICAvLyAgICAgICB9DQogICAgICAvLyAgICAgICBicmVhaw0KICAgICAgLy8gICAgIH0NCiAgICAgIC8vICAgICBjYXNlICdCJzogew0KICAgICAgLy8gICAgICAgbGV0IEJJU0hPUF9ERUxUQSA9IFstMzQsIC0zMCwgMzAsIDM0XTsNCiAgICAgIC8vICAgICAgIGZvcihsZXQgaSBpbiBCSVNIT1BfREVMVEEpIHsNCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBCSVNIT1BfREVMVEFbaV07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rg0KICAgICAgLy8gICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkgfHwgIXRoaXMuU0FNRV9IQUxGKHNxU3JjLHNxRHN0KQ0KICAgICAgLy8gICAgICAgICAgICAgfHwgdGhpcy5kaXNwbGF5Q2hlc3NUZW1wWyhzcVNyYytzcURzdCkvMl0gPiAxKSB7DQogICAgICAvLyAgICAgICAgICAgLy/nu4jngrnlpITkuI3lnKjmo4vnm5jlhoUs5oiW6L+H5rKzLOaIluixoeecvOaXoOaji+WtkA0KICAgICAgLy8gICAgICAgICAgIGNvbnRpbnVlDQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgICAgaWYoISh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgOCkpIHsNCiAgICAgIC8vICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOe6ouaWue+8ieaji+WtkA0KICAgICAgLy8gICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgIC8vICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgLy8gICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgICB9DQogICAgICAvLyAgICAgICB9DQogICAgICAvLyAgICAgICBicmVhaw0KICAgICAgLy8gICAgIH0NCiAgICAgIC8vICAgICBjYXNlICdOJzogew0KICAgICAgLy8gICAgICAgbGV0IEtJTkdfREVMVEE9IFstMTYsIC0xLCAxLCAxNl07DQogICAgICAvLyAgICAgICBsZXQgS05JR0hUX0RFTFRBID0gW1stMzMsIC0zMV0sIFstMTgsIDE0XSwgWy0xNCwgMThdLCBbMzEsIDMzXV07DQogICAgICAvLyAgICAgICBmb3IobGV0IGkgaW4gS05JR0hUX0RFTFRBKSB7Ly8g6ams6IW/55qENOS4quaWueWQkQ0KICAgICAgLy8gICAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIEtJTkdfREVMVEFbaV07IC8vIOW+l+WIsOS4gOS4qumprOiFv+eahOS9jee9rg0KICAgICAgLy8gICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdID4gMSkgew0KICAgICAgLy8gICAgICAgICAgIC8v6ams6ISa5aSE5pyJ5qOL5a2QDQogICAgICAvLyAgICAgICAgICAgY29udGludWUNCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDI7IGogKyspIHsgLy8gMeS4qumprOiFv+WvueW6lDLkuKrpqaznmoTmlrnlkJENCiAgICAgIC8vICAgICAgICAgICBzcURzdCA9IHNxU3JjICsgS05JR0hUX0RFTFRBW2ldW2pdOyAvLyDlvpfliLDkuIDkuKrpqaznmoTlj6/og73nmoTnu4jngrnkvY3nva4NCiAgICAgIC8vICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7DQogICAgICAvLyAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgIC8vICAgICAgICAgICB9DQogICAgICAvLyAgICAgICAgICAgaWYoISh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgOCkpIHsNCiAgICAgIC8vICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2QDQogICAgICAvLyAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpDQogICAgICAvLyAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDENCiAgICAgIC8vICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAvLyAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkNCiAgICAgIC8vICAgICAgICAgICB9DQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgIH0NCiAgICAgIC8vICAgICAgIGJyZWFrDQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICAgIGNhc2UgJ1InOiB7DQogICAgICAvLyAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsNCiAgICAgIC8vICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSArKykgew0KICAgICAgLy8gICAgICAgICBsZXQgZGVsdGEgPSBLSU5HX0RFTFRBW2ldOyAgICAvLyDlvpfliLDkuIDkuKrmlrnlkJENCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBkZWx0YTsgICAgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQ0KICAgICAgLy8gICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChzcURzdCkpIHsNCiAgICAgIC8vICAgICAgICAgICAvL+WcqOaji+ebmOS4ig0KICAgICAgLy8gICAgICAgICAgIGlmKCEodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSAmIDgpKSB7DQogICAgICAvLyAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOe6ouaWue+8ieaji+WtkCzmiJbmnInnuqLmlrnmo4vlrZANCiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSAmIDE2KSB7DQogICAgICAvLyAgICAgICAgICAgICAgIC8v57uI54K55aSE5pyJ5a+55pa577yI6buR5pa577yJ5qOL5a2QDQogICAgICAvLyAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAvLyAgICAgICAgICAgICB9DQogICAgICAvLyAgICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICAgIGVsc2UgYnJlYWsNCiAgICAgIC8vICAgICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgIC8vIOayv+edgOaWueWQkWRlbHRh5ZCR5YmN6LWw5LiA5q2lDQogICAgICAvLyAgICAgICAgIH0NCiAgICAgIC8vICAgICAgIH0NCiAgICAgIC8vICAgICAgIGJyZWFrDQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICAgIGNhc2UgJ0MnOiB7DQogICAgICAvLyAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsNCiAgICAgIC8vICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSArKykgew0KICAgICAgLy8gICAgICAgICBsZXQgZGVsdGEgPSBLSU5HX0RFTFRBW2ldOyAgICAvLyDlvpfliLDkuIDkuKrmlrnlkJENCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBkZWx0YTsgICAgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQ0KICAgICAgLy8gICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChzcURzdCkpIHsNCiAgICAgIC8vICAgICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdID09PSAxKSB7DQogICAgICAvLyAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkA0KICAgICAgLy8gICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAvLyAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgLy8gICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAvLyAgICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgIC8vIOe7iOeCueWtmOWcqOaji+WtkO+8jOeCrumcgOimgee/u+WxsQ0KICAgICAgLy8gICAgICAgICAgICAgYnJlYWs7DQogICAgICAvLyAgICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICAgIHNxRHN0ICs9IGRlbHRhOyAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUNCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUNCiAgICAgIC8vICAgICAgICAgd2hpbGUgKHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7IC8vIOWmguaenHNxRHN05LuN5L2N5LqO5qOL55uY77yM6YKj5LmI5q2k5pe254Ku5bey57uP57+75bGx5LqGDQogICAgICAvLyAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSAmIDE2KSB7DQogICAgICAvLyAgICAgICAgICAgICAvL+e7iOeCueWkhOaYr+m7keaWueaji+WtkA0KICAgICAgLy8gICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtIDI5IC0gMQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgLy8gICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApDQogICAgICAvLyAgICAgICAgICAgICBicmVhaw0KICAgICAgLy8gICAgICAgICAgIH0NCiAgICAgIC8vICAgICAgICAgICBzcURzdCArPSBkZWx0YTsNCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgfQ0KICAgICAgLy8gICAgICAgYnJlYWsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgICAgY2FzZSAnUCc6IHsNCiAgICAgIC8vICAgICAgIGxldCBQQVdOX2RlbHRhID0gWy0xNiwxLC0xXSAvL+WFteS4gOW8gOWni+WPquiDveWQkeS4iui1sCzov4fmsrPlkI7lj6/lkJHlt6Yv5Y+z6LWwDQogICAgICAvLyAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIFBBV05fZGVsdGFbMF0NCiAgICAgIC8vICAgICAgIGlmKCEodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSAmIDgpKSB7Ly/nu4jngrnlpITkuI3mmK/nuqLmlrnmo4vlrZAs5YiZ6LWw5rOV5ZCI5rOVDQogICAgICAvLyAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxDQogICAgICAvLyAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgICAvLyAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgfQ0KICAgICAgLy8gICAgICAgaWYoc3FTcmMgPCAxMzEgJiYgdGhpcy5JTl9CT0FSRChzcURzdCkpIHsvL+iLpeWFtei/h+ays+S6hijmraTlpITnmoQxMzHmmK/nu4/ov4forqHnrpflvpfliLDnmoTov4fmsrPkuLTnlYzlgLwNCiAgICAgIC8vICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHsNCiAgICAgIC8vICAgICAgICAgICBzcURzdCA9IHNxU3JjICsgUEFXTl9kZWx0YVtpKzFdDQogICAgICAvLyAgICAgICAgICAgaWYoISh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgOCkpIHsNCiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkNCiAgICAgIC8vICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQ0KICAgICAgLy8gICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkNCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQ0KICAgICAgLy8gICAgICAgICAgIH0NCiAgICAgIC8vICAgICAgICAgfQ0KICAgICAgLy8gICAgICAgfQ0KICAgICAgLy8gICAgICAgYnJlYWsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgICAgZGVmYXVsdDogc3RlcC5wdXNoKG51bGwpDQogICAgICAvLyAgIH0NCiAgICAgIC8vICAgcmV0dXJuIHN0ZXANCiAgICAgIC8vIH0NCiAgICB9LA0KICAgIC8q5qC55o2u5bGA6Z2i6K+E5Lyw5YC877yM6L+U5Zue5LiL5LiA5q2l6KaB6LWw55qE5qOL5a2QKi8NCiAgICBtYWNoaW5lX2dldFBjVG9CZU1vdmVkKCkgew0KICAgICAgbGV0IGJsYWNrQWxsUGMgPSBbXSwgd2hpdGVBbGxQYyA9IFtdDQogICAgICBsZXQgZGlzcGxheUNoZXNzX2V2YWx1YXRlID0gdGhpcy5kaXNwbGF5Q2hlc3NUZW1wLm1hcChpdGVtID0+IHtyZXR1cm4gaXRlbX0pDQogICAgICAvL+ivpeW+queOr+W+l+WIsOaJgOacieWPr+S7pemAieaLqei1sOeahOaji+WtkO+8jOeahOS4gOe7tOWdkOaghw0KICAgICAgZm9yKGxldCBzcVNyYyBpbiB0aGlzLmRpc3BsYXlDaGVzc1RlbXApIHsNCiAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxU3JjXSAmIDE2KSB7DQogICAgICAgICAgYmxhY2tBbGxQYy5wdXNoKHNxU3JjKQ0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxU3JjXSAmIDgpIHdoaXRlQWxsUGMucHVzaChzcVNyYykNCiAgICAgIH0NCiAgICAgIC8q6K+l5b6q546v5Y+v5b6X5Yiw57qi5pa55qOL5a2Q5LiL5LiA5q2l55qE6LW354K56YCJ5oup5ZOq5LiqKi8NCiAgICAgIGxldCByYW1JX3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBibGFja0FsbFBjLmxlbmd0aCkNCiAgICAgIGxldCB2YWwyID0gMCwgbWF4VmFsID0gMCwgbWF4VmFsMl9zcVNyY193ID0gYmxhY2tBbGxQY1tyYW1JX3ddLCBEc3REb20NCiAgICAgIGZvcihsZXQgayBpbiB3aGl0ZUFsbFBjKSB7DQogICAgICAgIGxldCBzcVNyY193ID0gd2hpdGVBbGxQY1trXS8v5p+Q5Liq57qi5pa55qOL5a2Q55qE6LW354K55LiA57u05Z2Q5qCHDQogICAgICAgIC8vIGNvbnNvbGUubG9nKHNxU3JjMik7DQogICAgICAgIC8q6ZKI5a+56K+l57qi5qOL57qi5pa55b6X5Yiw5pyA5pyJ5Yip5LqO5a6D55qE6LWw5rOVKi8NCiAgICAgICAgRHN0RG9tID0gdGhpcy5tYWNoaW5lX2dldEV4YWN0U3RlcCh0aGlzLnNxVG9Eb20oc3FTcmNfdyksdGhpcy5kaXNwbGF5Q2hlc3NUZW1wKQ0KICAgICAgICBpZihEc3REb20gPT09IHVuZGVmaW5lZCkgY29udGludWUgLy/lpoLmnpzpgY3ljobliLDnmoTmn5DkuKrnuqLmlrnmo4vlrZDkuIDnp43otbDms5Xpg73msqHmnInvvIzlsLHot7Pov4cNCiAgICAgICAgLy8gY29uc29sZS5sb2coRHN0RG9tKTsNCiAgICAgICAgLyror6XnuqLmlrnmo4vlrZDmnIDkvbPotbDms5XnmoTnu4jngrnkuIDnu7TlnZDmoIcqLw0KICAgICAgICBsZXQgc3FEc3RfdyA9IHRoaXMuZG9tVG9TcShEc3REb20pDQogICAgICAgIC8q5YGH6K6+6K+l57qi5qOL56e75YqoKi8NCiAgICAgICAgbGV0IHRlbXBOdW0gPSB0aGlzLm1hY2hpbmVfc3VwcG9zZVRvTW92ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUsc3FTcmNfdyxzcURzdF93KQ0KDQogICAgICAgIHZhbDIgPSB0aGlzLm1hY2hpbmVfZXZhbHVhdGUoZGlzcGxheUNoZXNzX2V2YWx1YXRlKS8v6K+V5rGC6K+E5Lyw5YC8Mg0KICAgICAgICAvKuaBouWkjeS4rei9rOaji+ebmCovDQogICAgICAgIHRoaXMubWFjaGluZV9yZWNvdmVyRmljQm9hcmQoZGlzcGxheUNoZXNzX2V2YWx1YXRlLHNxU3JjX3csc3FEc3Rfdyx0ZW1wTnVtKQ0KICAgICAgICAvKuermeWcqOe6ouaWueeahOinkuW6pu+8jOaIkeiCr+WumuWKm+axgnZhbDLmnIDlpKcqLw0KICAgICAgICBpZih2YWwyID49IG1heFZhbCkgew0KICAgICAgICAgIG1heFZhbCA9IHZhbDIgLy/mm7TmlrDmnIDlpKfor4TkvLDlgLwNCiAgICAgICAgICBtYXhWYWwyX3NxU3JjX3cgPSBzcVNyY193Ly/mm7TmlrDor4TkvLDlgLzmnIDlpKfml7bpgInmi6nnmoTmo4vlrZANCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAvLyBtaW5NYXhWYWwyX3NxU3JjID0gYmxhY2tBbGxQY1tpXQ0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdlcnJvcicpOw0KICAgICAgICB9DQogICAgICAgIC8vIGJyZWFrDQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZyh3aGl0ZUFsbFBjKTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSk7DQogICAgICBsZXQgeERzdERvbSA9IHRoaXMubWFjaGluZV9nZXRFeGFjdFN0ZXAodGhpcy5zcVRvRG9tKG1heFZhbDJfc3FTcmNfdyksdGhpcy5kaXNwbGF5Q2hlc3NUZW1wKQ0KICAgICAgLy8gY29uc29sZS5sb2coeERzdERvbSk7DQogICAgICBpZih4RHN0RG9tLmF0dHIoJ2lkJykgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICBsZXQgeEFyciA9IHRoaXMubWFjaGluZV9nZXRTdGVwcyh0aGlzLnNxVG9Eb20obWF4VmFsMl9zcVNyY193KSx0aGlzLmRpc3BsYXlDaGVzc1RlbXApDQogICAgICAgIC8vIGNvbnNvbGUubG9nKHhBcnIpOw0KICAgICAgICB4RHN0RG9tID0geEFycltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB4QXJyLmxlbmd0aCldDQogICAgICB9DQogICAgICBpZih0aGlzLnNxVG9Eb20obWF4VmFsMl9zcVNyY193KS5hdHRyKCdpZCcpID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgbWF4VmFsMl9zcVNyY193ID0gd2hpdGVBbGxQY1tyYW1JX3ddDQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZygn57qi5pa55pyA5aW955qE6LW354K5OicgKyB0aGlzLnNxVG9Eb20obWF4VmFsMl9zcVNyY193KS5hdHRyKCdpZCcpKTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCfnuqLmlrnmnIDlpb3nmoTnu4jngrk6JyArIHhEc3REb20uYXR0cignaWQnKSk7DQogICAgICAvLyBjb25zb2xlLmxvZygn5YGH6K6+6K+l57qi5pa55qOL5a2Q6JC95a2Q5ZCO55qE6K+E5Lyw5YC877yaJyArIG1heFZhbCk7DQoNCiAgICAgIC8vIGNvbnNvbGUubG9nKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSk7DQogICAgICBsZXQgc3FEc3RfYixzcVNyY19iLy/pu5HmlrnmnIDnu4jlhrPlrprnmoTotbfngrnjgIHnu4jngrkNCiAgICAgIGxldCB2YWwxID0gMCxtaW5WYWwgPSBtYXhWYWwNCiAgICAgIC8vIGxldCBtaW5NYXhWYWwyX3NxU3JjID0gYmxhY2tBbGxQY1swXS8v5L2/bWF4VmFsMuacgOWwj+aXtueahOaji+WtkOeahOi1t+eCueS4gOe7tOWdkOaghyjpu5Hmlrnmiafmo4spDQogICAgICBmb3IobGV0IGkgaW4gYmxhY2tBbGxQYykgey8v6YGN5Y6G5omA5pyJ6buR5qOLDQogICAgICAgIC8vIGNvbnNvbGUubG9nKGkpOw0KICAgICAgICAvLyBpZihpID09IDkpIGJyZWFrIC8v5YWI6YGN5Y6G5YmNMTDpopfmo4vlrZANCiAgICAgICAgbGV0IHNxU3JjID0gYmxhY2tBbGxQY1tpXS8v5p+Q5Liq6buR5pa55qOL5a2Q55qE6LW354K55LiA57u05Z2Q5qCHDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCfkuIDpu5Hmlrnmo4vlrZDnmoTotbfngrk6JyArIHRoaXMuc3FUb0RvbShzcVNyYykuYXR0cignaWQnKSk7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCfkuIDpu5Hmlrnmo4vlrZDnmoTnu4jngrnvvJonKTsNCiAgICAgICAgLyrotbDms5XmlbDnu4TvvIzlhYPntKDkuLrlr7nosaHnsbvlnosqLw0KICAgICAgICBsZXQgc3RlcEFycmF5ID0gdGhpcy5tYWNoaW5lX2dldFN0ZXBzKHRoaXMuc3FUb0RvbShzcVNyYyksdGhpcy5kaXNwbGF5Q2hlc3NUZW1wKQ0KICAgICAgICAgICAgLm1hcChlID0+IHtyZXR1cm4gZX0pDQogICAgICAgIGZvcihsZXQgaiBpbiBzdGVwQXJyYXkpIHsvL+mBjeWOhuafkOm7keaji+eahOaJgOaciei1sOazlQ0KICAgICAgICAgIC8q6K+l6buR5pa55qOL5a2Q5YW25Lit5LiA5Liq6LWw5rOV55qE57uI54K577yM55qE5LiA57u05Z2Q5qCHKi8NCiAgICAgICAgICBsZXQgc3FEc3QgPSB0aGlzLmRvbVRvU3Eoc3RlcEFycmF5W2pdKQ0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc3FUb0RvbShzcURzdCkpOw0KICAgICAgICAgIC8vDQogICAgICAgICAgLy8gY29uc29sZS5sb2coZGlzcGxheUNoZXNzX2V2YWx1YXRlKTsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5Y+v5Lul5Yiw6L6+5LiA5LiA5LiA5LiAJyk7DQogICAgICAgICAgLyrpu5Hmo4vnmoTomZrmi5/np7vliqgqLw0KICAgICAgICAgIGxldCB0ZW1wTnVtX2IgPSB0aGlzLm1hY2hpbmVfc3VwcG9zZVRvTW92ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUsc3FTcmMsc3FEc3QpDQoNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpOw0KICAgICAgICAgIC8q6YeN5paw5rGC5LiA5LiL5LmL5YmN56Gu5a6a55qE57qi5pa55qOL5a2Q55qE57uI54K5Ki8NCiAgICAgICAgICBsZXQgeHh4RHN0RG9tID0gdGhpcy5tYWNoaW5lX2dldEV4YWN0U3RlcCh0aGlzLnNxVG9Eb20obWF4VmFsMl9zcVNyY193KSxkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpDQogICAgICAgICAgaWYoeHh4RHN0RG9tID09PSB1bmRlZmluZWQpIGNvbnRpbnVlLy/lpoLmnpzmlLnotbDms5XmsqHmnInkuobvvIzot7Pov4cNCiAgICAgICAgICBsZXQgc3FEc3RfdyA9IHRoaXMuZG9tVG9TcSh4eHhEc3REb20pDQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ+mHjeaWsOaxguS6hue6ouaji+eahOe7iOeCue+8micgKyB0aGlzLnNxVG9Eb20oc3FEc3RfdykuYXR0cignaWQnKSk7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ+WPr+S7peWIsOi+vuS6jOS6jOS6jOS6jCcpOw0KICAgICAgICAgIGxldCB0ZW1wTnVtX3cgPSB0aGlzLm1hY2hpbmVfc3VwcG9zZVRvTW92ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUsbWF4VmFsMl9zcVNyY193LHNxRHN0X3cpDQogICAgICAgICAgdmFsMSA9IHRoaXMubWFjaGluZV9ldmFsdWF0ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpLy/pu5HjgIHnuqLmlrnpg73lgYforr7otbDlrozlkI7vvIzmsYLor4TkvLDlgLwxDQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ+WBh+iuvum7keaji+iQveWtkOWQjueahOivhOS8sOWAvO+8micgKyB2YWwxKTsNCg0KICAgICAgICAgIHRoaXMubWFjaGluZV9yZWNvdmVyRmljQm9hcmQoZGlzcGxheUNoZXNzX2V2YWx1YXRlLG1heFZhbDJfc3FTcmNfdyxzcURzdF93LHRlbXBOdW1fdykNCiAgICAgICAgICB0aGlzLm1hY2hpbmVfcmVjb3ZlckZpY0JvYXJkKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSxzcVNyYyxzcURzdCx0ZW1wTnVtX2IpDQogICAgICAgICAgLyrnq5nlnKjpu5HmlrnnmoTop5LluqbvvIzmiJHogq/lrprlipvmsYJ2YWwx5pyA5bCPLG1heFZhbDLmnIDlsI8qLw0KICAgICAgICAgIGlmKHZhbDEgPD0gbWluVmFsKSB7DQogICAgICAgICAgICBtaW5WYWwgPSB2YWwxDQogICAgICAgICAgICBzcURzdF9iID0gc3FEc3QNCiAgICAgICAgICAgIHNxU3JjX2IgPSBzcVNyYw0KICAgICAgICAgICAgY29uc29sZS5sb2coJ+acgOWwj+ivhOS8sOWAvCcgKyBtaW5WYWwpOw0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyBlbHNlIGNvbnNvbGUubG9nKCdlcnInKTsNCg0KICAgICAgICAgIC8vIC8q6buR5pa56LWw5qOL56C05Z2P55qEKi8NCiAgICAgICAgICBpZih0aGlzLnNxVG9Eb20oc3FTcmMpLmF0dHIoJ2lkJykgPT09ICdwb3MyJykgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLScpOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGlzcGxheUNoZXNzX2V2YWx1YXRlKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBicmVhaw0KICAgICAgfQ0KICAgICAgLy8gY29uc29sZS5sb2coJ+m7keaji+acgOe7iOeahOi1t+eCuTonKTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc3FUb0RvbShzcVNyY19iKSk7DQogICAgICAvLyBjb25zb2xlLmxvZygn6buR5qOL5pyA57uI55qE57uI54K5OicpOw0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zcVRvRG9tKHNxRHN0X2IpKTsNCiAgICAgIC8vIHJldHVybiByYW5kb21TcmNEb20NCiAgICAgIHJldHVybiBbdGhpcy5zcVRvRG9tKHNxU3JjX2IpLHRoaXMuc3FUb0RvbShzcURzdF9iKV0NCiAgICAgIC8q5Lul5LiL5Li65rKh5pyJ5pCc57Si566X5rOV77yM55u05o6l6ZqP5py6Ki8NCiAgICAgIC8vIGxldCByYW5kb21JbmRleA0KICAgICAgLy8gbGV0IHJhbmRvbVNyY0RvbS8v6LW354K5LOe7iOeCuQ0KICAgICAgLy8gd2hpbGUoMSkgew0KICAgICAgLy8gICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJsYWNrQWxsUGMubGVuZ3RoKS8v6ZqP5py65pWw5Zyo5pWw57uE5Lit55qE57Si5byV5YC8DQogICAgICAvLyAgIC8vIGxldCByYW5kb21TcSA9IGJsYWNrQWxsUGNbcmFuZG9tSW5kZXhdDQogICAgICAvLyAgIHJhbmRvbVNyY0RvbSA9IHRoaXMuc3FUb0RvbShibGFja0FsbFBjW3JhbmRvbUluZGV4XSkNCiAgICAgIC8vICAgaWYodGhpcy5tYWNoaW5lX2dldFN0ZXBzKHJhbmRvbVNyY0RvbSkubGVuZ3RoID4gMCkNCiAgICAgIC8vICAgICAvL+W9k+mAieS4reeahOaji+WtkOiHs+WwkeacieS4gOenjei1sOazleaXtu+8jOaJjemAgOWHuuW+queOr++8jOWQpuWImeS4gOebtOW+queOr+ebtOWIsOaJvuWIsOS4gOaji+WtkOWFtui1sOazleacieiHs+WwkeS4gOenjQ0KICAgICAgLy8gICAgIGJyZWFrDQogICAgICAvLyB9DQoNCiAgICB9LA0KICAgIC8q5qC55o2u6L6T5YWl55qE6LW354K5ZG9t5a+56LGh77yM6L+U5Zue5L2/6K+E5Lyw5YC85pyA5bCP55qE57uI54K555qEZG9t5a+56LGhKi8NCiAgICBtYWNoaW5lX2dldEV4YWN0U3RlcChzcmNEb20sYXJyKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhhcnIpOw0KICAgICAgbGV0IGFsbFdheXMsIGRpc3BsYXlDaGVzc19ldmFsdWF0ZQ0KICAgICAgaWYoYXJyICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgYWxsV2F5cyA9IHRoaXMubWFjaGluZV9nZXRTdGVwcyhzcmNEb20sYXJyKQ0KICAgICAgICBkaXNwbGF5Q2hlc3NfZXZhbHVhdGUgPSBhcnIubWFwKChpdGVtKSA9PiB7DQogICAgICAgICAgLy/nlKjkuo7or4TkvLDliIbmlbDnmoTkuK3ovazmo4vnm5go5LiN6IO955u05o6l5a+55pWw57uE6LWL5YC877yM5bqU5a+55YWD57Sg6LWL5YC8KQ0KICAgICAgICAgIHJldHVybiBpdGVtDQogICAgICAgIH0pDQogICAgICB9DQogICAgICAvLyBlbHNlIHsNCiAgICAgIC8vICAgYWxsV2F5cyA9IHRoaXMubWFjaGluZV9nZXRTdGVwcyhzcmNEb20pIC8v6K+l5qOL5a2Q55qE5omA5pyJ6LWw5rOVLOaVsOe7hOWFg+e0oOaYr2RvbeWvueixoQ0KICAgICAgLy8gICAvKuaji+ebmOS4rei9rOermSovDQogICAgICAvLyAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZSA9IHRoaXMuZGlzcGxheUNoZXNzVGVtcC5tYXAoKGl0ZW0pID0+IHsNCiAgICAgIC8vICAgICAvL+eUqOS6juivhOS8sOWIhuaVsOeahOS4rei9rOaji+ebmCjkuI3og73nm7TmjqXlr7nmlbDnu4TotYvlgLzvvIzlupTlr7nlhYPntKDotYvlgLwpDQogICAgICAvLyAgICAgcmV0dXJuIGl0ZW0NCiAgICAgIC8vICAgfSkNCiAgICAgIC8vIH0NCiAgICAgIGlmKCF0aGlzLnBsYXllclNpZGUpIHsNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ+m7keaWueaJp+aji++8jOatpOaXtuaxgueahOaYr+e6ouaji+eahOacgOS9s+e7iOeCuScpOw0KICAgICAgICAvL+WmguaenOaYr+m7keaWueaJp+ajiw0KICAgICAgICBsZXQgbWF4VmFsID0gdGhpcy5tYWNoaW5lX2V2YWx1YXRlKGFycikNCiAgICAgICAgbGV0IHJhbmRvbURzdEluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsV2F5cy5sZW5ndGgpDQogICAgICAgIGxldCBkc3REb20gPSBhbGxXYXlzW3JhbmRvbURzdEluZGV4XS8v5Yid5aeL5bCx6LWL5LiA5Liq6ZqP5py65YC8DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHNyY0RvbSk7DQogICAgICAgIGZvcihsZXQgaSBpbiBhbGxXYXlzKSB7DQogICAgICAgICAgbGV0IHNyY051bSA9IGRpc3BsYXlDaGVzc19ldmFsdWF0ZVt0aGlzLmRvbVRvU3Eoc3JjRG9tKV0vL+i1t+eCueaji+WtkOS7o+ihqOeahE51beWAvA0KICAgICAgICAgIGxldCBzcURzdCA9IHRoaXMuZG9tVG9TcShhbGxXYXlzW2ldKS8v57uI54K55qOL5a2Q55qE5LiA57u05Z2Q5qCHDQogICAgICAgICAgbGV0IHRlbXBOdW0gPSBkaXNwbGF5Q2hlc3NfZXZhbHVhdGVbc3FEc3RdLy/kv53lrZjkuIDkuIvokL3mo4vliY3nu4jngrnlpITnmoTmo4vlrZBOdW0NCiAgICAgICAgICAvKuWBh+iuvue7iOeCueiQveS4i+ivpeaji++8jOWNs+e7iOeCueWkhOeahE51beWAvOaUueWPmCovDQogICAgICAgICAgZGlzcGxheUNoZXNzX2V2YWx1YXRlW3NxRHN0XSA9IHNyY051bQ0KICAgICAgICAgIGxldCBjdXJyZW50VmFsID0gdGhpcy5tYWNoaW5lX2V2YWx1YXRlKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSkNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygn6K+E5Lyw5YC877yaJysgY3VycmVudFZhbCk7DQogICAgICAgICAgaWYodGhpcy5tYWNoaW5lX2V2YWx1YXRlKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSkgPiBtYXhWYWwpIHsvL+WmguaenOivhOS8sOWAvOavlOWOn+adpeWkpw0KICAgICAgICAgICAgbWF4VmFsID0gdGhpcy5tYWNoaW5lX2V2YWx1YXRlKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSkvL+abtOaWsOacgOWkp+WAvA0KICAgICAgICAgICAgZHN0RG9tID0gdGhpcy5zcVRvRG9tKHNxRHN0KS8v5pu05paw57uI54K5DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIGVsc2UgY29uc29sZS5sb2coJ+atpOasoeW+queOr+ayoeacieWkp+eahCcpOw0KICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVt0aGlzLmRvbVRvU3Eoc3JjRG9tKV0gPSBzcmNOdW0vL+aBouWkjeS4rei9rOaji+ebmA0KICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVtzcURzdF0gPSB0ZW1wTnVtLy/mgaLlpI3kuK3ovazmo4vnm5gNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZHN0RG9tDQogICAgICB9DQogICAgICBlbHNlIHsNCiAgICAgICAgbGV0IG1pblZhbCA9IHRoaXMubWFjaGluZV9ldmFsdWF0ZShhcnIpDQogICAgICAgIGxldCByYW5kb21Ec3RJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbFdheXMubGVuZ3RoKQ0KICAgICAgICBsZXQgZHN0RG9tID0gYWxsV2F5c1tyYW5kb21Ec3RJbmRleF0vL+WIneWni+Wwsei1i+S4gOS4qumaj+acuuWAvA0KICAgICAgICAvLyBjb25zb2xlLmxvZyhzcmNEb20pOw0KICAgICAgICBmb3IobGV0IGkgaW4gYWxsV2F5cykgew0KICAgICAgICAgIGxldCBzcmNOdW0gPSBkaXNwbGF5Q2hlc3NfZXZhbHVhdGVbdGhpcy5kb21Ub1NxKHNyY0RvbSldLy/otbfngrnmo4vlrZDku6PooajnmoROdW3lgLwNCiAgICAgICAgICBsZXQgc3FEc3QgPSB0aGlzLmRvbVRvU3EoYWxsV2F5c1tpXSkvL+e7iOeCueaji+WtkOeahOS4gOe7tOWdkOaghw0KICAgICAgICAgIGxldCB0ZW1wTnVtID0gZGlzcGxheUNoZXNzX2V2YWx1YXRlW3NxRHN0XS8v5L+d5a2Y5LiA5LiL6JC95qOL5YmN57uI54K55aSE55qE5qOL5a2QTnVtDQogICAgICAgICAgLyrlgYforr7nu4jngrnokL3kuIvor6Xmo4vvvIzljbPnu4jngrnlpITnmoROdW3lgLzmlLnlj5gqLw0KICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVtzcURzdF0gPSBzcmNOdW0NCiAgICAgICAgICBsZXQgY3VycmVudFZhbCA9IHRoaXMubWFjaGluZV9ldmFsdWF0ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpDQogICAgICAgICAgaWYodGhpcy5tYWNoaW5lX2V2YWx1YXRlKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSkgPCBtaW5WYWwpIHsvL+WmguaenOivhOS8sOWAvOavlOWOn+adpeWwjw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLScpOw0KICAgICAgICAgICAgbWluVmFsID0gdGhpcy5tYWNoaW5lX2V2YWx1YXRlKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSkvL+abtOaWsOacgOWwj+WAvA0KICAgICAgICAgICAgZHN0RG9tID0gdGhpcy5zcVRvRG9tKHNxRHN0KS8v5pu05paw57uI54K5DQogICAgICAgICAgfQ0KICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVt0aGlzLmRvbVRvU3Eoc3JjRG9tKV0gPSBzcmNOdW0vL+aBouWkjeS4rei9rOaji+ebmA0KICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVtzcURzdF0gPSB0ZW1wTnVtLy/mgaLlpI3kuK3ovazmo4vnm5gNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZHN0RG9tDQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZyhkc3REb20pOw0KICAgICAgLy8gY29uc29sZS5sb2coYWxsV2F5cyk7DQogICAgICAvLyBjb25zb2xlLmxvZygn5b2T5YmN6K+E5Lyw5YC8OicgKyB0aGlzLm1hY2hpbmVfZXZhbHVhdGUodGhpcy5kaXNwbGF5Q2hlc3NUZW1wKSk7DQogICAgfSwNCiAgICAvKuagueaNrui+k+WFpeeahOaVtOS4quaji+ebmOaVsOe7hO+8jOi/lOWbnue6ouaWueWIhuaVsC3pu5HmlrnliIbmlbDnmoTlgLzvvIzorrDkvZzjgIror4TkvLDlgLzjgIsqLw0KICAgIG1hY2hpbmVfZXZhbHVhdGUoYXJyYXkpIHsNCiAgICAgIGxldCB3VmFsID0gdGhpcy5tYWNoaW5lX2dldFZhbChhcnJheSx0cnVlKSwgYlZhbCA9IHRoaXMubWFjaGluZV9nZXRWYWwoYXJyYXksZmFsc2UpDQogICAgICByZXR1cm4gd1ZhbCAtIGJWYWwNCiAgICB9LA0KICAgIC8q5qC55o2u6L6T5YWl55qE5pW05Liq5qOL55uY5pWw57uE77yM6L+U5ZueKi8NCiAgICBtYWNoaW5lX2dldFZhbChhcnJheSxpc1doaXRlKSB7DQogICAgICBsZXQgdmFsID0gMA0KICAgICAgZm9yKGxldCBpIGluIGFycmF5KSB7DQogICAgICAgIGlmKGlzV2hpdGUpIHsvL+iLpeaYr+e6ouaWuQ0KICAgICAgICAgIHN3aXRjaCAoYXJyYXlbaV0pIHsNCiAgICAgICAgICAgIGNhc2UgODogdmFsICs9IDEwMDA7YnJlYWsNCiAgICAgICAgICAgIGNhc2UgOTogdmFsICs9IDIwO2JyZWFrDQogICAgICAgICAgICBjYXNlIDEwOiB2YWwgKz0gMjA7YnJlYWsNCiAgICAgICAgICAgIGNhc2UgMTE6IHZhbCArPSA0NTticmVhaw0KICAgICAgICAgICAgY2FzZSAxMjogdmFsICs9IDkwO2JyZWFrDQogICAgICAgICAgICBjYXNlIDEzOiB2YWwgKz0gNDA7YnJlYWsNCiAgICAgICAgICAgIGNhc2UgMTQ6IHZhbCArPSAxMDticmVhaw0KICAgICAgICAgICAgZGVmYXVsdDogdmFsICs9IDANCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgc3dpdGNoIChhcnJheVtpXSkgew0KICAgICAgICAgICAgY2FzZSAxNjogdmFsICs9IDEwMDA7YnJlYWsNCiAgICAgICAgICAgIGNhc2UgMTc6IHZhbCArPSAyMDticmVhaw0KICAgICAgICAgICAgY2FzZSAxODogdmFsICs9IDIwO2JyZWFrDQogICAgICAgICAgICBjYXNlIDE5OiB2YWwgKz0gNDU7YnJlYWsNCiAgICAgICAgICAgIGNhc2UgMjA6IHZhbCArPSA5MDticmVhaw0KICAgICAgICAgICAgY2FzZSAyMTogdmFsICs9IDQwO2JyZWFrDQogICAgICAgICAgICBjYXNlIDIyOiB2YWwgKz0gMTA7YnJlYWsNCiAgICAgICAgICAgIGRlZmF1bHQ6IHZhbCArPSAwDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gdmFsDQogICAgfSwNCiAgICAvKuagueaNrui+k+WFpeeahOS4rei9rOaji+ebmOaVsOe7hOOAgei1t+eCueOAgee7iOeCue+8jOWujOaIkOWcqOivpeaVsOe7hOS4iueahOiZmuaLn+enu+WKqO+8jOi/lOWbnuS4rei9rOWAvCovDQogICAgbWFjaGluZV9zdXBwb3NlVG9Nb3ZlKGFycixzcVNyYyxzcURzdCkgew0KICAgICAgaWYoYXJyID09PSB1bmRlZmluZWQgfHwgc3FTcmMgPT09IHVuZGVmaW5lZCB8fCBzcURzdCA9PT0gdW5kZWZpbmVkKQ0KICAgICAgICByZXR1cm4gJ0VSUk9SJw0KICAgICAgbGV0IHRlbXAgPSBhcnJbc3FEc3RdDQogICAgICBhcnJbc3FEc3RdID0gYXJyW3NxU3JjXQ0KICAgICAgYXJyW3NxU3JjXSA9IDENCiAgICAgIHJldHVybiB0ZW1wDQogICAgfSwNCiAgICAvKuagueaNrui+k+WFpeeahOS4rei9rOaji+ebmOaVsOe7hOOAgeaji+WtkOeahOi1t+eCueWSjOe7iOeCueOAgeS4rei9rOWAvO+8jOWujOaIkOS4rei9rOaji+ebmOeahOaBouWkjSovDQogICAgbWFjaGluZV9yZWNvdmVyRmljQm9hcmQoYXJyLHNxU3JjLHNxRHN0LHRlbXApIHsNCiAgICAgIGlmKGFyciA9PT0gdW5kZWZpbmVkIHx8IHNxU3JjID09PSB1bmRlZmluZWQgfHwgc3FEc3QgPT09IHVuZGVmaW5lZCB8fCB0ZW1wID09PSB1bmRlZmluZWQpDQogICAgICAgIHJldHVybiAnRVJST1InDQoNCiAgICAgIGFycltzcVNyY10gPSBhcnJbc3FEc3RdDQogICAgICBhcnJbc3FEc3RdID0gdGVtcA0KICAgIH0sDQogICAgLyror6Xlh73mlbDkvJrkvb/lsYDpnaLph43mlrDnu5jliLbvvIzov5Tlm54xLDIsMywwDQogICAgKiAx77ya6KGo56S66Kem5Y+R5LqG5YW157q/5Yi35pawDQogICAgKiAy77ya5pu/54i25LuO5YabDQogICAgKiAz77ya6I2J5pyo55qG5YW1Ki8NCiAgICBtYWNoaW5lX3Bhc3NpdmVTa2lsbHMoKSB7DQogICAgICAvKuWFtee6v+WIt+aWsCovDQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PiB7DQogICAgICAgIC8q5YW157q/5Yi35pawKi8NCiAgICAgICAgbGV0IGFkdmlzb3JTdW0gPSAwLCBpc0VhdGVuID0gZmFsc2UNCiAgICAgICAgbGV0IGN1cnJlbnRWYWwgPSB0aGlzLm1hY2hpbmVfZXZhbHVhdGUodGhpcy5kaXNwbGF5Q2hlc3NUZW1wKSwgaXNTa2lsbDMgPSBmYWxzZQ0KICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1hY2hpbmVfZ2V0VmFsKHRoaXMuZGlzcGxheUNoZXNzVGVtcCwgZmFsc2UpKTsNCiAgICAgICAgZm9yKGxldCBpIGluIHRoaXMuZGlzcGxheUNoZXNzVGVtcCkgew0KICAgICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtpXSA9PT0gMjIpIHsNCiAgICAgICAgICAgIGFkdmlzb3JTdW0gKysNCiAgICAgICAgICB9DQogICAgICAgICAgLyrmm7/niLbku47lhpsqLw0KICAgICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtpXSAmIDggJiYgdGhpcy5kaXNwbGF5Q2hlc3NfT2xkW2ldICYgMTYpIHsNCiAgICAgICAgICAgIC8v6Iul5p+Q5aSE5LiK5LiA5q2l5Li66buR5pa55qOL5a2Q77yM5LiL5LiA5q2l5Li657qi5pa55qOL5a2Q77yM6K+05piO6buR5pa55qOL5a2Q6KKr5ZCD5o6JDQogICAgICAgICAgICBpZihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKyAwLjkpKSB7IC8v6ZmE5Yqg5p2h5Lu277ya5aSn5qaCMzAl5Yeg546H6Kem5Y+R5pu/54i25LuO5YabDQogICAgICAgICAgICAgIGlzRWF0ZW4gPSB0cnVlDQogICAgICAgICAgICAgIHRoaXMuZGlzcGxheUNoZXNzVGVtcFtpXSA9IHRoaXMuZGlzcGxheUNoZXNzX09sZFtpXQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICAvKuiNieacqOeahuWFtSovDQogICAgICAgICAgaWYoY3VycmVudFZhbCA+IDE4MCB8fCB0aGlzLm1hY2hpbmVfZ2V0VmFsKHRoaXMuZGlzcGxheUNoZXNzVGVtcCxmYWxzZSkgPCAxMjIwKSB7DQogICAgICAgICAgICAvL+m7keaWueaAu+S7t+WAvO+8nDEyMjDvvIzlpKfnuqbmjZ/lpLHkuobkuKTovabkuIDngq4NCiAgICAgICAgICAgIGlzU2tpbGwzID0gdHJ1ZQ0KICAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW2ldID09PSAxKSB7DQogICAgICAgICAgICAgIHRoaXMuZGlzcGxheUNoZXNzVGVtcFtpXSA9IDIyDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmKGFkdmlzb3JTdW0gPCAzKSB7DQogICAgICAgICAgZm9yKGxldCBpID0gMCxqID0gMDtpIDw1O2krKyxqKz0yKSB7DQogICAgICAgICAgICBsZXQgZG9tU3EgPSB0aGlzLmRvbVRvU3EoJChgI3BvcyR7MjcgKyBqfWApKQ0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJChgI3BvcyR7MjcgKyBqfWApKTsNCiAgICAgICAgICAgIHRoaXMuZGlzcGxheUNoZXNzVGVtcFtkb21TcV0gPSAyMg0KICAgICAgICAgIH0NCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2tpbGwxJykucGxheSgpDQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmRyYXdXaXRoU3EoKQ0KICAgICAgICAgICAgLy8gbGV0IGNoZXNzSW5mbyA9IG51bGwNCiAgICAgICAgICAgIHRoaXMuY2hlc3MxQ2xpY2sobnVsbCkNCiAgICAgICAgICAgIHJlc29sdmUoMSkNCiAgICAgICAgICB9LDMwMDApDQogICAgICAgIH0NCiAgICAgICAgLyrmm7/niLbku47lhpsqLw0KICAgICAgICBlbHNlIGlmKGlzRWF0ZW4pIHsNCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2tpbGwyJykucGxheSgpDQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmRyYXdXaXRoU3EoKQ0KICAgICAgICAgICAgLy8gbGV0IGNoZXNzSW5mbyA9IG51bGwNCiAgICAgICAgICAgIHRoaXMuY2hlc3MxQ2xpY2sobnVsbCkNCiAgICAgICAgICAgIHJlc29sdmUoMikNCiAgICAgICAgICB9LDMwMDApDQogICAgICAgIH0NCiAgICAgICAgLyrojYnmnKjnmoblhbUqLw0KICAgICAgICBlbHNlIGlmKGlzU2tpbGwzKSB7DQogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NraWxsMycpLnBsYXkoKQ0KICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5kcmF3V2l0aFNxKCkNCiAgICAgICAgICAgIC8vIGxldCBjaGVzc0luZm8gPSBudWxsDQogICAgICAgICAgICB0aGlzLmNoZXNzMUNsaWNrKG51bGwpDQogICAgICAgICAgICByZXNvbHZlKDMpDQogICAgICAgICAgfSwzMDAwKQ0KICAgICAgICB9DQogICAgICAgIGVsc2UgcmVzb2x2ZSgwKQ0KDQogICAgICB9KQ0KICAgIH0sDQogICAgLyrmoLnmja7ovpPlhaXnmoRzce+8iOS4gOe7tOWdkOagh++8ie+8jOi/lOWbnuaji+ebmOS4reivpeaji+WtkOeahGRvbeWvueixoSovDQogICAgc3FUb0RvbShzcSkgew0KICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxKQ0KICAgICAgbGV0IGltZ0luZGV4ID0gc3EgLSA3KnJvdyAtMjkgLSAxDQogICAgICAvLyBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQ0KICAgICAgcmV0dXJuICQoJyNwb3MnICsgaW1nSW5kZXgpDQogICAgfSwNCiAgICAvKuagueaNrui+k+WFpeeahGRvbeWvueixoe+8jOi/lOWbnnNx77yI5LiA57u05Z2Q5qCH77yJKi8NCiAgICBkb21Ub1NxKGRvbSkgew0KICAgICAgbGV0IGltZ0luZGV4ID0gcGFyc2VJbnQoZG9tLmF0dHIoJ2lkJykuc2xpY2UoMykpICsgMQ0KICAgICAgcmV0dXJuIHRoaXMuaW1nSW5kZXhUb1NxKGltZ0luZGV4KQ0KICAgIH0sDQogICAgLyrkvKDlhaXkuIDnu7TlnZDmoIfvvIzlpoLmnpzlnKjmo4vnm5jlhoXvvIzov5Tlm550cnVlKi8NCiAgICBJTl9CT0FSRChzcSkgew0KICAgICAgcmV0dXJuIHRoaXMuSU5fQk9BUkRfW3NxXSAhPT0gMDsNCiAgICB9LA0KICAgIC8q5Yik5pat5piv5ZCm5Zyo5Lmd5a6r5qC85YaFLOiLpeaYr++8jOi/lOWbnnRydWUqLw0KICAgIElOX0ZPUlQoc3EpIHsNCiAgICAgIHJldHVybiB0aGlzLklOX0ZPUlRfW3NxXSAhPT0gMDsNCiAgICB9LA0KICAgIC8q5bCG5LqM57u055+p6Zi15Z2Q5qCH6L2s5o2i5Li65LiA57u055+p6Zi15Z2Q5qCHICh4LHkp5ZCrKDAsMCkqLw0KICAgIENPT1JEX1hZKHgsIHkpIHsvLyDlsIbkuoznu7Tnn6npmLXlnZDmoIfovazmjaLkuLrkuIDnu7Tnn6npmLXlnZDmoIcgKHgseSnlkKsoMCwwKQ0KICAgICAgcmV0dXJuIHggKyAoeSA8PCA0KTsNCiAgICB9LA0KICAgIC8q5qC55o2u5LiA57u055+p6Zi177yM6I635Y+W5LqM57u055+p6Zi16KGM5pWwIOihjOaVsOS7jjDlvIDlp4sqLw0KICAgIFJBTktfWShzcSkgey8vIOagueaNruS4gOe7tOefqemYte+8jOiOt+WPluS6jOe7tOefqemYteihjOaVsCDooYzmlbDku44w5byA5aeLDQogICAgICByZXR1cm4gc3EgPj4gNDsNCiAgICB9LA0KICAgIC8q5qC55o2u5LiA57u055+p6Zi177yM6I635Y+W5LqM57u055+p6Zi15YiX5pWwKi8NCiAgICBGSUxFX1goc3EpIHsvLyDmoLnmja7kuIDnu7Tnn6npmLXvvIzojrflj5bkuoznu7Tnn6npmLXliJfmlbANCiAgICAgIHJldHVybiBzcSAmIDE1Ow0KICAgIH0sDQogICAgLyrliJ3lp4vljJbmo4vnm5jvvIzlvpfliLDmo4vnm5jkuIDlvIDlp4vnmoTluIPlsYAqLw0KICAgIGluaXRCb2FyZCgpIHsNCiAgICAgIHRoaXMuZGlzcGxheUNoZXNzVGVtcCA9IFtdLy/muIXnqbrkuIDkuIvmo4vnm5gNCiAgICAgIHRoaXMuRkVOQXJyYXkgPSB0aGlzLkZFTi5zcGxpdCgnJykgLy/lsIZGRU7lrZfnrKbkuLLovazkuLrmlbDnu4QNCg0KICAgICAgdGhpcy5GRU50b0JvYXJkKHRoaXMuRkVOQXJyYXkpLy/lsIZGRU7kuLIoYXJyYXnlnosp6L2s5YyW5Li65LiA57u05pWw57uE5b2i5byP77yM5bm25LiU5a2X56ym5YWD57Sg5pig5bCE5Li65pW05Z6LLOS/neWtmOWcqHRoaXMuZGlzcGxheUNoZXNzVGVtcA0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykgey8v5bCG5qOL55uY5aSW5YWD57Sg6K6+572u5Li6bnVsbA0KICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoaSkpIHsNCiAgICAgICAgICB0aGlzLmRpc3BsYXlDaGVzc1RlbXBbaV0gPSBudWxsDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGxldCBzdGFydCA9IHRoaXMuQ09PUkRfWFkoMywgMykgLy81MSzlvqrnjq/lvIDlp4vlpIQNCiAgICAgIGxldCBlbmQgPSB0aGlzLkNPT1JEX1hZKDExLCAxMikgLy8yMDPvvIzlvqrnjq/nu5PmnZ/lpIQNCiAgICAgIC8vIGxldCBpbWdEb21BcnIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYuaW1nQm94IGltZycpDQogICAgICAvKnRhZ+eUqOS9nOiusOW9leaWh+S7tuWQjeWFs+mUruS/oeaBr++8mw0KICAgICAgKipyb3fmmK/lvZPliY3lvqrnjq/ntKLlvJXlgLxp5a+55bqU55qE5LqM57u05Z2Q5qCH55qE6KGM5pWwLGNvbOaYr+WIl+aVsO+8mw0KICAgICAgKippbWdJbmRleOeUqOS6juiusOW9lWnlr7nlupTnrKzlh6DkuKrlm77niYcqLw0KICAgICAgbGV0IHRhZyA9ICcnLCByb3cgPSAwLCBpbWdJbmRleCA9IDAsIGNvbCA9IDA7DQogICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHsNCiAgICAgICAgaWYgKHRoaXMuSU5fQk9BUkQoaSkpIHsNCiAgICAgICAgICBzd2l0Y2ggKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtpXSkgew0KICAgICAgICAgICAgY2FzZSA4Og0KICAgICAgICAgICAgICB0YWcgPSAnSyc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSA5Og0KICAgICAgICAgICAgICB0YWcgPSAnQSc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxMDoNCiAgICAgICAgICAgICAgdGFnID0gJ0InOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTE6DQogICAgICAgICAgICAgIHRhZyA9ICdOJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDEyOg0KICAgICAgICAgICAgICB0YWcgPSAnUic7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxMzoNCiAgICAgICAgICAgICAgdGFnID0gJ0MnOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTQ6DQogICAgICAgICAgICAgIHRhZyA9ICdQJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIGNhc2UgMTY6DQogICAgICAgICAgICAgIHRhZyA9ICdrXyc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxNzoNCiAgICAgICAgICAgICAgdGFnID0gJ2FfJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDE4Og0KICAgICAgICAgICAgICB0YWcgPSAnYl8nOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTk6DQogICAgICAgICAgICAgIHRhZyA9ICduXyc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAyMDoNCiAgICAgICAgICAgICAgdGFnID0gJ3JfJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDIxOg0KICAgICAgICAgICAgICB0YWcgPSAnY18nOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMjI6DQogICAgICAgICAgICAgIHRhZyA9ICdwXyc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAwOg0KICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCcNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCcNCiAgICAgICAgICB9DQogICAgICAgICAgcm93ID0gdGhpcy5SQU5LX1koaSkNCiAgICAgICAgICBjb2wgPSB0aGlzLkZJTEVfWChpKQ0KICAgICAgICAgIGltZ0luZGV4ID0gaSAtIDcgKiByb3cgLSAzMA0KICAgICAgICAgIGxldCBpbWdTcmNTdHIgPSBgL2ltZy9jaGVzcy8ke3RhZ30ucG5nYDsNCiAgICAgICAgICB0aGlzLmltZ0RvbUFycltpbWdJbmRleF0uc3JjID0gaW1nU3JjU3RyDQogICAgICAgICAgLyrmuIXnqbrlj5jph48qLw0KICAgICAgICAgIHRhZyA9ICcnOw0KICAgICAgICAgIHJvdyA9IDA7DQogICAgICAgICAgaW1nSW5kZXggPSAwDQogICAgICAgIH0gZWxzZSBjb250aW51ZQ0KICAgICAgfQ0KDQogICAgfSwNCiAgICAvKuWwhkZFTuS4sihhcnJheeWeiynovazljJbkuLrkuIDnu7TmlbDnu4TlvaLlvI/vvIzlubbkuJTlrZfnrKblhYPntKDmmKDlsITkuLrmlbTlnoss5L+d5a2Y5ZyodGhpcy5kaXNwbGF5Q2hlc3NUZW1wKi8NCiAgICBGRU50b0JvYXJkKEZFTkFycmF5KSB7DQogICAgICBsZXQgeCA9IDMsIHkgPSAzDQogICAgICBmb3IgKGxldCBpIGluIEZFTkFycmF5KSB7DQogICAgICAgIGxldCBjaCA9IEZFTkFycmF5W2ldDQogICAgICAgIGlmIChjaCA9PT0gJy8nKSB7Ly/mjaLooYwNCiAgICAgICAgICB5KysNCiAgICAgICAgfQ0KICAgICAgICBpZiAoeSA+IDEyKSBicmVhaw0KICAgICAgICBpZiAoeCA+IDExKSB4ID0gMw0KICAgICAgICBlbHNlIGlmIChjaCA+PSAnMScgJiYgY2ggPD0gJzknKSB7Ly/lh7rnjrDnqbrkvY0NCiAgICAgICAgICB4ICs9IHBhcnNlSW50KGNoKQ0KICAgICAgICB9IGVsc2UgaWYgKChjaCA+PSAnYScgJiYgY2ggPD0gJ3onKSkgey8v57qi5pa55qOL5a2Q5oiW6buR5pa55qOL5a2QDQogICAgICAgICAgbGV0IGluZGV4ID0geCArICh5IDw8IDQpDQogICAgICAgICAgdGhpcy5kaXNwbGF5Q2hlc3NUZW1wW2luZGV4XSA9IHRoaXMuRkVOQ2hhclRvTnVtKGNoKQ0KICAgICAgICAgIHgrKw0KICAgICAgICB9IGVsc2UgaWYgKGNoID49ICdBJyAmJiBjaCA8PSAnWicpIHsNCiAgICAgICAgICBsZXQgaW5kZXggPSB4ICsgKHkgPDwgNCkNCiAgICAgICAgICB0aGlzLmRpc3BsYXlDaGVzc1RlbXBbaW5kZXhdID0gdGhpcy5GRU5DaGFyVG9OdW0oY2gpDQogICAgICAgICAgeCsrDQogICAgICAgIH0gZWxzZSBjb25zb2xlLmxvZygnZXJyJyk7DQogICAgICB9DQogICAgfSwNCiAgICAvKuWwhuaji+WtkOWtl+espui9rOaIkOWvueW6lOeahOaVtOaVsCovDQogICAgRkVOQ2hhclRvTnVtKGl0ZW0pIHsvL+Wwhuaji+WtkOWtl+espui9rOaIkOWvueW6lOeahOaVtOaVsA0KICAgICAgc3dpdGNoIChpdGVtKSB7DQogICAgICAgIGNhc2UgJ0snIDogew0KICAgICAgICAgIHJldHVybiA4Ow0KICAgICAgICB9DQogICAgICAgIGNhc2UgJ0EnOg0KICAgICAgICAgIHJldHVybiA5Ow0KICAgICAgICBjYXNlICdCJzoNCiAgICAgICAgICByZXR1cm4gMTA7DQogICAgICAgIGNhc2UgJ04nOg0KICAgICAgICAgIHJldHVybiAxMTsNCiAgICAgICAgY2FzZSAnUic6DQogICAgICAgICAgcmV0dXJuIDEyOw0KICAgICAgICBjYXNlICdDJzoNCiAgICAgICAgICByZXR1cm4gMTM7DQogICAgICAgIGNhc2UgJ1AnOg0KICAgICAgICAgIHJldHVybiAxNDsNCg0KICAgICAgICBjYXNlICdrJzoNCiAgICAgICAgICByZXR1cm4gMTY7DQogICAgICAgIGNhc2UgJ2EnOg0KICAgICAgICAgIHJldHVybiAxNzsNCiAgICAgICAgY2FzZSAnYic6DQogICAgICAgICAgcmV0dXJuIDE4Ow0KICAgICAgICBjYXNlICduJzoNCiAgICAgICAgICByZXR1cm4gMTk7DQogICAgICAgIGNhc2UgJ3InOg0KICAgICAgICAgIHJldHVybiAyMDsNCiAgICAgICAgY2FzZSAnYyc6DQogICAgICAgICAgcmV0dXJuIDIxOw0KICAgICAgICBjYXNlICdwJzoNCiAgICAgICAgICByZXR1cm4gMjI7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgcmV0dXJuICdlcnInDQogICAgICB9DQogICAgfSwNCiAgICAvKuagueaNruWtl+espu+8jOi/lOWbnuWbvueJh+aWh+S7tuWQjSjnmoTlhbPplK7kv6Hmga8pKi8NCiAgICBGRU5DaGFyVG9JbWcoY2gpIHsNCiAgICAgIHN3aXRjaCAoY2gpIHsNCiAgICAgICAgY2FzZSAnSycgOiB7DQogICAgICAgICAgcmV0dXJuICdLJzsNCiAgICAgICAgfQ0KICAgICAgICBjYXNlICdBJzoNCiAgICAgICAgICByZXR1cm4gJ0EnOw0KICAgICAgICBjYXNlICdCJzoNCiAgICAgICAgICByZXR1cm4gJ0InOw0KICAgICAgICBjYXNlICdOJzoNCiAgICAgICAgICByZXR1cm4gJ04nOw0KICAgICAgICBjYXNlICdSJzoNCiAgICAgICAgICByZXR1cm4gJ1InOw0KICAgICAgICBjYXNlICdDJzoNCiAgICAgICAgICByZXR1cm4gJ0MnOw0KICAgICAgICBjYXNlICdQJzoNCiAgICAgICAgICByZXR1cm4gJ1AnOw0KDQogICAgICAgIGNhc2UgJ2snOg0KICAgICAgICAgIHJldHVybiAna18nOw0KICAgICAgICBjYXNlICdhJzoNCiAgICAgICAgICByZXR1cm4gJ2FfJzsNCiAgICAgICAgY2FzZSAnYic6DQogICAgICAgICAgcmV0dXJuICdiXyc7DQogICAgICAgIGNhc2UgJ24nOg0KICAgICAgICAgIHJldHVybiAnbl8nOw0KICAgICAgICBjYXNlICdyJzoNCiAgICAgICAgICByZXR1cm4gJ3JfJzsNCiAgICAgICAgY2FzZSAnYyc6DQogICAgICAgICAgcmV0dXJuICdjXyc7DQogICAgICAgIGNhc2UgJ3AnOg0KICAgICAgICAgIHJldHVybiAncF8nOw0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgIHJldHVybiAnZXJyJw0KICAgICAgfQ0KICAgIH0sDQogICAgLyrmoLnmja7mo4vlrZDlm77niYfmlofku7blkI3vvIzov5Tlm57mo4vlrZDkuK3mloflrZfnrKbkuLIqLw0KICAgIEltZ05hbWVUb0NoZXNzTmFtZShpbWdOYW1lKSB7DQogICAgICBzd2l0Y2ggKGltZ05hbWUpIHsNCiAgICAgICAgY2FzZSAnSycgOiB7DQogICAgICAgICAgcmV0dXJuICfnuqLmlrlf5biFJzsNCiAgICAgICAgfQ0KICAgICAgICBjYXNlICdBJzoNCiAgICAgICAgICByZXR1cm4gJ+e6ouaWuV/lo6snOw0KICAgICAgICBjYXNlICdCJzoNCiAgICAgICAgICByZXR1cm4gJ+e6ouaWuV/nm7gnOw0KICAgICAgICBjYXNlICdOJzoNCiAgICAgICAgICByZXR1cm4gJ+e6ouaWuV/pqawnOw0KICAgICAgICBjYXNlICdSJzoNCiAgICAgICAgICByZXR1cm4gJ+e6ouaWuV/ovaYnOw0KICAgICAgICBjYXNlICdDJzoNCiAgICAgICAgICByZXR1cm4gJ+e6ouaWuV/ngq4nOw0KICAgICAgICBjYXNlICdQJzoNCiAgICAgICAgICByZXR1cm4gJ+e6ouaWuV/lhbUnOw0KDQogICAgICAgIGNhc2UgJ2snOg0KICAgICAgICAgIHJldHVybiAn6buR5pa5X+Wwhic7DQogICAgICAgIGNhc2UgJ2EnOg0KICAgICAgICAgIHJldHVybiAn6buR5pa5X+S7lSc7DQogICAgICAgIGNhc2UgJ2InOg0KICAgICAgICAgIHJldHVybiAn6buR5pa5X+ixoSc7DQogICAgICAgIGNhc2UgJ24nOg0KICAgICAgICAgIHJldHVybiAn6buR5pa5X+mprCc7DQogICAgICAgIGNhc2UgJ3InOg0KICAgICAgICAgIHJldHVybiAn6buR5pa5X+i9pic7DQogICAgICAgIGNhc2UgJ2MnOg0KICAgICAgICAgIHJldHVybiAn6buR5pa5X+eCric7DQogICAgICAgIGNhc2UgJ3AnOg0KICAgICAgICAgIHJldHVybiAn6buR5pa5X+WNkic7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgcmV0dXJuICfnqbonDQogICAgICB9DQogICAgfSwNCiAgICAvKuagueaNrkZFTuS4sue7mOWItuaji+ebmCovDQogICAgZHJhd1dpdGhGRU4oRkVOKSB7DQogICAgICB0aGlzLkZFTkFycmF5ID0gW10NCiAgICAgIHRoaXMuRkVOQXJyYXkgPSBGRU4uc3BsaXQoJycpDQogICAgICB0aGlzLmRpc3BsYXlDaGVzc1RlbXAgPSBbXQ0KICAgICAgdGhpcy5GRU50b0JvYXJkKHRoaXMuRkVOQXJyYXkpDQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRpc3BsYXlDaGVzc1RlbXApOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykgey8v5bCG5qOL55uY5aSW5YWD57Sg6K6+572u5Li6bnVsbA0KICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoaSkpIHsNCiAgICAgICAgICB0aGlzLmRpc3BsYXlDaGVzc1RlbXBbaV0gPSBudWxsDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGxldCBzdGFydCA9IHRoaXMuQ09PUkRfWFkoMywgMykgLy81MSzlvqrnjq/lvIDlp4vlpIQNCiAgICAgIGxldCBlbmQgPSB0aGlzLkNPT1JEX1hZKDExLCAxMikgLy8yMDPvvIzlvqrnjq/nu5PmnZ/lpIQNCiAgICAgIC8vIHRoaXMuaW1nRG9tQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmltZ0JveCBpbWcnKQ0KICAgICAgLyp0YWfnlKjkvZzorrDlvZXmlofku7blkI3lhbPplK7kv6Hmga/vvJsNCiAgICAgICoqcm935piv5b2T5YmN5b6q546v57Si5byV5YC8aeWvueW6lOeahOS6jOe7tOWdkOagh+eahOihjOaVsCxjb2zmmK/liJfmlbDvvJsNCiAgICAgICoqaW1nSW5kZXjnlKjkuo7orrDlvZVp5a+55bqU56ys5Yeg5Liq5Zu+54mHKi8NCiAgICAgIGxldCB0YWcgPSAnJywgcm93ID0gMCwgaW1nSW5kZXggPSAwLCBjb2wgPSAwOw0KICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7DQogICAgICAgIGlmICh0aGlzLklOX0JPQVJEKGkpKSB7DQogICAgICAgICAgc3dpdGNoICh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbaV0pIHsNCiAgICAgICAgICAgIGNhc2UgODoNCiAgICAgICAgICAgICAgdGFnID0gJ0snOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgOToNCiAgICAgICAgICAgICAgdGFnID0gJ0EnOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTA6DQogICAgICAgICAgICAgIHRhZyA9ICdCJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDExOg0KICAgICAgICAgICAgICB0YWcgPSAnTic7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxMjoNCiAgICAgICAgICAgICAgdGFnID0gJ1InOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTM6DQogICAgICAgICAgICAgIHRhZyA9ICdDJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDE0Og0KICAgICAgICAgICAgICB0YWcgPSAnUCc7DQogICAgICAgICAgICAgIGJyZWFrOw0KDQogICAgICAgICAgICBjYXNlIDE2Og0KICAgICAgICAgICAgICB0YWcgPSAna18nOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTc6DQogICAgICAgICAgICAgIHRhZyA9ICdhXyc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxODoNCiAgICAgICAgICAgICAgdGFnID0gJ2JfJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDE5Og0KICAgICAgICAgICAgICB0YWcgPSAnbl8nOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMjA6DQogICAgICAgICAgICAgIHRhZyA9ICdyXyc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAyMToNCiAgICAgICAgICAgICAgdGFnID0gJ2NfJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDIyOg0KICAgICAgICAgICAgICB0YWcgPSAncF8nOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMToNCiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMDoNCiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnDQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnDQogICAgICAgICAgfQ0KICAgICAgICAgIHJvdyA9IHRoaXMuUkFOS19ZKGkpDQogICAgICAgICAgY29sID0gdGhpcy5GSUxFX1goaSkNCiAgICAgICAgICBpbWdJbmRleCA9IGkgLSA3ICogcm93IC0gMzANCiAgICAgICAgICBsZXQgaW1nU3JjU3RyID0gYC9pbWcvY2hlc3MvJHt0YWd9LnBuZ2A7DQogICAgICAgICAgdGhpcy5pbWdEb21BcnJbaW1nSW5kZXhdLnNyYyA9IGltZ1NyY1N0ciAvLyDph43mlrDmuLLmn5Pmo4vlrZDlm77niYcNCiAgICAgICAgICAvKua4heepuuWPmOmHjyovDQogICAgICAgICAgdGFnID0gJyc7DQogICAgICAgICAgcm93ID0gMDsNCiAgICAgICAgICBpbWdJbmRleCA9IDANCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgfSwNCiAgICAvKuagueaNrmRpc3BsYXlDaGVzc1RlbXDph43mlrDnu5jliLblsYDpnaIqLw0KICAgIGRyYXdXaXRoU3EoKSB7DQogICAgICB0aGlzLiRlbWl0KCdib2FyZC11cGRhdGUnLHRoaXMuZGlzcGxheUNoZXNzVGVtcCkNCiAgICAgIGxldCBzdGFydCA9IHRoaXMuQ09PUkRfWFkoMywgMykgLy81MSzlvqrnjq/lvIDlp4vlpIQNCiAgICAgIGxldCBlbmQgPSB0aGlzLkNPT1JEX1hZKDExLCAxMikgLy8yMDPvvIzlvqrnjq/nu5PmnZ/lpIQNCiAgICAgIC8vIHRoaXMuaW1nRG9tQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmltZ0JveCBpbWcnKQ0KICAgICAgLyp0YWfnlKjkvZzorrDlvZXmlofku7blkI3lhbPplK7kv6Hmga/vvJsNCiAgICAgICoqcm935piv5b2T5YmN5b6q546v57Si5byV5YC8aeWvueW6lOeahOS6jOe7tOWdkOagh+eahOihjOaVsCxjb2zmmK/liJfmlbDvvJsNCiAgICAgICoqaW1nSW5kZXjnlKjkuo7orrDlvZVp5a+55bqU56ys5Yeg5Liq5Zu+54mHKi8NCiAgICAgIGxldCB0YWcgPSAnJywgcm93ID0gMCwgaW1nSW5kZXggPSAwLCBjb2wgPSAwOw0KICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7DQogICAgICAgIGlmICh0aGlzLklOX0JPQVJEKGkpKSB7DQogICAgICAgICAgc3dpdGNoICh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbaV0pIHsNCiAgICAgICAgICAgIGNhc2UgODoNCiAgICAgICAgICAgICAgdGFnID0gJ0snOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgOToNCiAgICAgICAgICAgICAgdGFnID0gJ0EnOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTA6DQogICAgICAgICAgICAgIHRhZyA9ICdCJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDExOg0KICAgICAgICAgICAgICB0YWcgPSAnTic7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxMjoNCiAgICAgICAgICAgICAgdGFnID0gJ1InOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTM6DQogICAgICAgICAgICAgIHRhZyA9ICdDJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDE0Og0KICAgICAgICAgICAgICB0YWcgPSAnUCc7DQogICAgICAgICAgICAgIGJyZWFrOw0KDQogICAgICAgICAgICBjYXNlIDE2Og0KICAgICAgICAgICAgICB0YWcgPSAna18nOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMTc6DQogICAgICAgICAgICAgIHRhZyA9ICdhXyc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxODoNCiAgICAgICAgICAgICAgdGFnID0gJ2JfJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDE5Og0KICAgICAgICAgICAgICB0YWcgPSAnbl8nOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMjA6DQogICAgICAgICAgICAgIHRhZyA9ICdyXyc7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAyMToNCiAgICAgICAgICAgICAgdGFnID0gJ2NfJzsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDIyOg0KICAgICAgICAgICAgICB0YWcgPSAncF8nOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMToNCiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMDoNCiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnDQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnDQogICAgICAgICAgfQ0KICAgICAgICAgIHJvdyA9IHRoaXMuUkFOS19ZKGkpDQogICAgICAgICAgY29sID0gdGhpcy5GSUxFX1goaSkNCiAgICAgICAgICBpbWdJbmRleCA9IGkgLSA3ICogcm93IC0gMzANCiAgICAgICAgICBsZXQgaW1nU3JjU3RyID0gYC9pbWcvY2hlc3MvJHt0YWd9LnBuZ2A7DQogICAgICAgICAgdGhpcy5pbWdEb21BcnJbaW1nSW5kZXhdLnNyYyA9IGltZ1NyY1N0ciAvLyDph43mlrDmuLLmn5Pmo4vlrZDlm77niYcNCiAgICAgICAgICAvKua4heepuuWPmOmHjyovDQogICAgICAgICAgdGFnID0gJyc7DQogICAgICAgICAgcm93ID0gMDsNCiAgICAgICAgICBpbWdJbmRleCA9IDANCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLyrlsIbnrKzlh6DkuKrlm77niYfmoIfnrb7ovazmjaLkuLpzcSovDQogICAgaW1nSW5kZXhUb1NxKGltZ0luZGV4KSB7DQogICAgICBsZXQgcm93ID0gTWF0aC5mbG9vcigoaW1nSW5kZXggLSAxKSAvIDkpICsgMw0KICAgICAgcmV0dXJuIGltZ0luZGV4ICsgMzAgKyA3ICogcm93IC0gMQ0KICAgICAgLy8gY29uc29sZS5sb2coJ3NxOicgKyBzcSk7DQogICAgfSwNCiAgICAvKuWmguaenOS7jui1t+eCuXNxU3Jj5Yiw57uI54K5c3FEc3TmsqHmnInov4fmsrPvvIzliJnov5Tlm550cnVl77yb5ZCm5YiZ6L+U5ZueZmFsc2UqLw0KICAgIFNBTUVfSEFMRihzcVNyYywgc3FEc3QpIHsvLyDlpoLmnpzku47otbfngrlzcVNyY+WIsOe7iOeCuXNxRHN05rKh5pyJ6L+H5rKz77yM5YiZ6L+U5ZuedHJ1Ze+8m+WQpuWImei/lOWbnmZhbHNlDQogICAgICByZXR1cm4gKChzcVNyYyBeIHNxRHN0KSAmIDB4ODApID09PSAwOw0KICAgIH0sDQogICAgc3VyZUlucHV0KCkgew0KICAgICAgbGV0IG5ld0ZFTiA9IHRoaXMudXNlcklucHV0DQogICAgICB0aGlzLmRyYXdXaXRoRkVOKG5ld0ZFTikNCiAgICB9LA0KICAgIHRlc3QyKCkgew0KICAgICAgbGV0IG5ld0ZFTiA9ICcxbjFha2FibnIvcjgvOS85LzkvOS9QMVAxUDFQMVAvMUM1QzEvOS9STkJBS0FCTlInDQogICAgICB0aGlzLmRyYXdXaXRoRkVOKG5ld0ZFTikNCiAgICB9LA0KICAgIGJ0bkNsaWNrMigpIHsNCiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hdWRpb0J4IGxpID4gYXVkaW8nKS5mb3JFYWNoKChlKSA9PiB7DQogICAgICAgIGUucGxheSgpDQogICAgICB9KQ0KICAgIH0sDQogICAgY2hlc3MxQ2xpY2soaW5mbykgew0KICAgICAgLy8gY29uc29sZS5sb2coaW5mbyk7DQogICAgICB0aGlzLiRlbWl0KCdzaG93JywgaW5mbykNCiAgICB9DQogIH0sDQp9DQo="},{"version":3,"sources":["Chess1.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Chess1.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"chessBoard\">\r\n      <div class=\"imgBox myImgBox\" v-for=\"(item,index) in 90\">\r\n        <img :src=\"$withBase(`/img/chess/K_.png`)\"\r\n             :id=\"`pos${index}`\" alt=\"一个棋子\"\r\n             :key=\"index\">\r\n      </div>\r\n      <div class=\"myFontBox\">\r\n        <div class=\"css2ebd673af7243b7\">楚河</div>\r\n        <div class=\"css2ebd673af7243b7\">汉界</div>\r\n      </div>\r\n    </div>\r\n    <ul class=\"audioBx\" style=\"display: none\">\r\n      <li><audio id=\"skill1\" :src=\"$withBase(`/music/兵线刷新.mp3`)\"></audio></li>\r\n      <li><audio id=\"skill2\" :src=\"$withBase(`/music/替父从军.mp3`)\"></audio></li>\r\n      <li><audio id=\"skill3\" :src=\"$withBase(`/music/草木皆兵.mp3`)\"></audio></li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from 'jquery'\r\n\r\nexport default {\r\n  name: \"Chess\",\r\n  props: {\r\n    displayChess: {\r\n      type: Array,\r\n      default: [\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,//3\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,//12\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n      ],\r\n    },\r\n    playerSide: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    isSelectMachine: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      test: [],\r\n      IN_BOARD_: [\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n      ],\r\n      IN_FORT_: [//辅助数组，标识是否在九宫内\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n      ],\r\n      displayChessTemp: [\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,//3\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,\r\n        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,//12\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n      ],\r\n      FEN: 'rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR',\r\n      FENArray: [],\r\n      userInputFEN: '',\r\n      userInput: '',\r\n      sqSelected: 0,//鼠标是否选中一棋子\r\n      currentChess: '',//当前选中的棋子，的首字母,\r\n      displayChess_Old: [],\r\n      isHaveK_w: false,\r\n      isHaveK_b: false,\r\n    }\r\n  },\r\n  computed: {\r\n    imgDomArr() {\r\n      return document.querySelectorAll('div.imgBox img')\r\n    },\r\n  },\r\n  watch: {\r\n    displayChess: {\r\n      handler(val, oldVal) {\r\n        if(val === undefined) return\r\n        this.displayChess_Old = oldVal.map((item) => {return item})\r\n        this.displayChessTemp = val.map(item => {return item})\r\n        this.drawWithSq()//绘制棋盘\r\n      },\r\n      // deep: true\r\n    },\r\n    async playerSide(newVal,oldVal) {\r\n      if(!newVal && this.isSelectMachine) {//表示黑方走棋且选择了人机对战\r\n        let skill = await this.machine_passiveSkills()\r\n        if(skill === 1) {\r\n          this.$message.warning('触发被动技能：兵线刷新')\r\n        }\r\n        else if(skill === 2) {\r\n          this.$message.warning('触发被动技能：替父从军')\r\n        }\r\n        else if(skill === 3) {\r\n          this.$message.warning('触发被动技能：草木皆兵')\r\n        }\r\n        else if(skill === 0) {\r\n          // let dom1 = $('#pos8')\r\n          let domArr = this.machine_getPcToBeMoved().map(e => {return e})\r\n          let dom1 = domArr[0]\r\n          // let dom2 = this.machine_getSteps(dom1)[0]\r\n          // let dom2 = this.machine_getExactStep(dom1)\r\n          let dom2 = domArr[1]\r\n          this.$message.success('电脑移动了' + this.ImgNameToChessName(dom1.attr('src').slice(11,12)))\r\n\r\n          this.machineMove(dom1,dom2)\r\n          // console.log(dom1);\r\n          // console.log(dom2);\r\n          // console.log(this.machine_getSteps(dom1));\r\n        }\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    // const css = document.createElement('link');\r\n    // css.rel = 'stylesheet';\r\n    // css.href = 'https://cdn.repository.webfont.com/webfonts/nomal/148407/46489/625407aaf629d81300ac19b3.css';\r\n    // document.body.appendChild(css);\r\n\r\n    this.initBoard()\r\n    /*每个img绑定一个点击事件*/\r\n    document.querySelectorAll('div.imgBox img').forEach((e, index) => {\r\n      e.addEventListener('mousedown', (e, index) => {\r\n        let fileName = e.target.src.slice(32, 33)\r\n        // console.log(fileName);\r\n        let alertStr = this.ImgNameToChessName(fileName)\r\n\r\n        let imgIndex = parseInt(e.target.id.slice(3)) + 1\r\n        // console.log(imgIndex);\r\n        // console.log(this.displayChessTemp);\r\n        let chessInfo = {//棋子的一些信息\r\n          displayChess: this.displayChessTemp,\r\n          fileName: fileName,\r\n          imgIndex: imgIndex,\r\n          sqSelected: this.imgIndexToSq(imgIndex)\r\n        }\r\n\r\n        this.chess1Click(chessInfo)\r\n\r\n        /*用户每次点击棋子应该将该棋子储存到当前棋子currentChess*/\r\n        // this.currentChess = fileName\r\n        // if(this.sqSelected) {\r\n        //   if(this.currentChess != 'U') {\r\n        //     console.log('上次点击的是空白处');\r\n        //   }\r\n        // }\r\n      })\r\n    })\r\n\r\n  },\r\n  methods: {\r\n    /*电脑走棋\r\n    * dom:电脑操控模拟鼠标点击处的dom对象(实际上是调用了chess1Click函数，没有点击)\r\n    * 1代表起点，2代表终点\r\n    * 实现效果为棋子移动\r\n    * */\r\n    machineMove(dom1,dom2){\r\n      let fileName1 = dom1.attr('src').slice(11, 12)\r\n      let imgIndex1 = parseInt(dom1.attr('id').slice(3)) + 1\r\n      let chessInfo1 = {//棋子的一些信息\r\n        displayChess: this.displayChessTemp,\r\n        fileName: fileName1,\r\n        imgIndex: imgIndex1,\r\n        sqSelected: this.imgIndexToSq(imgIndex1)\r\n      }\r\n      this.chess1Click(chessInfo1)//相当于鼠标点击了pos0车的位置\r\n\r\n      setTimeout(() => {\r\n        let fileName2 = dom2.attr('src').slice(11, 12)\r\n        let imgIndex2 = parseInt(dom2.attr('id').slice(3)) + 1\r\n        let chessInfo2 = {//棋子的一些信息\r\n          displayChess: this.displayChessTemp,\r\n          fileName: fileName2,\r\n          imgIndex: imgIndex2,\r\n          sqSelected: this.imgIndexToSq(imgIndex2)\r\n        }\r\n        this.chess1Click(chessInfo2)\r\n      },500)\r\n\r\n    },\r\n    /*根据输入的棋子dom对象，返回该棋子所有可能的下一步走法（array型，但数组元素为dom对象）*/\r\n    machine_getSteps(dom, arr) {\r\n      // console.log(arr);\r\n      if(arr !== undefined) {\r\n        let step = []\r\n        let fileName = dom.attr('src').slice(11, 12)\r\n        let sqSrc = this.imgIndexToSq(parseInt(dom.attr('id').slice(3)) + 1)//获取一维坐标\r\n        switch (fileName) {\r\n          case 'k': {\r\n            let KING_DELTA= [-16, -1, 1, 16];\r\n            for (let i in KING_DELTA) {// 将的4个方向\r\n              let sqDst = sqSrc + KING_DELTA[i]; // 得到一个可能的终点位置\r\n              if(!this.IN_BOARD(sqDst)) {//终点处不在棋盘内\r\n                continue\r\n              }\r\n              if(arr[sqDst] < 16 && this.IN_FORT(sqDst)) {\r\n                //终点处没有棋子没有本方（黑方）棋子，且终点在九宫格内\r\n                let row = this.RANK_Y(sqDst)\r\n                let imgIndex = sqDst - 7*row -29 - 1\r\n                let domTemp =  $('#pos' + imgIndex)\r\n                step.push(domTemp)\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'a': {\r\n            let ADVISOR_DELTA = [-15, -17, 17, 15];\r\n            for(let i in ADVISOR_DELTA) {\r\n              let sqDst = sqSrc + ADVISOR_DELTA[i]; // 得到一个可能的终点位置\r\n              if(!this.IN_BOARD(sqDst) ) {//终点处不在棋盘内，或不在九宫格内\r\n                continue\r\n              }\r\n              if(arr[sqDst] < 16 && this.IN_FORT(sqDst)) {\r\n                //终点处没有棋子没有本方（黑方）棋子,且终点在九宫格内\r\n                let row = this.RANK_Y(sqDst)\r\n                let imgIndex = sqDst - 7*row -29 - 1\r\n                let domTemp =  $('#pos' + imgIndex)\r\n                step.push(domTemp)\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'b': {\r\n            let BISHOP_DELTA = [-34, -30, 30, 34];\r\n            for(let i in BISHOP_DELTA) {\r\n              let sqDst = sqSrc + BISHOP_DELTA[i]; // 得到一个可能的终点位置\r\n              if(!this.IN_BOARD(sqDst) || !this.SAME_HALF(sqSrc,sqDst)\r\n                  || arr[(sqSrc+sqDst)/2] > 1) {\r\n                //终点处不在棋盘内,或过河,或象眼无棋子\r\n                continue\r\n              }\r\n              if(arr[sqDst] < 16) {\r\n                //终点处没有棋子没有本方（黑方）棋子\r\n                let row = this.RANK_Y(sqDst)\r\n                let imgIndex = sqDst - 7*row -29 - 1\r\n                let domTemp =  $('#pos' + imgIndex)\r\n                step.push(domTemp)\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'n': {\r\n            let KING_DELTA= [-16, -1, 1, 16];\r\n            let KNIGHT_DELTA = [[-33, -31], [-18, 14], [-14, 18], [31, 33]];\r\n            for(let i in KNIGHT_DELTA) {// 马腿的4个方向\r\n              let sqDst = sqSrc + KING_DELTA[i]; // 得到一个马腿的位置\r\n              if(arr[sqDst] > 1) {\r\n                //马脚处有棋子\r\n                continue\r\n              }\r\n              for (let j = 0; j < 2; j ++) { // 1个马腿对应2个马的方向\r\n                sqDst = sqSrc + KNIGHT_DELTA[i][j]; // 得到一个马的可能的终点位置\r\n                if (!this.IN_BOARD(sqDst)) {\r\n                  continue;\r\n                }\r\n                if(arr[sqDst] < 16) {\r\n                  //终点处没有棋子没有本方（黑方）棋子\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row -29 - 1\r\n                  let domTemp =  $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                }\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'r': {\r\n            let KING_DELTA= [-16, -1, 1, 16];\r\n            for (let i = 0; i < 4; i ++) {\r\n              let delta = KING_DELTA[i];    // 得到一个方向\r\n              let sqDst = sqSrc + delta;    // 从起点sqSrc开始，沿着方向delta走一步\r\n              while (this.IN_BOARD(sqDst)) {\r\n                //在棋盘上\r\n                if(arr[sqDst] < 16) {\r\n                  //终点处没有棋子没有本方（黑方）棋子,或有红方棋子\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row -29 - 1\r\n                  let domTemp =  $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                  if(arr[sqDst] >= 8) {\r\n                    //终点处有对方（红方）棋子\r\n                    break\r\n                  }\r\n                }\r\n                else break\r\n                sqDst += delta;     // 沿着方向delta向前走一步\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'c': {\r\n            let KING_DELTA= [-16, -1, 1, 16];\r\n            for (let i = 0; i < 4; i ++) {\r\n              let delta = KING_DELTA[i];    // 得到一个方向\r\n              let sqDst = sqSrc + delta;    // 从起点sqSrc开始，沿着方向delta走一步\r\n              while (this.IN_BOARD(sqDst)) {\r\n                if(arr[sqDst] === 1) {\r\n                  //终点处没有棋子\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row -29 - 1\r\n                  let domTemp =  $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                }\r\n                else {            // 终点存在棋子，炮需要翻山\r\n                  break;\r\n                }\r\n                sqDst += delta;     // 沿着方向delta向前走一步\r\n              }\r\n              sqDst += delta;       // 沿着方向delta向前走一步\r\n              while (this.IN_BOARD(sqDst)) { // 如果sqDst仍位于棋盘，那么此时炮已经翻山了\r\n                if(arr[sqDst] >= 8 && arr[sqDst] < 16) {\r\n                  //终点处是红方棋子\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row - 29 - 1\r\n                  let domTemp = $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                  break\r\n                }\r\n                sqDst += delta;\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'p': {\r\n            let PAWN_delta = [16,1,-1] //兵一开始只能向下走,过河后可向左/右走\r\n            let sqDst = sqSrc + PAWN_delta[0]\r\n            if(arr[sqDst] < 16) {//终点处不是黑方棋子\r\n              let row = this.RANK_Y(sqDst)\r\n              let imgIndex = sqDst - 7*row -29 - 1\r\n              let domTemp =  $('#pos' + imgIndex)\r\n              step.push(domTemp)\r\n            }\r\n            //若兵过河了(此处的131是经过计算得到的过河临界值，且终点在棋盘内\r\n            if(sqSrc >= this.domToSq($('#pos45'))) {\r\n              for (let i = 0; i < 2; i++) {\r\n                sqDst = sqSrc + PAWN_delta[i+1]\r\n                if(!this.IN_BOARD(sqDst)) break\r\n                if(arr[sqDst] < 16) {\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row -29 - 1\r\n                  let domTemp =  $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                }\r\n              }\r\n            }\r\n            break\r\n          }\r\n\r\n          case 'K': {\r\n            let KING_DELTA= [-16, -1, 1, 16];\r\n            for (let i in KING_DELTA) {// 将的4个方向\r\n              let sqDst = sqSrc + KING_DELTA[i]; // 得到一个可能的终点位置\r\n              if(!this.IN_BOARD(sqDst)) {//终点处不在棋盘内\r\n                continue\r\n              }\r\n              if(!(arr[sqDst] & 8) && this.IN_FORT(sqDst)) {\r\n                //终点处没有棋子没有本方（红方）棋子，且终点在九宫格内\r\n                let row = this.RANK_Y(sqDst)\r\n                let imgIndex = sqDst - 7*row -29 - 1\r\n                let domTemp =  $('#pos' + imgIndex)\r\n                step.push(domTemp)\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'A': {\r\n            let ADVISOR_DELTA = [-15, -17, 17, 15];\r\n            for(let i in ADVISOR_DELTA) {\r\n              let sqDst = sqSrc + ADVISOR_DELTA[i]; // 得到一个可能的终点位置\r\n              if(!this.IN_BOARD(sqDst) ) {//终点处不在棋盘内，或不在九宫格内\r\n                continue\r\n              }\r\n              if(!(arr[sqDst] & 8) && this.IN_FORT(sqDst)) {\r\n                //终点处没有棋子没有本方（红方）棋子,且终点在九宫格内\r\n                let row = this.RANK_Y(sqDst)\r\n                let imgIndex = sqDst - 7*row -29 - 1\r\n                let domTemp =  $('#pos' + imgIndex)\r\n                step.push(domTemp)\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'B': {\r\n            let BISHOP_DELTA = [-34, -30, 30, 34];\r\n            for(let i in BISHOP_DELTA) {\r\n              let sqDst = sqSrc + BISHOP_DELTA[i]; // 得到一个可能的终点位置\r\n              if(!this.IN_BOARD(sqDst) || !this.SAME_HALF(sqSrc,sqDst)\r\n                  || arr[(sqSrc+sqDst)/2] > 1) {\r\n                //终点处不在棋盘内,或过河,或象眼无棋子\r\n                continue\r\n              }\r\n              if(!(arr[sqDst] & 8)) {\r\n                //终点处没有棋子没有本方（红方）棋子\r\n                let row = this.RANK_Y(sqDst)\r\n                let imgIndex = sqDst - 7*row -29 - 1\r\n                let domTemp =  $('#pos' + imgIndex)\r\n                step.push(domTemp)\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'N': {\r\n            let KING_DELTA= [-16, -1, 1, 16];\r\n            let KNIGHT_DELTA = [[-33, -31], [-18, 14], [-14, 18], [31, 33]];\r\n            for(let i in KNIGHT_DELTA) {// 马腿的4个方向\r\n              let sqDst = sqSrc + KING_DELTA[i]; // 得到一个马腿的位置\r\n              if(arr[sqDst] > 1) {\r\n                //马脚处有棋子\r\n                continue\r\n              }\r\n              for (let j = 0; j < 2; j ++) { // 1个马腿对应2个马的方向\r\n                sqDst = sqSrc + KNIGHT_DELTA[i][j]; // 得到一个马的可能的终点位置\r\n                if (!this.IN_BOARD(sqDst)) {\r\n                  continue;\r\n                }\r\n                if(!(arr[sqDst] & 8)) {\r\n                  //终点处没有棋子没有本方（红方）棋子\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row -29 - 1\r\n                  let domTemp =  $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                }\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'R': {\r\n            let KING_DELTA= [-16, -1, 1, 16];\r\n            for (let i = 0; i < 4; i ++) {\r\n              let delta = KING_DELTA[i];    // 得到一个方向\r\n              let sqDst = sqSrc + delta;    // 从起点sqSrc开始，沿着方向delta走一步\r\n              while (this.IN_BOARD(sqDst)) {\r\n                //在棋盘上\r\n                if(!(arr[sqDst] & 8)) {\r\n                  //终点处没有棋子没有本方（红方）棋子,或有红方棋子\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row -29 - 1\r\n                  let domTemp =  $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                  if(arr[sqDst] & 16) {\r\n                    //终点处有对方（黑方）棋子\r\n                    break\r\n                  }\r\n                }\r\n                else break\r\n                sqDst += delta;     // 沿着方向delta向前走一步\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'C': {\r\n            let KING_DELTA= [-16, -1, 1, 16];\r\n            for (let i = 0; i < 4; i ++) {\r\n              let delta = KING_DELTA[i];    // 得到一个方向\r\n              let sqDst = sqSrc + delta;    // 从起点sqSrc开始，沿着方向delta走一步\r\n              while (this.IN_BOARD(sqDst)) {\r\n                if(arr[sqDst] === 1) {\r\n                  //终点处没有棋子\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row -29 - 1\r\n                  let domTemp =  $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                }\r\n                else {            // 终点存在棋子，炮需要翻山\r\n                  break;\r\n                }\r\n                sqDst += delta;     // 沿着方向delta向前走一步\r\n              }\r\n              sqDst += delta;       // 沿着方向delta向前走一步\r\n              while (this.IN_BOARD(sqDst)) { // 如果sqDst仍位于棋盘，那么此时炮已经翻山了\r\n                if(arr[sqDst] & 16) {\r\n                  //终点处是黑方棋子\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row - 29 - 1\r\n                  let domTemp = $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                  break\r\n                }\r\n                sqDst += delta;\r\n              }\r\n            }\r\n            break\r\n          }\r\n          case 'P': {\r\n            let PAWN_delta = [-16,1,-1] //兵一开始只能向上走,过河后可向左/右走\r\n            let sqDst = sqSrc + PAWN_delta[0]\r\n            if(!(arr[sqDst] & 8)) {//终点处不是红方棋子,则走法合法\r\n              let row = this.RANK_Y(sqDst)\r\n              let imgIndex = sqDst - 7*row -29 - 1\r\n              let domTemp =  $('#pos' + imgIndex)\r\n              step.push(domTemp)\r\n            }\r\n            //若兵过河了(此处的131是经过计算得到的过河临界值，且终点在棋盘内\r\n            if(sqSrc < 131 && this.IN_BOARD(sqDst)) {\r\n              for (let i = 0; i < 2; i++) {\r\n                sqDst = sqSrc + PAWN_delta[i+1]\r\n                if(!this.IN_BOARD(sqDst)) break\r\n                if(!(arr[sqDst] & 8)) {\r\n                  let row = this.RANK_Y(sqDst)\r\n                  let imgIndex = sqDst - 7*row -29 - 1\r\n                  let domTemp =  $('#pos' + imgIndex)\r\n                  step.push(domTemp)\r\n                }\r\n              }\r\n            }\r\n            break\r\n          }\r\n          default: step.push(null)\r\n        }\r\n        return step\r\n      }\r\n      else return 'ERROR'\r\n      // else {\r\n      //   let step = []\r\n      //   let fileName = dom.attr('src').slice(11, 12)\r\n      //   let sqSrc = this.imgIndexToSq(parseInt(dom.attr('id').slice(3)) + 1)//获取一维坐标\r\n      //   switch (fileName) {\r\n      //     case 'k': {\r\n      //       let KING_DELTA= [-16, -1, 1, 16];\r\n      //       for (let i in KING_DELTA) {// 将的4个方向\r\n      //         let sqDst = sqSrc + KING_DELTA[i]; // 得到一个可能的终点位置\r\n      //         if(!this.IN_BOARD(sqDst)) {//终点处不在棋盘内\r\n      //           continue\r\n      //         }\r\n      //         if(this.displayChessTemp[sqDst] < 16 && this.IN_FORT(sqDst)) {\r\n      //           //终点处没有棋子没有本方（黑方）棋子，且终点在九宫格内\r\n      //           let row = this.RANK_Y(sqDst)\r\n      //           let imgIndex = sqDst - 7*row -29 - 1\r\n      //           let domTemp =  $('#pos' + imgIndex)\r\n      //           step.push(domTemp)\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'a': {\r\n      //       let ADVISOR_DELTA = [-15, -17, 17, 15];\r\n      //       for(let i in ADVISOR_DELTA) {\r\n      //         let sqDst = sqSrc + ADVISOR_DELTA[i]; // 得到一个可能的终点位置\r\n      //         if(!this.IN_BOARD(sqDst) ) {//终点处不在棋盘内，或不在九宫格内\r\n      //           continue\r\n      //         }\r\n      //         if(this.displayChessTemp[sqDst] < 16 && this.IN_FORT(sqDst)) {\r\n      //           //终点处没有棋子没有本方（黑方）棋子,且终点在九宫格内\r\n      //           let row = this.RANK_Y(sqDst)\r\n      //           let imgIndex = sqDst - 7*row -29 - 1\r\n      //           let domTemp =  $('#pos' + imgIndex)\r\n      //           step.push(domTemp)\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'b': {\r\n      //       let BISHOP_DELTA = [-34, -30, 30, 34];\r\n      //       for(let i in BISHOP_DELTA) {\r\n      //         let sqDst = sqSrc + BISHOP_DELTA[i]; // 得到一个可能的终点位置\r\n      //         if(!this.IN_BOARD(sqDst) || !this.SAME_HALF(sqSrc,sqDst)\r\n      //             || this.displayChessTemp[(sqSrc+sqDst)/2] > 1) {\r\n      //           //终点处不在棋盘内,或过河,或象眼无棋子\r\n      //           continue\r\n      //         }\r\n      //         if(this.displayChessTemp[sqDst] < 16) {\r\n      //           //终点处没有棋子没有本方（黑方）棋子\r\n      //           let row = this.RANK_Y(sqDst)\r\n      //           let imgIndex = sqDst - 7*row -29 - 1\r\n      //           let domTemp =  $('#pos' + imgIndex)\r\n      //           step.push(domTemp)\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'n': {\r\n      //       let KING_DELTA= [-16, -1, 1, 16];\r\n      //       let KNIGHT_DELTA = [[-33, -31], [-18, 14], [-14, 18], [31, 33]];\r\n      //       for(let i in KNIGHT_DELTA) {// 马腿的4个方向\r\n      //         let sqDst = sqSrc + KING_DELTA[i]; // 得到一个马腿的位置\r\n      //         if(this.displayChessTemp[sqDst] > 1) {\r\n      //           //马脚处有棋子\r\n      //           continue\r\n      //         }\r\n      //         for (let j = 0; j < 2; j ++) { // 1个马腿对应2个马的方向\r\n      //           sqDst = sqSrc + KNIGHT_DELTA[i][j]; // 得到一个马的可能的终点位置\r\n      //           if (!this.IN_BOARD(sqDst)) {\r\n      //             continue;\r\n      //           }\r\n      //           if(this.displayChessTemp[sqDst] < 16) {\r\n      //             //终点处没有棋子没有本方（黑方）棋子\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row -29 - 1\r\n      //             let domTemp =  $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //           }\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'r': {\r\n      //       let KING_DELTA= [-16, -1, 1, 16];\r\n      //       for (let i = 0; i < 4; i ++) {\r\n      //         let delta = KING_DELTA[i];    // 得到一个方向\r\n      //         let sqDst = sqSrc + delta;    // 从起点sqSrc开始，沿着方向delta走一步\r\n      //         while (this.IN_BOARD(sqDst)) {\r\n      //           //在棋盘上\r\n      //           if(this.displayChessTemp[sqDst] < 16) {\r\n      //             //终点处没有棋子没有本方（黑方）棋子,或有红方棋子\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row -29 - 1\r\n      //             let domTemp =  $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //             if(this.displayChessTemp[sqDst] >= 8) {\r\n      //               //终点处有对方（红方）棋子\r\n      //               break\r\n      //             }\r\n      //           }\r\n      //           else break\r\n      //           sqDst += delta;     // 沿着方向delta向前走一步\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'c': {\r\n      //       let KING_DELTA= [-16, -1, 1, 16];\r\n      //       for (let i = 0; i < 4; i ++) {\r\n      //         let delta = KING_DELTA[i];    // 得到一个方向\r\n      //         let sqDst = sqSrc + delta;    // 从起点sqSrc开始，沿着方向delta走一步\r\n      //         while (this.IN_BOARD(sqDst)) {\r\n      //           if(this.displayChessTemp[sqDst] === 1) {\r\n      //             //终点处没有棋子\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row -29 - 1\r\n      //             let domTemp =  $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //           }\r\n      //           else {            // 终点存在棋子，炮需要翻山\r\n      //             break;\r\n      //           }\r\n      //           sqDst += delta;     // 沿着方向delta向前走一步\r\n      //         }\r\n      //         sqDst += delta;       // 沿着方向delta向前走一步\r\n      //         while (this.IN_BOARD(sqDst)) { // 如果sqDst仍位于棋盘，那么此时炮已经翻山了\r\n      //           if(this.displayChessTemp[sqDst] >= 8 && this.displayChessTemp[sqDst] < 16) {\r\n      //             //终点处是红方棋子\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row - 29 - 1\r\n      //             let domTemp = $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //             break\r\n      //           }\r\n      //           sqDst += delta;\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'p': {\r\n      //       let PAWN_delta = [16,1,-1] //兵一开始只能向下走,过河后可向左/右走\r\n      //       let sqDst = sqSrc + PAWN_delta[0]\r\n      //       if(this.displayChessTemp[sqDst] < 16) {//终点处不是黑方棋子\r\n      //         let row = this.RANK_Y(sqDst)\r\n      //         let imgIndex = sqDst - 7*row -29 - 1\r\n      //         let domTemp =  $('#pos' + imgIndex)\r\n      //         step.push(domTemp)\r\n      //       }\r\n      //       if(sqSrc >= 131 && this.IN_BOARD(sqDst)) {//若兵过河了(此处的131是经过计算得到的过河临界值\r\n      //         for (let i = 0; i < 2; i++) {\r\n      //           sqDst = sqSrc + PAWN_delta[i+1]\r\n      //           if(this.displayChessTemp[sqDst] < 16) {\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row -29 - 1\r\n      //             let domTemp =  $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //           }\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //\r\n      //     case 'K': {\r\n      //       let KING_DELTA= [-16, -1, 1, 16];\r\n      //       for (let i in KING_DELTA) {// 将的4个方向\r\n      //         let sqDst = sqSrc + KING_DELTA[i]; // 得到一个可能的终点位置\r\n      //         if(!this.IN_BOARD(sqDst)) {//终点处不在棋盘内\r\n      //           continue\r\n      //         }\r\n      //         if(!(this.displayChessTemp[sqDst] & 8) && this.IN_FORT(sqDst)) {\r\n      //           //终点处没有棋子没有本方（红方）棋子，且终点在九宫格内\r\n      //           let row = this.RANK_Y(sqDst)\r\n      //           let imgIndex = sqDst - 7*row -29 - 1\r\n      //           let domTemp =  $('#pos' + imgIndex)\r\n      //           step.push(domTemp)\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'A': {\r\n      //       let ADVISOR_DELTA = [-15, -17, 17, 15];\r\n      //       for(let i in ADVISOR_DELTA) {\r\n      //         let sqDst = sqSrc + ADVISOR_DELTA[i]; // 得到一个可能的终点位置\r\n      //         if(!this.IN_BOARD(sqDst) ) {//终点处不在棋盘内，或不在九宫格内\r\n      //           continue\r\n      //         }\r\n      //         if(!(this.displayChessTemp[sqDst] & 8) && this.IN_FORT(sqDst)) {\r\n      //           //终点处没有棋子没有本方（红方）棋子,且终点在九宫格内\r\n      //           let row = this.RANK_Y(sqDst)\r\n      //           let imgIndex = sqDst - 7*row -29 - 1\r\n      //           let domTemp =  $('#pos' + imgIndex)\r\n      //           step.push(domTemp)\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'B': {\r\n      //       let BISHOP_DELTA = [-34, -30, 30, 34];\r\n      //       for(let i in BISHOP_DELTA) {\r\n      //         let sqDst = sqSrc + BISHOP_DELTA[i]; // 得到一个可能的终点位置\r\n      //         if(!this.IN_BOARD(sqDst) || !this.SAME_HALF(sqSrc,sqDst)\r\n      //             || this.displayChessTemp[(sqSrc+sqDst)/2] > 1) {\r\n      //           //终点处不在棋盘内,或过河,或象眼无棋子\r\n      //           continue\r\n      //         }\r\n      //         if(!(this.displayChessTemp[sqDst] & 8)) {\r\n      //           //终点处没有棋子没有本方（红方）棋子\r\n      //           let row = this.RANK_Y(sqDst)\r\n      //           let imgIndex = sqDst - 7*row -29 - 1\r\n      //           let domTemp =  $('#pos' + imgIndex)\r\n      //           step.push(domTemp)\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'N': {\r\n      //       let KING_DELTA= [-16, -1, 1, 16];\r\n      //       let KNIGHT_DELTA = [[-33, -31], [-18, 14], [-14, 18], [31, 33]];\r\n      //       for(let i in KNIGHT_DELTA) {// 马腿的4个方向\r\n      //         let sqDst = sqSrc + KING_DELTA[i]; // 得到一个马腿的位置\r\n      //         if(this.displayChessTemp[sqDst] > 1) {\r\n      //           //马脚处有棋子\r\n      //           continue\r\n      //         }\r\n      //         for (let j = 0; j < 2; j ++) { // 1个马腿对应2个马的方向\r\n      //           sqDst = sqSrc + KNIGHT_DELTA[i][j]; // 得到一个马的可能的终点位置\r\n      //           if (!this.IN_BOARD(sqDst)) {\r\n      //             continue;\r\n      //           }\r\n      //           if(!(this.displayChessTemp[sqDst] & 8)) {\r\n      //             //终点处没有棋子没有本方（红方）棋子\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row -29 - 1\r\n      //             let domTemp =  $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //           }\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'R': {\r\n      //       let KING_DELTA= [-16, -1, 1, 16];\r\n      //       for (let i = 0; i < 4; i ++) {\r\n      //         let delta = KING_DELTA[i];    // 得到一个方向\r\n      //         let sqDst = sqSrc + delta;    // 从起点sqSrc开始，沿着方向delta走一步\r\n      //         while (this.IN_BOARD(sqDst)) {\r\n      //           //在棋盘上\r\n      //           if(!(this.displayChessTemp[sqDst] & 8)) {\r\n      //             //终点处没有棋子没有本方（红方）棋子,或有红方棋子\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row -29 - 1\r\n      //             let domTemp =  $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //             if(this.displayChessTemp[sqDst] & 16) {\r\n      //               //终点处有对方（黑方）棋子\r\n      //               break\r\n      //             }\r\n      //           }\r\n      //           else break\r\n      //           sqDst += delta;     // 沿着方向delta向前走一步\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'C': {\r\n      //       let KING_DELTA= [-16, -1, 1, 16];\r\n      //       for (let i = 0; i < 4; i ++) {\r\n      //         let delta = KING_DELTA[i];    // 得到一个方向\r\n      //         let sqDst = sqSrc + delta;    // 从起点sqSrc开始，沿着方向delta走一步\r\n      //         while (this.IN_BOARD(sqDst)) {\r\n      //           if(this.displayChessTemp[sqDst] === 1) {\r\n      //             //终点处没有棋子\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row -29 - 1\r\n      //             let domTemp =  $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //           }\r\n      //           else {            // 终点存在棋子，炮需要翻山\r\n      //             break;\r\n      //           }\r\n      //           sqDst += delta;     // 沿着方向delta向前走一步\r\n      //         }\r\n      //         sqDst += delta;       // 沿着方向delta向前走一步\r\n      //         while (this.IN_BOARD(sqDst)) { // 如果sqDst仍位于棋盘，那么此时炮已经翻山了\r\n      //           if(this.displayChessTemp[sqDst] & 16) {\r\n      //             //终点处是黑方棋子\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row - 29 - 1\r\n      //             let domTemp = $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //             break\r\n      //           }\r\n      //           sqDst += delta;\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     case 'P': {\r\n      //       let PAWN_delta = [-16,1,-1] //兵一开始只能向上走,过河后可向左/右走\r\n      //       let sqDst = sqSrc + PAWN_delta[0]\r\n      //       if(!(this.displayChessTemp[sqDst] & 8)) {//终点处不是红方棋子,则走法合法\r\n      //         let row = this.RANK_Y(sqDst)\r\n      //         let imgIndex = sqDst - 7*row -29 - 1\r\n      //         let domTemp =  $('#pos' + imgIndex)\r\n      //         step.push(domTemp)\r\n      //       }\r\n      //       if(sqSrc < 131 && this.IN_BOARD(sqDst)) {//若兵过河了(此处的131是经过计算得到的过河临界值\r\n      //         for (let i = 0; i < 2; i++) {\r\n      //           sqDst = sqSrc + PAWN_delta[i+1]\r\n      //           if(!(this.displayChessTemp[sqDst] & 8)) {\r\n      //             let row = this.RANK_Y(sqDst)\r\n      //             let imgIndex = sqDst - 7*row -29 - 1\r\n      //             let domTemp =  $('#pos' + imgIndex)\r\n      //             step.push(domTemp)\r\n      //           }\r\n      //         }\r\n      //       }\r\n      //       break\r\n      //     }\r\n      //     default: step.push(null)\r\n      //   }\r\n      //   return step\r\n      // }\r\n    },\r\n    /*根据局面评估值，返回下一步要走的棋子*/\r\n    machine_getPcToBeMoved() {\r\n      let blackAllPc = [], whiteAllPc = []\r\n      let displayChess_evaluate = this.displayChessTemp.map(item => {return item})\r\n      //该循环得到所有可以选择走的棋子，的一维坐标\r\n      for(let sqSrc in this.displayChessTemp) {\r\n        if(this.displayChessTemp[sqSrc] & 16) {\r\n          blackAllPc.push(sqSrc)\r\n        }\r\n        else if(this.displayChessTemp[sqSrc] & 8) whiteAllPc.push(sqSrc)\r\n      }\r\n      /*该循环可得到红方棋子下一步的起点选择哪个*/\r\n      let ramI_w = Math.floor(Math.random() * blackAllPc.length)\r\n      let val2 = 0, maxVal = 0, maxVal2_sqSrc_w = blackAllPc[ramI_w], DstDom\r\n      for(let k in whiteAllPc) {\r\n        let sqSrc_w = whiteAllPc[k]//某个红方棋子的起点一维坐标\r\n        // console.log(sqSrc2);\r\n        /*针对该红棋红方得到最有利于它的走法*/\r\n        DstDom = this.machine_getExactStep(this.sqToDom(sqSrc_w),this.displayChessTemp)\r\n        if(DstDom === undefined) continue //如果遍历到的某个红方棋子一种走法都没有，就跳过\r\n        // console.log(DstDom);\r\n        /*该红方棋子最佳走法的终点一维坐标*/\r\n        let sqDst_w = this.domToSq(DstDom)\r\n        /*假设该红棋移动*/\r\n        let tempNum = this.machine_supposeToMove(displayChess_evaluate,sqSrc_w,sqDst_w)\r\n\r\n        val2 = this.machine_evaluate(displayChess_evaluate)//试求评估值2\r\n        /*恢复中转棋盘*/\r\n        this.machine_recoverFicBoard(displayChess_evaluate,sqSrc_w,sqDst_w,tempNum)\r\n        /*站在红方的角度，我肯定力求val2最大*/\r\n        if(val2 >= maxVal) {\r\n          maxVal = val2 //更新最大评估值\r\n          maxVal2_sqSrc_w = sqSrc_w//更新评估值最大时选择的棋子\r\n        }\r\n        else {\r\n          // minMaxVal2_sqSrc = blackAllPc[i]\r\n          // console.log('error');\r\n        }\r\n        // break\r\n      }\r\n      // console.log(whiteAllPc);\r\n      // console.log(displayChess_evaluate);\r\n      let xDstDom = this.machine_getExactStep(this.sqToDom(maxVal2_sqSrc_w),this.displayChessTemp)\r\n      // console.log(xDstDom);\r\n      if(xDstDom.attr('id') === undefined) {\r\n        let xArr = this.machine_getSteps(this.sqToDom(maxVal2_sqSrc_w),this.displayChessTemp)\r\n        // console.log(xArr);\r\n        xDstDom = xArr[Math.floor(Math.random() * xArr.length)]\r\n      }\r\n      if(this.sqToDom(maxVal2_sqSrc_w).attr('id') === undefined) {\r\n        maxVal2_sqSrc_w = whiteAllPc[ramI_w]\r\n      }\r\n      // console.log('红方最好的起点:' + this.sqToDom(maxVal2_sqSrc_w).attr('id'));\r\n      // console.log('红方最好的终点:' + xDstDom.attr('id'));\r\n      // console.log('假设该红方棋子落子后的评估值：' + maxVal);\r\n\r\n      // console.log(displayChess_evaluate);\r\n      let sqDst_b,sqSrc_b//黑方最终决定的起点、终点\r\n      let val1 = 0,minVal = maxVal\r\n      // let minMaxVal2_sqSrc = blackAllPc[0]//使maxVal2最小时的棋子的起点一维坐标(黑方执棋)\r\n      for(let i in blackAllPc) {//遍历所有黑棋\r\n        // console.log(i);\r\n        // if(i == 9) break //先遍历前10颗棋子\r\n        let sqSrc = blackAllPc[i]//某个黑方棋子的起点一维坐标\r\n        // console.log('一黑方棋子的起点:' + this.sqToDom(sqSrc).attr('id'));\r\n        // console.log('一黑方棋子的终点：');\r\n        /*走法数组，元素为对象类型*/\r\n        let stepArray = this.machine_getSteps(this.sqToDom(sqSrc),this.displayChessTemp)\r\n            .map(e => {return e})\r\n        for(let j in stepArray) {//遍历某黑棋的所有走法\r\n          /*该黑方棋子其中一个走法的终点，的一维坐标*/\r\n          let sqDst = this.domToSq(stepArray[j])\r\n          // console.log(this.sqToDom(sqDst));\r\n          //\r\n          // console.log(displayChess_evaluate);\r\n          // console.log('可以到达一一一一');\r\n          /*黑棋的虚拟移动*/\r\n          let tempNum_b = this.machine_supposeToMove(displayChess_evaluate,sqSrc,sqDst)\r\n\r\n          // console.log(displayChess_evaluate);\r\n          /*重新求一下之前确定的红方棋子的终点*/\r\n          let xxxDstDom = this.machine_getExactStep(this.sqToDom(maxVal2_sqSrc_w),displayChess_evaluate)\r\n          if(xxxDstDom === undefined) continue//如果改走法没有了，跳过\r\n          let sqDst_w = this.domToSq(xxxDstDom)\r\n          // console.log('重新求了红棋的终点：' + this.sqToDom(sqDst_w).attr('id'));\r\n          // console.log('可以到达二二二二');\r\n          let tempNum_w = this.machine_supposeToMove(displayChess_evaluate,maxVal2_sqSrc_w,sqDst_w)\r\n          val1 = this.machine_evaluate(displayChess_evaluate)//黑、红方都假设走完后，求评估值1\r\n          // console.log('假设黑棋落子后的评估值：' + val1);\r\n\r\n          this.machine_recoverFicBoard(displayChess_evaluate,maxVal2_sqSrc_w,sqDst_w,tempNum_w)\r\n          this.machine_recoverFicBoard(displayChess_evaluate,sqSrc,sqDst,tempNum_b)\r\n          /*站在黑方的角度，我肯定力求val1最小,maxVal2最小*/\r\n          if(val1 <= minVal) {\r\n            minVal = val1\r\n            sqDst_b = sqDst\r\n            sqSrc_b = sqSrc\r\n            console.log('最小评估值' + minVal);\r\n          }\r\n          // else console.log('err');\r\n\r\n          // /*黑方走棋破坏的*/\r\n          if(this.sqToDom(sqSrc).attr('id') === 'pos2') {\r\n            // console.log('------------');\r\n            // console.log(displayChess_evaluate);\r\n          }\r\n        }\r\n\r\n        // break\r\n      }\r\n      // console.log('黑棋最终的起点:');\r\n      // console.log(this.sqToDom(sqSrc_b));\r\n      // console.log('黑棋最终的终点:');\r\n      // console.log(this.sqToDom(sqDst_b));\r\n      // return randomSrcDom\r\n      return [this.sqToDom(sqSrc_b),this.sqToDom(sqDst_b)]\r\n      /*以下为没有搜索算法，直接随机*/\r\n      // let randomIndex\r\n      // let randomSrcDom//起点,终点\r\n      // while(1) {\r\n      //   randomIndex = Math.floor(Math.random() * blackAllPc.length)//随机数在数组中的索引值\r\n      //   // let randomSq = blackAllPc[randomIndex]\r\n      //   randomSrcDom = this.sqToDom(blackAllPc[randomIndex])\r\n      //   if(this.machine_getSteps(randomSrcDom).length > 0)\r\n      //     //当选中的棋子至少有一种走法时，才退出循环，否则一直循环直到找到一棋子其走法有至少一种\r\n      //     break\r\n      // }\r\n\r\n    },\r\n    /*根据输入的起点dom对象，返回使评估值最小的终点的dom对象*/\r\n    machine_getExactStep(srcDom,arr) {\r\n      // console.log(arr);\r\n      let allWays, displayChess_evaluate\r\n      if(arr !== undefined) {\r\n        allWays = this.machine_getSteps(srcDom,arr)\r\n        displayChess_evaluate = arr.map((item) => {\r\n          //用于评估分数的中转棋盘(不能直接对数组赋值，应对元素赋值)\r\n          return item\r\n        })\r\n      }\r\n      // else {\r\n      //   allWays = this.machine_getSteps(srcDom) //该棋子的所有走法,数组元素是dom对象\r\n      //   /*棋盘中转站*/\r\n      //   displayChess_evaluate = this.displayChessTemp.map((item) => {\r\n      //     //用于评估分数的中转棋盘(不能直接对数组赋值，应对元素赋值)\r\n      //     return item\r\n      //   })\r\n      // }\r\n      if(!this.playerSide) {\r\n        // console.log('黑方执棋，此时求的是红棋的最佳终点');\r\n        //如果是黑方执棋\r\n        let maxVal = this.machine_evaluate(arr)\r\n        let randomDstIndex = Math.floor(Math.random() * allWays.length)\r\n        let dstDom = allWays[randomDstIndex]//初始就赋一个随机值\r\n        // console.log(srcDom);\r\n        for(let i in allWays) {\r\n          let srcNum = displayChess_evaluate[this.domToSq(srcDom)]//起点棋子代表的Num值\r\n          let sqDst = this.domToSq(allWays[i])//终点棋子的一维坐标\r\n          let tempNum = displayChess_evaluate[sqDst]//保存一下落棋前终点处的棋子Num\r\n          /*假设终点落下该棋，即终点处的Num值改变*/\r\n          displayChess_evaluate[sqDst] = srcNum\r\n          let currentVal = this.machine_evaluate(displayChess_evaluate)\r\n          // console.log('评估值：'+ currentVal);\r\n          if(this.machine_evaluate(displayChess_evaluate) > maxVal) {//如果评估值比原来大\r\n            maxVal = this.machine_evaluate(displayChess_evaluate)//更新最大值\r\n            dstDom = this.sqToDom(sqDst)//更新终点\r\n          }\r\n          // else console.log('此次循环没有大的');\r\n          displayChess_evaluate[this.domToSq(srcDom)] = srcNum//恢复中转棋盘\r\n          displayChess_evaluate[sqDst] = tempNum//恢复中转棋盘\r\n        }\r\n        return dstDom\r\n      }\r\n      else {\r\n        let minVal = this.machine_evaluate(arr)\r\n        let randomDstIndex = Math.floor(Math.random() * allWays.length)\r\n        let dstDom = allWays[randomDstIndex]//初始就赋一个随机值\r\n        // console.log(srcDom);\r\n        for(let i in allWays) {\r\n          let srcNum = displayChess_evaluate[this.domToSq(srcDom)]//起点棋子代表的Num值\r\n          let sqDst = this.domToSq(allWays[i])//终点棋子的一维坐标\r\n          let tempNum = displayChess_evaluate[sqDst]//保存一下落棋前终点处的棋子Num\r\n          /*假设终点落下该棋，即终点处的Num值改变*/\r\n          displayChess_evaluate[sqDst] = srcNum\r\n          let currentVal = this.machine_evaluate(displayChess_evaluate)\r\n          if(this.machine_evaluate(displayChess_evaluate) < minVal) {//如果评估值比原来小\r\n            // console.log('------------');\r\n            minVal = this.machine_evaluate(displayChess_evaluate)//更新最小值\r\n            dstDom = this.sqToDom(sqDst)//更新终点\r\n          }\r\n          displayChess_evaluate[this.domToSq(srcDom)] = srcNum//恢复中转棋盘\r\n          displayChess_evaluate[sqDst] = tempNum//恢复中转棋盘\r\n        }\r\n        return dstDom\r\n      }\r\n      // console.log(dstDom);\r\n      // console.log(allWays);\r\n      // console.log('当前评估值:' + this.machine_evaluate(this.displayChessTemp));\r\n    },\r\n    /*根据输入的整个棋盘数组，返回红方分数-黑方分数的值，记作《评估值》*/\r\n    machine_evaluate(array) {\r\n      let wVal = this.machine_getVal(array,true), bVal = this.machine_getVal(array,false)\r\n      return wVal - bVal\r\n    },\r\n    /*根据输入的整个棋盘数组，返回*/\r\n    machine_getVal(array,isWhite) {\r\n      let val = 0\r\n      for(let i in array) {\r\n        if(isWhite) {//若是红方\r\n          switch (array[i]) {\r\n            case 8: val += 1000;break\r\n            case 9: val += 20;break\r\n            case 10: val += 20;break\r\n            case 11: val += 45;break\r\n            case 12: val += 90;break\r\n            case 13: val += 40;break\r\n            case 14: val += 10;break\r\n            default: val += 0\r\n          }\r\n        }\r\n        else {\r\n          switch (array[i]) {\r\n            case 16: val += 1000;break\r\n            case 17: val += 20;break\r\n            case 18: val += 20;break\r\n            case 19: val += 45;break\r\n            case 20: val += 90;break\r\n            case 21: val += 40;break\r\n            case 22: val += 10;break\r\n            default: val += 0\r\n          }\r\n        }\r\n      }\r\n      return val\r\n    },\r\n    /*根据输入的中转棋盘数组、起点、终点，完成在该数组上的虚拟移动，返回中转值*/\r\n    machine_supposeToMove(arr,sqSrc,sqDst) {\r\n      if(arr === undefined || sqSrc === undefined || sqDst === undefined)\r\n        return 'ERROR'\r\n      let temp = arr[sqDst]\r\n      arr[sqDst] = arr[sqSrc]\r\n      arr[sqSrc] = 1\r\n      return temp\r\n    },\r\n    /*根据输入的中转棋盘数组、棋子的起点和终点、中转值，完成中转棋盘的恢复*/\r\n    machine_recoverFicBoard(arr,sqSrc,sqDst,temp) {\r\n      if(arr === undefined || sqSrc === undefined || sqDst === undefined || temp === undefined)\r\n        return 'ERROR'\r\n\r\n      arr[sqSrc] = arr[sqDst]\r\n      arr[sqDst] = temp\r\n    },\r\n    /*该函数会使局面重新绘制，返回1,2,3,0\r\n    * 1：表示触发了兵线刷新\r\n    * 2：替父从军\r\n    * 3：草木皆兵*/\r\n    machine_passiveSkills() {\r\n      /*兵线刷新*/\r\n      return new Promise((resolve,reject) => {\r\n        /*兵线刷新*/\r\n        let advisorSum = 0, isEaten = false\r\n        let currentVal = this.machine_evaluate(this.displayChessTemp), isSkill3 = false\r\n        // console.log(this.machine_getVal(this.displayChessTemp, false));\r\n        for(let i in this.displayChessTemp) {\r\n          if(this.displayChessTemp[i] === 22) {\r\n            advisorSum ++\r\n          }\r\n          /*替父从军*/\r\n          if(this.displayChessTemp[i] & 8 && this.displayChess_Old[i] & 16) {\r\n            //若某处上一步为黑方棋子，下一步为红方棋子，说明黑方棋子被吃掉\r\n            if(Math.floor(Math.random() + 0.9)) { //附加条件：大概30%几率触发替父从军\r\n              isEaten = true\r\n              this.displayChessTemp[i] = this.displayChess_Old[i]\r\n            }\r\n          }\r\n          /*草木皆兵*/\r\n          if(currentVal > 180 || this.machine_getVal(this.displayChessTemp,false) < 1220) {\r\n            //黑方总价值＜1220，大约损失了两车一炮\r\n            isSkill3 = true\r\n            if(this.displayChessTemp[i] === 1) {\r\n              this.displayChessTemp[i] = 22\r\n            }\r\n          }\r\n        }\r\n        if(advisorSum < 3) {\r\n          for(let i = 0,j = 0;i <5;i++,j+=2) {\r\n            let domSq = this.domToSq($(`#pos${27 + j}`))\r\n            // console.log($(`#pos${27 + j}`));\r\n            this.displayChessTemp[domSq] = 22\r\n          }\r\n          document.querySelector('#skill1').play()\r\n          setTimeout(() => {\r\n            this.drawWithSq()\r\n            // let chessInfo = null\r\n            this.chess1Click(null)\r\n            resolve(1)\r\n          },3000)\r\n        }\r\n        /*替父从军*/\r\n        else if(isEaten) {\r\n          document.querySelector('#skill2').play()\r\n          setTimeout(() => {\r\n            this.drawWithSq()\r\n            // let chessInfo = null\r\n            this.chess1Click(null)\r\n            resolve(2)\r\n          },3000)\r\n        }\r\n        /*草木皆兵*/\r\n        else if(isSkill3) {\r\n          document.querySelector('#skill3').play()\r\n          setTimeout(() => {\r\n            this.drawWithSq()\r\n            // let chessInfo = null\r\n            this.chess1Click(null)\r\n            resolve(3)\r\n          },3000)\r\n        }\r\n        else resolve(0)\r\n\r\n      })\r\n    },\r\n    /*根据输入的sq（一维坐标），返回棋盘中该棋子的dom对象*/\r\n    sqToDom(sq) {\r\n      let row = this.RANK_Y(sq)\r\n      let imgIndex = sq - 7*row -29 - 1\r\n      // let domTemp =  $('#pos' + imgIndex)\r\n      return $('#pos' + imgIndex)\r\n    },\r\n    /*根据输入的dom对象，返回sq（一维坐标）*/\r\n    domToSq(dom) {\r\n      let imgIndex = parseInt(dom.attr('id').slice(3)) + 1\r\n      return this.imgIndexToSq(imgIndex)\r\n    },\r\n    /*传入一维坐标，如果在棋盘内，返回true*/\r\n    IN_BOARD(sq) {\r\n      return this.IN_BOARD_[sq] !== 0;\r\n    },\r\n    /*判断是否在九宫格内,若是，返回true*/\r\n    IN_FORT(sq) {\r\n      return this.IN_FORT_[sq] !== 0;\r\n    },\r\n    /*将二维矩阵坐标转换为一维矩阵坐标 (x,y)含(0,0)*/\r\n    COORD_XY(x, y) {// 将二维矩阵坐标转换为一维矩阵坐标 (x,y)含(0,0)\r\n      return x + (y << 4);\r\n    },\r\n    /*根据一维矩阵，获取二维矩阵行数 行数从0开始*/\r\n    RANK_Y(sq) {// 根据一维矩阵，获取二维矩阵行数 行数从0开始\r\n      return sq >> 4;\r\n    },\r\n    /*根据一维矩阵，获取二维矩阵列数*/\r\n    FILE_X(sq) {// 根据一维矩阵，获取二维矩阵列数\r\n      return sq & 15;\r\n    },\r\n    /*初始化棋盘，得到棋盘一开始的布局*/\r\n    initBoard() {\r\n      this.displayChessTemp = []//清空一下棋盘\r\n      this.FENArray = this.FEN.split('') //将FEN字符串转为数组\r\n\r\n      this.FENtoBoard(this.FENArray)//将FEN串(array型)转化为一维数组形式，并且字符元素映射为整型,保存在this.displayChessTemp\r\n      for (let i = 0; i < 256; i++) {//将棋盘外元素设置为null\r\n        if (!this.IN_BOARD(i)) {\r\n          this.displayChessTemp[i] = null\r\n        }\r\n      }\r\n      let start = this.COORD_XY(3, 3) //51,循环开始处\r\n      let end = this.COORD_XY(11, 12) //203，循环结束处\r\n      // let imgDomArr = document.querySelectorAll('div.imgBox img')\r\n      /*tag用作记录文件名关键信息；\r\n      **row是当前循环索引值i对应的二维坐标的行数,col是列数；\r\n      **imgIndex用于记录i对应第几个图片*/\r\n      let tag = '', row = 0, imgIndex = 0, col = 0;\r\n      for (let i = start; i <= end; i++) {\r\n        if (this.IN_BOARD(i)) {\r\n          switch (this.displayChessTemp[i]) {\r\n            case 8:\r\n              tag = 'K';\r\n              break;\r\n            case 9:\r\n              tag = 'A';\r\n              break;\r\n            case 10:\r\n              tag = 'B';\r\n              break;\r\n            case 11:\r\n              tag = 'N';\r\n              break;\r\n            case 12:\r\n              tag = 'R';\r\n              break;\r\n            case 13:\r\n              tag = 'C';\r\n              break;\r\n            case 14:\r\n              tag = 'P';\r\n              break;\r\n\r\n            case 16:\r\n              tag = 'k_';\r\n              break;\r\n            case 17:\r\n              tag = 'a_';\r\n              break;\r\n            case 18:\r\n              tag = 'b_';\r\n              break;\r\n            case 19:\r\n              tag = 'n_';\r\n              break;\r\n            case 20:\r\n              tag = 'r_';\r\n              break;\r\n            case 21:\r\n              tag = 'c_';\r\n              break;\r\n            case 22:\r\n              tag = 'p_';\r\n              break;\r\n            case 1:\r\n              tag = 'UNexist';\r\n              break;\r\n            case 0:\r\n              tag = 'UNexist'\r\n              break;\r\n            default:\r\n              tag = 'UNexist'\r\n          }\r\n          row = this.RANK_Y(i)\r\n          col = this.FILE_X(i)\r\n          imgIndex = i - 7 * row - 30\r\n          let imgSrcStr = `/img/chess/${tag}.png`;\r\n          this.imgDomArr[imgIndex].src = imgSrcStr\r\n          /*清空变量*/\r\n          tag = '';\r\n          row = 0;\r\n          imgIndex = 0\r\n        } else continue\r\n      }\r\n\r\n    },\r\n    /*将FEN串(array型)转化为一维数组形式，并且字符元素映射为整型,保存在this.displayChessTemp*/\r\n    FENtoBoard(FENArray) {\r\n      let x = 3, y = 3\r\n      for (let i in FENArray) {\r\n        let ch = FENArray[i]\r\n        if (ch === '/') {//换行\r\n          y++\r\n        }\r\n        if (y > 12) break\r\n        if (x > 11) x = 3\r\n        else if (ch >= '1' && ch <= '9') {//出现空位\r\n          x += parseInt(ch)\r\n        } else if ((ch >= 'a' && ch <= 'z')) {//红方棋子或黑方棋子\r\n          let index = x + (y << 4)\r\n          this.displayChessTemp[index] = this.FENCharToNum(ch)\r\n          x++\r\n        } else if (ch >= 'A' && ch <= 'Z') {\r\n          let index = x + (y << 4)\r\n          this.displayChessTemp[index] = this.FENCharToNum(ch)\r\n          x++\r\n        } else console.log('err');\r\n      }\r\n    },\r\n    /*将棋子字符转成对应的整数*/\r\n    FENCharToNum(item) {//将棋子字符转成对应的整数\r\n      switch (item) {\r\n        case 'K' : {\r\n          return 8;\r\n        }\r\n        case 'A':\r\n          return 9;\r\n        case 'B':\r\n          return 10;\r\n        case 'N':\r\n          return 11;\r\n        case 'R':\r\n          return 12;\r\n        case 'C':\r\n          return 13;\r\n        case 'P':\r\n          return 14;\r\n\r\n        case 'k':\r\n          return 16;\r\n        case 'a':\r\n          return 17;\r\n        case 'b':\r\n          return 18;\r\n        case 'n':\r\n          return 19;\r\n        case 'r':\r\n          return 20;\r\n        case 'c':\r\n          return 21;\r\n        case 'p':\r\n          return 22;\r\n        default:\r\n          return 'err'\r\n      }\r\n    },\r\n    /*根据字符，返回图片文件名(的关键信息)*/\r\n    FENCharToImg(ch) {\r\n      switch (ch) {\r\n        case 'K' : {\r\n          return 'K';\r\n        }\r\n        case 'A':\r\n          return 'A';\r\n        case 'B':\r\n          return 'B';\r\n        case 'N':\r\n          return 'N';\r\n        case 'R':\r\n          return 'R';\r\n        case 'C':\r\n          return 'C';\r\n        case 'P':\r\n          return 'P';\r\n\r\n        case 'k':\r\n          return 'k_';\r\n        case 'a':\r\n          return 'a_';\r\n        case 'b':\r\n          return 'b_';\r\n        case 'n':\r\n          return 'n_';\r\n        case 'r':\r\n          return 'r_';\r\n        case 'c':\r\n          return 'c_';\r\n        case 'p':\r\n          return 'p_';\r\n        default:\r\n          return 'err'\r\n      }\r\n    },\r\n    /*根据棋子图片文件名，返回棋子中文字符串*/\r\n    ImgNameToChessName(imgName) {\r\n      switch (imgName) {\r\n        case 'K' : {\r\n          return '红方_帅';\r\n        }\r\n        case 'A':\r\n          return '红方_士';\r\n        case 'B':\r\n          return '红方_相';\r\n        case 'N':\r\n          return '红方_马';\r\n        case 'R':\r\n          return '红方_车';\r\n        case 'C':\r\n          return '红方_炮';\r\n        case 'P':\r\n          return '红方_兵';\r\n\r\n        case 'k':\r\n          return '黑方_将';\r\n        case 'a':\r\n          return '黑方_仕';\r\n        case 'b':\r\n          return '黑方_象';\r\n        case 'n':\r\n          return '黑方_马';\r\n        case 'r':\r\n          return '黑方_车';\r\n        case 'c':\r\n          return '黑方_炮';\r\n        case 'p':\r\n          return '黑方_卒';\r\n        default:\r\n          return '空'\r\n      }\r\n    },\r\n    /*根据FEN串绘制棋盘*/\r\n    drawWithFEN(FEN) {\r\n      this.FENArray = []\r\n      this.FENArray = FEN.split('')\r\n      this.displayChessTemp = []\r\n      this.FENtoBoard(this.FENArray)\r\n      // console.log(this.displayChessTemp);\r\n      for (let i = 0; i < 256; i++) {//将棋盘外元素设置为null\r\n        if (!this.IN_BOARD(i)) {\r\n          this.displayChessTemp[i] = null\r\n        }\r\n      }\r\n      let start = this.COORD_XY(3, 3) //51,循环开始处\r\n      let end = this.COORD_XY(11, 12) //203，循环结束处\r\n      // this.imgDomArr = document.querySelectorAll('div.imgBox img')\r\n      /*tag用作记录文件名关键信息；\r\n      **row是当前循环索引值i对应的二维坐标的行数,col是列数；\r\n      **imgIndex用于记录i对应第几个图片*/\r\n      let tag = '', row = 0, imgIndex = 0, col = 0;\r\n      for (let i = start; i <= end; i++) {\r\n        if (this.IN_BOARD(i)) {\r\n          switch (this.displayChessTemp[i]) {\r\n            case 8:\r\n              tag = 'K';\r\n              break;\r\n            case 9:\r\n              tag = 'A';\r\n              break;\r\n            case 10:\r\n              tag = 'B';\r\n              break;\r\n            case 11:\r\n              tag = 'N';\r\n              break;\r\n            case 12:\r\n              tag = 'R';\r\n              break;\r\n            case 13:\r\n              tag = 'C';\r\n              break;\r\n            case 14:\r\n              tag = 'P';\r\n              break;\r\n\r\n            case 16:\r\n              tag = 'k_';\r\n              break;\r\n            case 17:\r\n              tag = 'a_';\r\n              break;\r\n            case 18:\r\n              tag = 'b_';\r\n              break;\r\n            case 19:\r\n              tag = 'n_';\r\n              break;\r\n            case 20:\r\n              tag = 'r_';\r\n              break;\r\n            case 21:\r\n              tag = 'c_';\r\n              break;\r\n            case 22:\r\n              tag = 'p_';\r\n              break;\r\n            case 1:\r\n              tag = 'UNexist';\r\n              break;\r\n            case 0:\r\n              tag = 'UNexist'\r\n              break;\r\n            default:\r\n              tag = 'UNexist'\r\n          }\r\n          row = this.RANK_Y(i)\r\n          col = this.FILE_X(i)\r\n          imgIndex = i - 7 * row - 30\r\n          let imgSrcStr = `/img/chess/${tag}.png`;\r\n          this.imgDomArr[imgIndex].src = imgSrcStr // 重新渲染棋子图片\r\n          /*清空变量*/\r\n          tag = '';\r\n          row = 0;\r\n          imgIndex = 0\r\n        }\r\n      }\r\n\r\n    },\r\n    /*根据displayChessTemp重新绘制局面*/\r\n    drawWithSq() {\r\n      this.$emit('board-update',this.displayChessTemp)\r\n      let start = this.COORD_XY(3, 3) //51,循环开始处\r\n      let end = this.COORD_XY(11, 12) //203，循环结束处\r\n      // this.imgDomArr = document.querySelectorAll('div.imgBox img')\r\n      /*tag用作记录文件名关键信息；\r\n      **row是当前循环索引值i对应的二维坐标的行数,col是列数；\r\n      **imgIndex用于记录i对应第几个图片*/\r\n      let tag = '', row = 0, imgIndex = 0, col = 0;\r\n      for (let i = start; i <= end; i++) {\r\n        if (this.IN_BOARD(i)) {\r\n          switch (this.displayChessTemp[i]) {\r\n            case 8:\r\n              tag = 'K';\r\n              break;\r\n            case 9:\r\n              tag = 'A';\r\n              break;\r\n            case 10:\r\n              tag = 'B';\r\n              break;\r\n            case 11:\r\n              tag = 'N';\r\n              break;\r\n            case 12:\r\n              tag = 'R';\r\n              break;\r\n            case 13:\r\n              tag = 'C';\r\n              break;\r\n            case 14:\r\n              tag = 'P';\r\n              break;\r\n\r\n            case 16:\r\n              tag = 'k_';\r\n              break;\r\n            case 17:\r\n              tag = 'a_';\r\n              break;\r\n            case 18:\r\n              tag = 'b_';\r\n              break;\r\n            case 19:\r\n              tag = 'n_';\r\n              break;\r\n            case 20:\r\n              tag = 'r_';\r\n              break;\r\n            case 21:\r\n              tag = 'c_';\r\n              break;\r\n            case 22:\r\n              tag = 'p_';\r\n              break;\r\n            case 1:\r\n              tag = 'UNexist';\r\n              break;\r\n            case 0:\r\n              tag = 'UNexist'\r\n              break;\r\n            default:\r\n              tag = 'UNexist'\r\n          }\r\n          row = this.RANK_Y(i)\r\n          col = this.FILE_X(i)\r\n          imgIndex = i - 7 * row - 30\r\n          let imgSrcStr = `/img/chess/${tag}.png`;\r\n          this.imgDomArr[imgIndex].src = imgSrcStr // 重新渲染棋子图片\r\n          /*清空变量*/\r\n          tag = '';\r\n          row = 0;\r\n          imgIndex = 0\r\n        }\r\n      }\r\n    },\r\n    /*将第几个图片标签转换为sq*/\r\n    imgIndexToSq(imgIndex) {\r\n      let row = Math.floor((imgIndex - 1) / 9) + 3\r\n      return imgIndex + 30 + 7 * row - 1\r\n      // console.log('sq:' + sq);\r\n    },\r\n    /*如果从起点sqSrc到终点sqDst没有过河，则返回true；否则返回false*/\r\n    SAME_HALF(sqSrc, sqDst) {// 如果从起点sqSrc到终点sqDst没有过河，则返回true；否则返回false\r\n      return ((sqSrc ^ sqDst) & 0x80) === 0;\r\n    },\r\n    sureInput() {\r\n      let newFEN = this.userInput\r\n      this.drawWithFEN(newFEN)\r\n    },\r\n    test2() {\r\n      let newFEN = '1n1akabnr/r8/9/9/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR'\r\n      this.drawWithFEN(newFEN)\r\n    },\r\n    btnClick2() {\r\n      document.querySelectorAll('.audioBx li > audio').forEach((e) => {\r\n        e.play()\r\n      })\r\n    },\r\n    chess1Click(info) {\r\n      // console.log(info);\r\n      this.$emit('show', info)\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.input-box {\r\n  background-color: #1a6aa6;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-radius: 8px;\r\n  padding: 0 0 0 15px;\r\n  overflow: hidden;\r\n  height: 5ch;\r\n\r\n\r\n  i::before {\r\n    font-size: 1.5ch;\r\n    color: white;\r\n  }\r\n\r\n  input {\r\n    border: none;\r\n    box-sizing: border-box;\r\n    background: none;\r\n    color: white;\r\n    outline: none;\r\n    margin-left: 5px;\r\n    padding: 5px;\r\n    width: 100%;\r\n  }\r\n\r\n  input::placeholder {\r\n    color: white;\r\n  }\r\n\r\n  div {\r\n    background-color: #e0e1e2;\r\n    cursor: pointer;\r\n    color: #5a5a5a;\r\n    height: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 5px 10px;\r\n    width: 20%;\r\n    font-weight: 600;\r\n    justify-content: center;\r\n  }\r\n\r\n  div:hover {\r\n    background-color: #cacbcd;\r\n  }\r\n}\r\n.f1 {\r\n  margin: 0 5px;\r\n  border: none;\r\n  box-sizing: border-box;\r\n  padding: 13px 10px;\r\n  color: white;\r\n  background-color: #1a6aa6;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n}\r\n.f1:hover {\r\n  background-color: #12609b;\r\n}\r\n.chessBoard {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  width: 65%;\r\n  padding: 0.2vw;\r\n  border: 2px solid black;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  margin: auto;\r\n  .myFontBox {\r\n    font-family: 'LiShu',serif;\r\n    position: absolute;\r\n    top: 46%;\r\n    left: 50%;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    width: 100%;\r\n    transform: translateX(-50%);\r\n    font-size: 3vw;\r\n    div {\r\n    }\r\n  }\r\n  .imgBox {\r\n    width: 11.1%;\r\n    box-sizing: border-box;\r\n    padding: 0.2vw;\r\n    //border: 1px solid black;\r\n    background: url(\"../public/img/chess/bc.png\");\r\n    background-size: 100%;\r\n\r\n    img {\r\n      width: 100%;\r\n      cursor: pointer;\r\n\r\n    }\r\n\r\n    :hover {\r\n      transform: scale(1.1);\r\n    }\r\n  }\r\n\r\n  :nth-child(n+37):nth-child(-n+54) {\r\n    //border: none;\r\n    //background: none;\r\n    //background-image: url(\"../public/img/chess/bc-down.png\");\r\n    background-size: 100%;\r\n    background-repeat: no-repeat;\r\n    //margin: 10px 0;\r\n    //padding: 0;\r\n    //display: flex;\r\n    //justify-content: center;\r\n    //align-items: center;\r\n    img {\r\n      //cursor: default;\r\n      //width: 80%;\r\n\r\n    }\r\n  }\r\n  :nth-child(n+37):nth-child(-n+45) {\r\n    margin: -10px 0 10px 0;\r\n    background-image: url('../public/img/chess/bc-up.png');\r\n    background-repeat: no-repeat;\r\n    background-size: 100%;\r\n  }\r\n  :nth-child(n+46):nth-child(-n+54) {\r\n    background-image: url('../public/img/chess/bc-down.png');\r\n    margin: 10px 0 -10px 0;\r\n    background-repeat: no-repeat;\r\n    background-size: 100%;\r\n  }\r\n}\r\n\r\n@font-face {\r\n  font-family: 'LiShu';\r\n  //src: url('YourWebFontName.eot'); /* IE9 Compat Modes */\r\n  //src: url('YourWebFontName.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */\r\n  src: url('../public/css/LiShu/LiShu.woff') format('woff'), /* Modern Browsers */\r\n  url('../public/css/LiShu/LiShu.ttf')  format('truetype'), /* Safari, Android, iOS */\r\n  url(\"../public/css/LiShu/LiShu.svg\")  format('svg'); /* Legacy iOS */\r\n}\r\n</style>"]}]}