{"remainingRequest":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\CodingForFun\\Vue\\gaosen\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\CodingForFun\\Vue\\gaosen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\CodingForFun\\Vue\\gaosen\\docs\\.vuepress\\components\\Chess1.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\CodingForFun\\Vue\\gaosen\\docs\\.vuepress\\components\\Chess1.vue","mtime":1653315016004},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648514419946},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\babel-loader\\lib\\index.js","mtime":1648514420186},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648514419946},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\vue-loader\\lib\\index.js","mtime":1648514420515}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0NvZGluZ0ZvckZ1bi9WdWUvZ2Fvc2VuL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgJCBmcm9tICdqcXVlcnknOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNoZXNzIiwKICBwcm9wczogewogICAgZGlzcGxheUNoZXNzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICAiZGVmYXVsdCI6IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAvLzMKICAgICAgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgLy8xMgogICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXQogICAgfSwKICAgIHBsYXllclNpZGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgImRlZmF1bHQiOiBmYWxzZQogICAgfSwKICAgIGlzU2VsZWN0TWFjaGluZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICAiZGVmYXVsdCI6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHRlc3Q6IFtdLAogICAgICBJTl9CT0FSRF86IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSwKICAgICAgSU5fRk9SVF86IFsvL+i+heWKqeaVsOe7hO+8jOagh+ivhuaYr+WQpuWcqOS5neWuq+WGhQogICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSwKICAgICAgZGlzcGxheUNoZXNzVGVtcDogWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsIC8vMwogICAgICAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAvLzEyCiAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLAogICAgICBGRU46ICdybmJha2FibnIvOS8xYzVjMS9wMXAxcDFwMXAvOS85L1AxUDFQMVAxUC8xQzVDMS85L1JOQkFLQUJOUicsCiAgICAgIEZFTkFycmF5OiBbXSwKICAgICAgdXNlcklucHV0RkVOOiAnJywKICAgICAgdXNlcklucHV0OiAnJywKICAgICAgc3FTZWxlY3RlZDogMCwKICAgICAgLy/pvKDmoIfmmK/lkKbpgInkuK3kuIDmo4vlrZAKICAgICAgY3VycmVudENoZXNzOiAnJywKICAgICAgLy/lvZPliY3pgInkuK3nmoTmo4vlrZDvvIznmoTpppblrZfmr40sCiAgICAgIGRpc3BsYXlDaGVzc19PbGQ6IFtdLAogICAgICBpc0hhdmVLX3c6IGZhbHNlLAogICAgICBpc0hhdmVLX2I6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGltZ0RvbUFycjogZnVuY3Rpb24gaW1nRG9tQXJyKCkgewogICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmltZ0JveCBpbWcnKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBkaXNwbGF5Q2hlc3M6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwsIG9sZFZhbCkgewogICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgcmV0dXJuOwogICAgICAgIHRoaXMuZGlzcGxheUNoZXNzX09sZCA9IG9sZFZhbC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZGlzcGxheUNoZXNzVGVtcCA9IHZhbC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZHJhd1dpdGhTcSgpOyAvL+e7mOWItuaji+ebmAogICAgICB9IC8vIGRlZXA6IHRydWUKCiAgICB9LAogICAgcGxheWVyU2lkZTogZnVuY3Rpb24gcGxheWVyU2lkZShuZXdWYWwsIG9sZFZhbCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgc2tpbGwsIGRvbUFyciwgZG9tMSwgZG9tMjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoISghbmV3VmFsICYmIF90aGlzLmlzU2VsZWN0TWFjaGluZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm1hY2hpbmVfcGFzc2l2ZVNraWxscygpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBza2lsbCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHNraWxsID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+inpuWPkeiiq+WKqOaKgOiDve+8muWFtee6v+WIt+aWsCcpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChza2lsbCA9PT0gMikgewogICAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfop6blj5HooqvliqjmioDog73vvJrmm7/niLbku47lhpsnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2tpbGwgPT09IDMpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uud2FybmluZygn6Kem5Y+R6KKr5Yqo5oqA6IO977ya6I2J5pyo55qG5YW1Jyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNraWxsID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIC8vIGxldCBkb20xID0gJCgnI3BvczgnKQogICAgICAgICAgICAgICAgICBkb21BcnIgPSBfdGhpcy5tYWNoaW5lX2dldFBjVG9CZU1vdmVkKCkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBkb20xID0gZG9tQXJyWzBdOyAvLyBsZXQgZG9tMiA9IHRoaXMubWFjaGluZV9nZXRTdGVwcyhkb20xKVswXQogICAgICAgICAgICAgICAgICAvLyBsZXQgZG9tMiA9IHRoaXMubWFjaGluZV9nZXRFeGFjdFN0ZXAoZG9tMSkKCiAgICAgICAgICAgICAgICAgIGRvbTIgPSBkb21BcnJbMV07CgogICAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnlLXohJHnp7vliqjkuoYnICsgX3RoaXMuSW1nTmFtZVRvQ2hlc3NOYW1lKGRvbTEuYXR0cignc3JjJykuc2xpY2UoMTEsIDEyKSkpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMubWFjaGluZU1vdmUoZG9tMSwgZG9tMik7IC8vIGNvbnNvbGUubG9nKGRvbTEpOwogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkb20yKTsKICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tYWNoaW5lX2dldFN0ZXBzKGRvbTEpKTsKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAvLyBjb25zdCBjc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7CiAgICAvLyBjc3MucmVsID0gJ3N0eWxlc2hlZXQnOwogICAgLy8gY3NzLmhyZWYgPSAnaHR0cHM6Ly9jZG4ucmVwb3NpdG9yeS53ZWJmb250LmNvbS93ZWJmb250cy9ub21hbC8xNDg0MDcvNDY0ODkvNjI1NDA3YWFmNjI5ZDgxMzAwYWMxOWIzLmNzcyc7CiAgICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNzcyk7CiAgICB0aGlzLmluaXRCb2FyZCgpOwogICAgLyrmr4/kuKppbWfnu5HlrprkuIDkuKrngrnlh7vkuovku7YqLwoKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5pbWdCb3ggaW1nJykuZm9yRWFjaChmdW5jdGlvbiAoZSwgaW5kZXgpIHsKICAgICAgZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSwgaW5kZXgpIHsKICAgICAgICB2YXIgZmlsZU5hbWUgPSBlLnRhcmdldC5zcmMuc2xpY2UoMzIsIDMzKTsgLy8gY29uc29sZS5sb2coZmlsZU5hbWUpOwoKICAgICAgICB2YXIgYWxlcnRTdHIgPSBfdGhpczIuSW1nTmFtZVRvQ2hlc3NOYW1lKGZpbGVOYW1lKTsKCiAgICAgICAgdmFyIGltZ0luZGV4ID0gcGFyc2VJbnQoZS50YXJnZXQuaWQuc2xpY2UoMykpICsgMTsgLy8gY29uc29sZS5sb2coaW1nSW5kZXgpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGlzcGxheUNoZXNzVGVtcCk7CgogICAgICAgIHZhciBjaGVzc0luZm8gPSB7CiAgICAgICAgICAvL+aji+WtkOeahOS4gOS6m+S/oeaBrwogICAgICAgICAgZGlzcGxheUNoZXNzOiBfdGhpczIuZGlzcGxheUNoZXNzVGVtcCwKICAgICAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZSwKICAgICAgICAgIGltZ0luZGV4OiBpbWdJbmRleCwKICAgICAgICAgIHNxU2VsZWN0ZWQ6IF90aGlzMi5pbWdJbmRleFRvU3EoaW1nSW5kZXgpCiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMyLmNoZXNzMUNsaWNrKGNoZXNzSW5mbyk7CiAgICAgICAgLyrnlKjmiLfmr4/mrKHngrnlh7vmo4vlrZDlupTor6XlsIbor6Xmo4vlrZDlgqjlrZjliLDlvZPliY3mo4vlrZBjdXJyZW50Q2hlc3MqLwogICAgICAgIC8vIHRoaXMuY3VycmVudENoZXNzID0gZmlsZU5hbWUKICAgICAgICAvLyBpZih0aGlzLnNxU2VsZWN0ZWQpIHsKICAgICAgICAvLyAgIGlmKHRoaXMuY3VycmVudENoZXNzICE9ICdVJykgewogICAgICAgIC8vICAgICBjb25zb2xlLmxvZygn5LiK5qyh54K55Ye755qE5piv56m655m95aSEJyk7CiAgICAgICAgLy8gICB9CiAgICAgICAgLy8gfQoKICAgICAgfSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8q55S16ISR6LWw5qOLDQogICAgKiBkb20655S16ISR5pON5o6n5qih5ouf6byg5qCH54K55Ye75aSE55qEZG9t5a+56LGhKOWunumZheS4iuaYr+iwg+eUqOS6hmNoZXNzMUNsaWNr5Ye95pWw77yM5rKh5pyJ54K55Ye7KQ0KICAgICogMeS7o+ihqOi1t+eCue+8jDLku6Pooajnu4jngrkNCiAgICAqIOWunueOsOaViOaenOS4uuaji+WtkOenu+WKqA0KICAgICogKi8KICAgIG1hY2hpbmVNb3ZlOiBmdW5jdGlvbiBtYWNoaW5lTW92ZShkb20xLCBkb20yKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGZpbGVOYW1lMSA9IGRvbTEuYXR0cignc3JjJykuc2xpY2UoMTEsIDEyKTsKICAgICAgdmFyIGltZ0luZGV4MSA9IHBhcnNlSW50KGRvbTEuYXR0cignaWQnKS5zbGljZSgzKSkgKyAxOwogICAgICB2YXIgY2hlc3NJbmZvMSA9IHsKICAgICAgICAvL+aji+WtkOeahOS4gOS6m+S/oeaBrwogICAgICAgIGRpc3BsYXlDaGVzczogdGhpcy5kaXNwbGF5Q2hlc3NUZW1wLAogICAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZTEsCiAgICAgICAgaW1nSW5kZXg6IGltZ0luZGV4MSwKICAgICAgICBzcVNlbGVjdGVkOiB0aGlzLmltZ0luZGV4VG9TcShpbWdJbmRleDEpCiAgICAgIH07CiAgICAgIHRoaXMuY2hlc3MxQ2xpY2soY2hlc3NJbmZvMSk7IC8v55u45b2T5LqO6byg5qCH54K55Ye75LqGcG9zMOi9pueahOS9jee9rgoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGZpbGVOYW1lMiA9IGRvbTIuYXR0cignc3JjJykuc2xpY2UoMTEsIDEyKTsKICAgICAgICB2YXIgaW1nSW5kZXgyID0gcGFyc2VJbnQoZG9tMi5hdHRyKCdpZCcpLnNsaWNlKDMpKSArIDE7CiAgICAgICAgdmFyIGNoZXNzSW5mbzIgPSB7CiAgICAgICAgICAvL+aji+WtkOeahOS4gOS6m+S/oeaBrwogICAgICAgICAgZGlzcGxheUNoZXNzOiBfdGhpczMuZGlzcGxheUNoZXNzVGVtcCwKICAgICAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZTIsCiAgICAgICAgICBpbWdJbmRleDogaW1nSW5kZXgyLAogICAgICAgICAgc3FTZWxlY3RlZDogX3RoaXMzLmltZ0luZGV4VG9TcShpbWdJbmRleDIpCiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMzLmNoZXNzMUNsaWNrKGNoZXNzSW5mbzIpOwogICAgICB9LCA1MDApOwogICAgfSwKCiAgICAvKuagueaNrui+k+WFpeeahOaji+WtkGRvbeWvueixoe+8jOi/lOWbnuivpeaji+WtkOaJgOacieWPr+iDveeahOS4i+S4gOatpei1sOazle+8iGFycmF55Z6L77yM5L2G5pWw57uE5YWD57Sg5Li6ZG9t5a+56LGh77yJKi8KICAgIG1hY2hpbmVfZ2V0U3RlcHM6IGZ1bmN0aW9uIG1hY2hpbmVfZ2V0U3RlcHMoZG9tLCBhcnIpIHsKICAgICAgLy8gY29uc29sZS5sb2coYXJyKTsKICAgICAgaWYgKGFyciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIHN0ZXAgPSBbXTsKICAgICAgICB2YXIgZmlsZU5hbWUgPSBkb20uYXR0cignc3JjJykuc2xpY2UoMTEsIDEyKTsKICAgICAgICB2YXIgc3FTcmMgPSB0aGlzLmltZ0luZGV4VG9TcShwYXJzZUludChkb20uYXR0cignaWQnKS5zbGljZSgzKSkgKyAxKTsgLy/ojrflj5bkuIDnu7TlnZDmoIcKCiAgICAgICAgc3dpdGNoIChmaWxlTmFtZSkgewogICAgICAgICAgY2FzZSAnayc6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgS0lOR19ERUxUQSA9IFstMTYsIC0xLCAxLCAxNl07CgogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gS0lOR19ERUxUQSkgewogICAgICAgICAgICAgICAgLy8g5bCG55qENOS4quaWueWQkQogICAgICAgICAgICAgICAgdmFyIHNxRHN0ID0gc3FTcmMgKyBLSU5HX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrlj6/og73nmoTnu4jngrnkvY3nva4KCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7CiAgICAgICAgICAgICAgICAgIC8v57uI54K55aSE5LiN5Zyo5qOL55uY5YaFCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChhcnJbc3FEc3RdIDwgMTYgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgewogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOm7keaWue+8ieaji+WtkO+8jOS4lOe7iOeCueWcqOS5neWuq+agvOWGhQogICAgICAgICAgICAgICAgICB2YXIgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpOwogICAgICAgICAgICAgICAgICB2YXIgaW1nSW5kZXggPSBzcURzdCAtIDcgKiByb3cgLSAyOSAtIDE7CiAgICAgICAgICAgICAgICAgIHZhciBkb21UZW1wID0gJCgnI3BvcycgKyBpbWdJbmRleCk7CiAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAnYSc6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgQURWSVNPUl9ERUxUQSA9IFstMTUsIC0xNywgMTcsIDE1XTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kgaW4gQURWSVNPUl9ERUxUQSkgewogICAgICAgICAgICAgICAgdmFyIF9zcURzdCA9IHNxU3JjICsgQURWSVNPUl9ERUxUQVtfaV07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rgoKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoX3NxRHN0KSkgewogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhe+8jOaIluS4jeWcqOS5neWuq+agvOWGhQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYXJyW19zcURzdF0gPCAxNiAmJiB0aGlzLklOX0ZPUlQoX3NxRHN0KSkgewogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOm7keaWue+8ieaji+WtkCzkuJTnu4jngrnlnKjkuZ3lrqvmoLzlhoUKICAgICAgICAgICAgICAgICAgdmFyIF9yb3cgPSB0aGlzLlJBTktfWShfc3FEc3QpOwoKICAgICAgICAgICAgICAgICAgdmFyIF9pbWdJbmRleCA9IF9zcURzdCAtIDcgKiBfcm93IC0gMjkgLSAxOwoKICAgICAgICAgICAgICAgICAgdmFyIF9kb21UZW1wID0gJCgnI3BvcycgKyBfaW1nSW5kZXgpOwoKICAgICAgICAgICAgICAgICAgc3RlcC5wdXNoKF9kb21UZW1wKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAnYic6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgQklTSE9QX0RFTFRBID0gWy0zNCwgLTMwLCAzMCwgMzRdOwoKICAgICAgICAgICAgICBmb3IgKHZhciBfaTIgaW4gQklTSE9QX0RFTFRBKSB7CiAgICAgICAgICAgICAgICB2YXIgX3NxRHN0MiA9IHNxU3JjICsgQklTSE9QX0RFTFRBW19pMl07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rgoKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoX3NxRHN0MikgfHwgIXRoaXMuU0FNRV9IQUxGKHNxU3JjLCBfc3FEc3QyKSB8fCBhcnJbKHNxU3JjICsgX3NxRHN0MikgLyAyXSA+IDEpIHsKICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITkuI3lnKjmo4vnm5jlhoUs5oiW6L+H5rKzLOaIluixoeecvOaXoOaji+WtkAogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYXJyW19zcURzdDJdIDwgMTYpIHsKICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjpu5HmlrnvvInmo4vlrZAKICAgICAgICAgICAgICAgICAgdmFyIF9yb3cyID0gdGhpcy5SQU5LX1koX3NxRHN0Mik7CgogICAgICAgICAgICAgICAgICB2YXIgX2ltZ0luZGV4MiA9IF9zcURzdDIgLSA3ICogX3JvdzIgLSAyOSAtIDE7CgogICAgICAgICAgICAgICAgICB2YXIgX2RvbVRlbXAyID0gJCgnI3BvcycgKyBfaW1nSW5kZXgyKTsKCiAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChfZG9tVGVtcDIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlICduJzoKICAgICAgICAgICAgewogICAgICAgICAgICAgIHZhciBfS0lOR19ERUxUQSA9IFstMTYsIC0xLCAxLCAxNl07CiAgICAgICAgICAgICAgdmFyIEtOSUdIVF9ERUxUQSA9IFtbLTMzLCAtMzFdLCBbLTE4LCAxNF0sIFstMTQsIDE4XSwgWzMxLCAzM11dOwoKICAgICAgICAgICAgICBmb3IgKHZhciBfaTMgaW4gS05JR0hUX0RFTFRBKSB7CiAgICAgICAgICAgICAgICAvLyDpqazohb/nmoQ05Liq5pa55ZCRCiAgICAgICAgICAgICAgICB2YXIgX3NxRHN0MyA9IHNxU3JjICsgX0tJTkdfREVMVEFbX2kzXTsgLy8g5b6X5Yiw5LiA5Liq6ams6IW/55qE5L2N572uCgoKICAgICAgICAgICAgICAgIGlmIChhcnJbX3NxRHN0M10gPiAxKSB7CiAgICAgICAgICAgICAgICAgIC8v6ams6ISa5aSE5pyJ5qOL5a2QCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMjsgaisrKSB7CiAgICAgICAgICAgICAgICAgIC8vIDHkuKrpqazohb/lr7nlupQy5Liq6ams55qE5pa55ZCRCiAgICAgICAgICAgICAgICAgIF9zcURzdDMgPSBzcVNyYyArIEtOSUdIVF9ERUxUQVtfaTNdW2pdOyAvLyDlvpfliLDkuIDkuKrpqaznmoTlj6/og73nmoTnu4jngrnkvY3nva4KCiAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5JTl9CT0FSRChfc3FEc3QzKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoYXJyW19zcURzdDNdIDwgMTYpIHsKICAgICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOm7keaWue+8ieaji+WtkAogICAgICAgICAgICAgICAgICAgIHZhciBfcm93MyA9IHRoaXMuUkFOS19ZKF9zcURzdDMpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2ltZ0luZGV4MyA9IF9zcURzdDMgLSA3ICogX3JvdzMgLSAyOSAtIDE7CgogICAgICAgICAgICAgICAgICAgIHZhciBfZG9tVGVtcDMgPSAkKCcjcG9zJyArIF9pbWdJbmRleDMpOwoKICAgICAgICAgICAgICAgICAgICBzdGVwLnB1c2goX2RvbVRlbXAzKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlICdyJzoKICAgICAgICAgICAgewogICAgICAgICAgICAgIHZhciBfS0lOR19ERUxUQTIgPSBbLTE2LCAtMSwgMSwgMTZdOwoKICAgICAgICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCA0OyBfaTQrKykgewogICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gX0tJTkdfREVMVEEyW19pNF07IC8vIOW+l+WIsOS4gOS4quaWueWQkQoKICAgICAgICAgICAgICAgIHZhciBfc3FEc3Q0ID0gc3FTcmMgKyBkZWx0YTsgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQoKCiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChfc3FEc3Q0KSkgewogICAgICAgICAgICAgICAgICAvL+WcqOaji+ebmOS4igogICAgICAgICAgICAgICAgICBpZiAoYXJyW19zcURzdDRdIDwgMTYpIHsKICAgICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOm7keaWue+8ieaji+WtkCzmiJbmnInnuqLmlrnmo4vlrZAKICAgICAgICAgICAgICAgICAgICB2YXIgX3JvdzQgPSB0aGlzLlJBTktfWShfc3FEc3Q0KTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIF9pbWdJbmRleDQgPSBfc3FEc3Q0IC0gNyAqIF9yb3c0IC0gMjkgLSAxOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2RvbVRlbXA0ID0gJCgnI3BvcycgKyBfaW1nSW5kZXg0KTsKCiAgICAgICAgICAgICAgICAgICAgc3RlcC5wdXNoKF9kb21UZW1wNCk7CgogICAgICAgICAgICAgICAgICAgIGlmIChhcnJbX3NxRHN0NF0gPj0gOCkgewogICAgICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmnInlr7nmlrnvvIjnuqLmlrnvvInmo4vlrZAKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgX3NxRHN0NCArPSBkZWx0YTsgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAnYyc6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgX0tJTkdfREVMVEEzID0gWy0xNiwgLTEsIDEsIDE2XTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgNDsgX2k1KyspIHsKICAgICAgICAgICAgICAgIHZhciBfZGVsdGEgPSBfS0lOR19ERUxUQTNbX2k1XTsgLy8g5b6X5Yiw5LiA5Liq5pa55ZCRCgogICAgICAgICAgICAgICAgdmFyIF9zcURzdDUgPSBzcVNyYyArIF9kZWx0YTsgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQoKCiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChfc3FEc3Q1KSkgewogICAgICAgICAgICAgICAgICBpZiAoYXJyW19zcURzdDVdID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZAKICAgICAgICAgICAgICAgICAgICB2YXIgX3JvdzUgPSB0aGlzLlJBTktfWShfc3FEc3Q1KTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIF9pbWdJbmRleDUgPSBfc3FEc3Q1IC0gNyAqIF9yb3c1IC0gMjkgLSAxOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2RvbVRlbXA1ID0gJCgnI3BvcycgKyBfaW1nSW5kZXg1KTsKCiAgICAgICAgICAgICAgICAgICAgc3RlcC5wdXNoKF9kb21UZW1wNSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8g57uI54K55a2Y5Zyo5qOL5a2Q77yM54Ku6ZyA6KaB57+75bGxCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9zcURzdDUgKz0gX2RlbHRhOyAvLyDmsr/nnYDmlrnlkJFkZWx0YeWQkeWJjei1sOS4gOatpQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9zcURzdDUgKz0gX2RlbHRhOyAvLyDmsr/nnYDmlrnlkJFkZWx0YeWQkeWJjei1sOS4gOatpQoKICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLklOX0JPQVJEKF9zcURzdDUpKSB7CiAgICAgICAgICAgICAgICAgIC8vIOWmguaenHNxRHN05LuN5L2N5LqO5qOL55uY77yM6YKj5LmI5q2k5pe254Ku5bey57uP57+75bGx5LqGCiAgICAgICAgICAgICAgICAgIGlmIChhcnJbX3NxRHN0NV0gPj0gOCAmJiBhcnJbX3NxRHN0NV0gPCAxNikgewogICAgICAgICAgICAgICAgICAgIC8v57uI54K55aSE5piv57qi5pa55qOL5a2QCiAgICAgICAgICAgICAgICAgICAgdmFyIF9yb3c2ID0gdGhpcy5SQU5LX1koX3NxRHN0NSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBfaW1nSW5kZXg2ID0gX3NxRHN0NSAtIDcgKiBfcm93NiAtIDI5IC0gMTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIF9kb21UZW1wNiA9ICQoJyNwb3MnICsgX2ltZ0luZGV4Nik7CgogICAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChfZG9tVGVtcDYpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfc3FEc3Q1ICs9IF9kZWx0YTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAncCc6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgUEFXTl9kZWx0YSA9IFsxNiwgMSwgLTFdOyAvL+WFteS4gOW8gOWni+WPquiDveWQkeS4i+i1sCzov4fmsrPlkI7lj6/lkJHlt6Yv5Y+z6LWwCgogICAgICAgICAgICAgIHZhciBfc3FEc3Q2ID0gc3FTcmMgKyBQQVdOX2RlbHRhWzBdOwoKICAgICAgICAgICAgICBpZiAoYXJyW19zcURzdDZdIDwgMTYpIHsKICAgICAgICAgICAgICAgIC8v57uI54K55aSE5LiN5piv6buR5pa55qOL5a2QCiAgICAgICAgICAgICAgICB2YXIgX3JvdzcgPSB0aGlzLlJBTktfWShfc3FEc3Q2KTsKCiAgICAgICAgICAgICAgICB2YXIgX2ltZ0luZGV4NyA9IF9zcURzdDYgLSA3ICogX3JvdzcgLSAyOSAtIDE7CgogICAgICAgICAgICAgICAgdmFyIF9kb21UZW1wNyA9ICQoJyNwb3MnICsgX2ltZ0luZGV4Nyk7CgogICAgICAgICAgICAgICAgc3RlcC5wdXNoKF9kb21UZW1wNyk7CiAgICAgICAgICAgICAgfSAvL+iLpeWFtei/h+ays+S6hijmraTlpITnmoQxMzHmmK/nu4/ov4forqHnrpflvpfliLDnmoTov4fmsrPkuLTnlYzlgLzvvIzkuJTnu4jngrnlnKjmo4vnm5jlhoUKCgogICAgICAgICAgICAgIGlmIChzcVNyYyA+PSB0aGlzLmRvbVRvU3EoJCgnI3BvczQ1JykpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTYgPSAwOyBfaTYgPCAyOyBfaTYrKykgewogICAgICAgICAgICAgICAgICBfc3FEc3Q2ID0gc3FTcmMgKyBQQVdOX2RlbHRhW19pNiArIDFdOwogICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoX3NxRHN0NikpIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgaWYgKGFycltfc3FEc3Q2XSA8IDE2KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9yb3c4ID0gdGhpcy5SQU5LX1koX3NxRHN0Nik7CgogICAgICAgICAgICAgICAgICAgIHZhciBfaW1nSW5kZXg4ID0gX3NxRHN0NiAtIDcgKiBfcm93OCAtIDI5IC0gMTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIF9kb21UZW1wOCA9ICQoJyNwb3MnICsgX2ltZ0luZGV4OCk7CgogICAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChfZG9tVGVtcDgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgJ0snOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdmFyIF9LSU5HX0RFTFRBNCA9IFstMTYsIC0xLCAxLCAxNl07CgogICAgICAgICAgICAgIGZvciAodmFyIF9pNyBpbiBfS0lOR19ERUxUQTQpIHsKICAgICAgICAgICAgICAgIC8vIOWwhueahDTkuKrmlrnlkJEKICAgICAgICAgICAgICAgIHZhciBfc3FEc3Q3ID0gc3FTcmMgKyBfS0lOR19ERUxUQTRbX2k3XTsgLy8g5b6X5Yiw5LiA5Liq5Y+v6IO955qE57uI54K55L2N572uCgoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5JTl9CT0FSRChfc3FEc3Q3KSkgewogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShhcnJbX3NxRHN0N10gJiA4KSAmJiB0aGlzLklOX0ZPUlQoX3NxRHN0NykpIHsKICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjnuqLmlrnvvInmo4vlrZDvvIzkuJTnu4jngrnlnKjkuZ3lrqvmoLzlhoUKICAgICAgICAgICAgICAgICAgdmFyIF9yb3c5ID0gdGhpcy5SQU5LX1koX3NxRHN0Nyk7CgogICAgICAgICAgICAgICAgICB2YXIgX2ltZ0luZGV4OSA9IF9zcURzdDcgLSA3ICogX3JvdzkgLSAyOSAtIDE7CgogICAgICAgICAgICAgICAgICB2YXIgX2RvbVRlbXA5ID0gJCgnI3BvcycgKyBfaW1nSW5kZXg5KTsKCiAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChfZG9tVGVtcDkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlICdBJzoKICAgICAgICAgICAgewogICAgICAgICAgICAgIHZhciBfQURWSVNPUl9ERUxUQSA9IFstMTUsIC0xNywgMTcsIDE1XTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2k4IGluIF9BRFZJU09SX0RFTFRBKSB7CiAgICAgICAgICAgICAgICB2YXIgX3NxRHN0OCA9IHNxU3JjICsgX0FEVklTT1JfREVMVEFbX2k4XTsgLy8g5b6X5Yiw5LiA5Liq5Y+v6IO955qE57uI54K55L2N572uCgoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5JTl9CT0FSRChfc3FEc3Q4KSkgewogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhe+8jOaIluS4jeWcqOS5neWuq+agvOWGhQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShhcnJbX3NxRHN0OF0gJiA4KSAmJiB0aGlzLklOX0ZPUlQoX3NxRHN0OCkpIHsKICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjnuqLmlrnvvInmo4vlrZAs5LiU57uI54K55Zyo5Lmd5a6r5qC85YaFCiAgICAgICAgICAgICAgICAgIHZhciBfcm93MTAgPSB0aGlzLlJBTktfWShfc3FEc3Q4KTsKCiAgICAgICAgICAgICAgICAgIHZhciBfaW1nSW5kZXgxMCA9IF9zcURzdDggLSA3ICogX3JvdzEwIC0gMjkgLSAxOwoKICAgICAgICAgICAgICAgICAgdmFyIF9kb21UZW1wMTAgPSAkKCcjcG9zJyArIF9pbWdJbmRleDEwKTsKCiAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChfZG9tVGVtcDEwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAnQic6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgX0JJU0hPUF9ERUxUQSA9IFstMzQsIC0zMCwgMzAsIDM0XTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2k5IGluIF9CSVNIT1BfREVMVEEpIHsKICAgICAgICAgICAgICAgIHZhciBfc3FEc3Q5ID0gc3FTcmMgKyBfQklTSE9QX0RFTFRBW19pOV07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rgoKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoX3NxRHN0OSkgfHwgIXRoaXMuU0FNRV9IQUxGKHNxU3JjLCBfc3FEc3Q5KSB8fCBhcnJbKHNxU3JjICsgX3NxRHN0OSkgLyAyXSA+IDEpIHsKICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITkuI3lnKjmo4vnm5jlhoUs5oiW6L+H5rKzLOaIluixoeecvOaXoOaji+WtkAogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShhcnJbX3NxRHN0OV0gJiA4KSkgewogICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOe6ouaWue+8ieaji+WtkAogICAgICAgICAgICAgICAgICB2YXIgX3JvdzExID0gdGhpcy5SQU5LX1koX3NxRHN0OSk7CgogICAgICAgICAgICAgICAgICB2YXIgX2ltZ0luZGV4MTEgPSBfc3FEc3Q5IC0gNyAqIF9yb3cxMSAtIDI5IC0gMTsKCiAgICAgICAgICAgICAgICAgIHZhciBfZG9tVGVtcDExID0gJCgnI3BvcycgKyBfaW1nSW5kZXgxMSk7CgogICAgICAgICAgICAgICAgICBzdGVwLnB1c2goX2RvbVRlbXAxMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgJ04nOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdmFyIF9LSU5HX0RFTFRBNSA9IFstMTYsIC0xLCAxLCAxNl07CiAgICAgICAgICAgICAgdmFyIF9LTklHSFRfREVMVEEgPSBbWy0zMywgLTMxXSwgWy0xOCwgMTRdLCBbLTE0LCAxOF0sIFszMSwgMzNdXTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kxMCBpbiBfS05JR0hUX0RFTFRBKSB7CiAgICAgICAgICAgICAgICAvLyDpqazohb/nmoQ05Liq5pa55ZCRCiAgICAgICAgICAgICAgICB2YXIgX3NxRHN0MTAgPSBzcVNyYyArIF9LSU5HX0RFTFRBNVtfaTEwXTsgLy8g5b6X5Yiw5LiA5Liq6ams6IW/55qE5L2N572uCgoKICAgICAgICAgICAgICAgIGlmIChhcnJbX3NxRHN0MTBdID4gMSkgewogICAgICAgICAgICAgICAgICAvL+mprOiEmuWkhOacieaji+WtkAogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaiA9IDA7IF9qIDwgMjsgX2orKykgewogICAgICAgICAgICAgICAgICAvLyAx5Liq6ams6IW/5a+55bqUMuS4qumprOeahOaWueWQkQogICAgICAgICAgICAgICAgICBfc3FEc3QxMCA9IHNxU3JjICsgX0tOSUdIVF9ERUxUQVtfaTEwXVtfal07IC8vIOW+l+WIsOS4gOS4qumprOeahOWPr+iDveeahOe7iOeCueS9jee9rgoKICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLklOX0JPQVJEKF9zcURzdDEwKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoIShhcnJbX3NxRHN0MTBdICYgOCkpIHsKICAgICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOe6ouaWue+8ieaji+WtkAogICAgICAgICAgICAgICAgICAgIHZhciBfcm93MTIgPSB0aGlzLlJBTktfWShfc3FEc3QxMCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBfaW1nSW5kZXgxMiA9IF9zcURzdDEwIC0gNyAqIF9yb3cxMiAtIDI5IC0gMTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIF9kb21UZW1wMTIgPSAkKCcjcG9zJyArIF9pbWdJbmRleDEyKTsKCiAgICAgICAgICAgICAgICAgICAgc3RlcC5wdXNoKF9kb21UZW1wMTIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgJ1InOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdmFyIF9LSU5HX0RFTFRBNiA9IFstMTYsIC0xLCAxLCAxNl07CgogICAgICAgICAgICAgIGZvciAodmFyIF9pMTEgPSAwOyBfaTExIDwgNDsgX2kxMSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgX2RlbHRhMiA9IF9LSU5HX0RFTFRBNltfaTExXTsgLy8g5b6X5Yiw5LiA5Liq5pa55ZCRCgogICAgICAgICAgICAgICAgdmFyIF9zcURzdDExID0gc3FTcmMgKyBfZGVsdGEyOyAvLyDku47otbfngrlzcVNyY+W8gOWni++8jOayv+edgOaWueWQkWRlbHRh6LWw5LiA5q2lCgoKICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLklOX0JPQVJEKF9zcURzdDExKSkgewogICAgICAgICAgICAgICAgICAvL+WcqOaji+ebmOS4igogICAgICAgICAgICAgICAgICBpZiAoIShhcnJbX3NxRHN0MTFdICYgOCkpIHsKICAgICAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkOayoeacieacrOaWue+8iOe6ouaWue+8ieaji+WtkCzmiJbmnInnuqLmlrnmo4vlrZAKICAgICAgICAgICAgICAgICAgICB2YXIgX3JvdzEzID0gdGhpcy5SQU5LX1koX3NxRHN0MTEpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2ltZ0luZGV4MTMgPSBfc3FEc3QxMSAtIDcgKiBfcm93MTMgLSAyOSAtIDE7CgogICAgICAgICAgICAgICAgICAgIHZhciBfZG9tVGVtcDEzID0gJCgnI3BvcycgKyBfaW1nSW5kZXgxMyk7CgogICAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChfZG9tVGVtcDEzKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGFycltfc3FEc3QxMV0gJiAxNikgewogICAgICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmnInlr7nmlrnvvIjpu5HmlrnvvInmo4vlrZAKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgX3NxRHN0MTEgKz0gX2RlbHRhMjsgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAnQyc6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgX0tJTkdfREVMVEE3ID0gWy0xNiwgLTEsIDEsIDE2XTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kxMiA9IDA7IF9pMTIgPCA0OyBfaTEyKyspIHsKICAgICAgICAgICAgICAgIHZhciBfZGVsdGEzID0gX0tJTkdfREVMVEE3W19pMTJdOyAvLyDlvpfliLDkuIDkuKrmlrnlkJEKCiAgICAgICAgICAgICAgICB2YXIgX3NxRHN0MTIgPSBzcVNyYyArIF9kZWx0YTM7IC8vIOS7jui1t+eCuXNxU3Jj5byA5aeL77yM5rK/552A5pa55ZCRZGVsdGHotbDkuIDmraUKCgogICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuSU5fQk9BUkQoX3NxRHN0MTIpKSB7CiAgICAgICAgICAgICAgICAgIGlmIChhcnJbX3NxRHN0MTJdID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZAKICAgICAgICAgICAgICAgICAgICB2YXIgX3JvdzE0ID0gdGhpcy5SQU5LX1koX3NxRHN0MTIpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2ltZ0luZGV4MTQgPSBfc3FEc3QxMiAtIDcgKiBfcm93MTQgLSAyOSAtIDE7CgogICAgICAgICAgICAgICAgICAgIHZhciBfZG9tVGVtcDE0ID0gJCgnI3BvcycgKyBfaW1nSW5kZXgxNCk7CgogICAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChfZG9tVGVtcDE0KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyDnu4jngrnlrZjlnKjmo4vlrZDvvIzngq7pnIDopoHnv7vlsbEKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3NxRHN0MTIgKz0gX2RlbHRhMzsgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfc3FEc3QxMiArPSBfZGVsdGEzOyAvLyDmsr/nnYDmlrnlkJFkZWx0YeWQkeWJjei1sOS4gOatpQoKICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLklOX0JPQVJEKF9zcURzdDEyKSkgewogICAgICAgICAgICAgICAgICAvLyDlpoLmnpxzcURzdOS7jeS9jeS6juaji+ebmO+8jOmCo+S5iOatpOaXtueCruW3sue7j+e/u+WxseS6hgogICAgICAgICAgICAgICAgICBpZiAoYXJyW19zcURzdDEyXSAmIDE2KSB7CiAgICAgICAgICAgICAgICAgICAgLy/nu4jngrnlpITmmK/pu5Hmlrnmo4vlrZAKICAgICAgICAgICAgICAgICAgICB2YXIgX3JvdzE1ID0gdGhpcy5SQU5LX1koX3NxRHN0MTIpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2ltZ0luZGV4MTUgPSBfc3FEc3QxMiAtIDcgKiBfcm93MTUgLSAyOSAtIDE7CgogICAgICAgICAgICAgICAgICAgIHZhciBfZG9tVGVtcDE1ID0gJCgnI3BvcycgKyBfaW1nSW5kZXgxNSk7CgogICAgICAgICAgICAgICAgICAgIHN0ZXAucHVzaChfZG9tVGVtcDE1KTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3NxRHN0MTIgKz0gX2RlbHRhMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAnUCc6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgX1BBV05fZGVsdGEgPSBbLTE2LCAxLCAtMV07IC8v5YW15LiA5byA5aeL5Y+q6IO95ZCR5LiK6LWwLOi/h+ays+WQjuWPr+WQkeW3pi/lj7PotbAKCiAgICAgICAgICAgICAgdmFyIF9zcURzdDEzID0gc3FTcmMgKyBfUEFXTl9kZWx0YVswXTsKCiAgICAgICAgICAgICAgaWYgKCEoYXJyW19zcURzdDEzXSAmIDgpKSB7CiAgICAgICAgICAgICAgICAvL+e7iOeCueWkhOS4jeaYr+e6ouaWueaji+WtkCzliJnotbDms5XlkIjms5UKICAgICAgICAgICAgICAgIHZhciBfcm93MTYgPSB0aGlzLlJBTktfWShfc3FEc3QxMyk7CgogICAgICAgICAgICAgICAgdmFyIF9pbWdJbmRleDE2ID0gX3NxRHN0MTMgLSA3ICogX3JvdzE2IC0gMjkgLSAxOwoKICAgICAgICAgICAgICAgIHZhciBfZG9tVGVtcDE2ID0gJCgnI3BvcycgKyBfaW1nSW5kZXgxNik7CgogICAgICAgICAgICAgICAgc3RlcC5wdXNoKF9kb21UZW1wMTYpOwogICAgICAgICAgICAgIH0gLy/oi6XlhbXov4fmsrPkuoYo5q2k5aSE55qEMTMx5piv57uP6L+H6K6h566X5b6X5Yiw55qE6L+H5rKz5Li055WM5YC877yM5LiU57uI54K55Zyo5qOL55uY5YaFCgoKICAgICAgICAgICAgICBpZiAoc3FTcmMgPCAxMzEgJiYgdGhpcy5JTl9CT0FSRChfc3FEc3QxMykpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIF9pMTMgPSAwOyBfaTEzIDwgMjsgX2kxMysrKSB7CiAgICAgICAgICAgICAgICAgIF9zcURzdDEzID0gc3FTcmMgKyBfUEFXTl9kZWx0YVtfaTEzICsgMV07CiAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5JTl9CT0FSRChfc3FEc3QxMykpIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgaWYgKCEoYXJyW19zcURzdDEzXSAmIDgpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9yb3cxNyA9IHRoaXMuUkFOS19ZKF9zcURzdDEzKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIF9pbWdJbmRleDE3ID0gX3NxRHN0MTMgLSA3ICogX3JvdzE3IC0gMjkgLSAxOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2RvbVRlbXAxNyA9ICQoJyNwb3MnICsgX2ltZ0luZGV4MTcpOwoKICAgICAgICAgICAgICAgICAgICBzdGVwLnB1c2goX2RvbVRlbXAxNyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgc3RlcC5wdXNoKG51bGwpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN0ZXA7CiAgICAgIH0gZWxzZSByZXR1cm4gJ0VSUk9SJzsgLy8gZWxzZSB7CiAgICAgIC8vICAgbGV0IHN0ZXAgPSBbXQogICAgICAvLyAgIGxldCBmaWxlTmFtZSA9IGRvbS5hdHRyKCdzcmMnKS5zbGljZSgxMSwgMTIpCiAgICAgIC8vICAgbGV0IHNxU3JjID0gdGhpcy5pbWdJbmRleFRvU3EocGFyc2VJbnQoZG9tLmF0dHIoJ2lkJykuc2xpY2UoMykpICsgMSkvL+iOt+WPluS4gOe7tOWdkOaghwogICAgICAvLyAgIHN3aXRjaCAoZmlsZU5hbWUpIHsKICAgICAgLy8gICAgIGNhc2UgJ2snOiB7CiAgICAgIC8vICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOwogICAgICAvLyAgICAgICBmb3IgKGxldCBpIGluIEtJTkdfREVMVEEpIHsvLyDlsIbnmoQ05Liq5pa55ZCRCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBLSU5HX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrlj6/og73nmoTnu4jngrnkvY3nva4KICAgICAgLy8gICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkpIHsvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhQogICAgICAvLyAgICAgICAgICAgY29udGludWUKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSA8IDE2ICYmIHRoaXMuSU5fRk9SVChzcURzdCkpIHsKICAgICAgLy8gICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI6buR5pa577yJ5qOL5a2Q77yM5LiU57uI54K55Zyo5Lmd5a6r5qC85YaFCiAgICAgIC8vICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpCiAgICAgIC8vICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDEKICAgICAgLy8gICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgYnJlYWsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGNhc2UgJ2EnOiB7CiAgICAgIC8vICAgICAgIGxldCBBRFZJU09SX0RFTFRBID0gWy0xNSwgLTE3LCAxNywgMTVdOwogICAgICAvLyAgICAgICBmb3IobGV0IGkgaW4gQURWSVNPUl9ERUxUQSkgewogICAgICAvLyAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgQURWSVNPUl9ERUxUQVtpXTsgLy8g5b6X5Yiw5LiA5Liq5Y+v6IO955qE57uI54K55L2N572uCiAgICAgIC8vICAgICAgICAgaWYoIXRoaXMuSU5fQk9BUkQoc3FEc3QpICkgey8v57uI54K55aSE5LiN5Zyo5qOL55uY5YaF77yM5oiW5LiN5Zyo5Lmd5a6r5qC85YaFCiAgICAgIC8vICAgICAgICAgICBjb250aW51ZQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdIDwgMTYgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgewogICAgICAvLyAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjpu5HmlrnvvInmo4vlrZAs5LiU57uI54K55Zyo5Lmd5a6r5qC85YaFCiAgICAgIC8vICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpCiAgICAgIC8vICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDEKICAgICAgLy8gICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgYnJlYWsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGNhc2UgJ2InOiB7CiAgICAgIC8vICAgICAgIGxldCBCSVNIT1BfREVMVEEgPSBbLTM0LCAtMzAsIDMwLCAzNF07CiAgICAgIC8vICAgICAgIGZvcihsZXQgaSBpbiBCSVNIT1BfREVMVEEpIHsKICAgICAgLy8gICAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIEJJU0hPUF9ERUxUQVtpXTsgLy8g5b6X5Yiw5LiA5Liq5Y+v6IO955qE57uI54K55L2N572uCiAgICAgIC8vICAgICAgICAgaWYoIXRoaXMuSU5fQk9BUkQoc3FEc3QpIHx8ICF0aGlzLlNBTUVfSEFMRihzcVNyYyxzcURzdCkKICAgICAgLy8gICAgICAgICAgICAgfHwgdGhpcy5kaXNwbGF5Q2hlc3NUZW1wWyhzcVNyYytzcURzdCkvMl0gPiAxKSB7CiAgICAgIC8vICAgICAgICAgICAvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhSzmiJbov4fmsrMs5oiW6LGh55y85peg5qOL5a2QCiAgICAgIC8vICAgICAgICAgICBjb250aW51ZQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdIDwgMTYpIHsKICAgICAgLy8gICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI6buR5pa577yJ5qOL5a2QCiAgICAgIC8vICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpCiAgICAgIC8vICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDEKICAgICAgLy8gICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgYnJlYWsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGNhc2UgJ24nOiB7CiAgICAgIC8vICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOwogICAgICAvLyAgICAgICBsZXQgS05JR0hUX0RFTFRBID0gW1stMzMsIC0zMV0sIFstMTgsIDE0XSwgWy0xNCwgMThdLCBbMzEsIDMzXV07CiAgICAgIC8vICAgICAgIGZvcihsZXQgaSBpbiBLTklHSFRfREVMVEEpIHsvLyDpqazohb/nmoQ05Liq5pa55ZCRCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBLSU5HX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrpqazohb/nmoTkvY3nva4KICAgICAgLy8gICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdID4gMSkgewogICAgICAvLyAgICAgICAgICAgLy/pqazohJrlpITmnInmo4vlrZAKICAgICAgLy8gICAgICAgICAgIGNvbnRpbnVlCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMjsgaiArKykgeyAvLyAx5Liq6ams6IW/5a+55bqUMuS4qumprOeahOaWueWQkQogICAgICAvLyAgICAgICAgICAgc3FEc3QgPSBzcVNyYyArIEtOSUdIVF9ERUxUQVtpXVtqXTsgLy8g5b6X5Yiw5LiA5Liq6ams55qE5Y+v6IO955qE57uI54K55L2N572uCiAgICAgIC8vICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7CiAgICAgIC8vICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSA8IDE2KSB7CiAgICAgIC8vICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI6buR5pa577yJ5qOL5a2QCiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkKICAgICAgLy8gICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxCiAgICAgIC8vICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgICBicmVhawogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgY2FzZSAncic6IHsKICAgICAgLy8gICAgICAgbGV0IEtJTkdfREVMVEE9IFstMTYsIC0xLCAxLCAxNl07CiAgICAgIC8vICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSArKykgewogICAgICAvLyAgICAgICAgIGxldCBkZWx0YSA9IEtJTkdfREVMVEFbaV07ICAgIC8vIOW+l+WIsOS4gOS4quaWueWQkQogICAgICAvLyAgICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgZGVsdGE7ICAgIC8vIOS7jui1t+eCuXNxU3Jj5byA5aeL77yM5rK/552A5pa55ZCRZGVsdGHotbDkuIDmraUKICAgICAgLy8gICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChzcURzdCkpIHsKICAgICAgLy8gICAgICAgICAgIC8v5Zyo5qOL55uY5LiKCiAgICAgIC8vICAgICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdIDwgMTYpIHsKICAgICAgLy8gICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjpu5HmlrnvvInmo4vlrZAs5oiW5pyJ57qi5pa55qOL5a2QCiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkKICAgICAgLy8gICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxCiAgICAgIC8vICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQogICAgICAvLyAgICAgICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdID49IDgpIHsKICAgICAgLy8gICAgICAgICAgICAgICAvL+e7iOeCueWkhOacieWvueaWue+8iOe6ouaWue+8ieaji+WtkAogICAgICAvLyAgICAgICAgICAgICAgIGJyZWFrCiAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgIGVsc2UgYnJlYWsKICAgICAgLy8gICAgICAgICAgIHNxRHN0ICs9IGRlbHRhOyAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgYnJlYWsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGNhc2UgJ2MnOiB7CiAgICAgIC8vICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOwogICAgICAvLyAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkgKyspIHsKICAgICAgLy8gICAgICAgICBsZXQgZGVsdGEgPSBLSU5HX0RFTFRBW2ldOyAgICAvLyDlvpfliLDkuIDkuKrmlrnlkJEKICAgICAgLy8gICAgICAgICBsZXQgc3FEc3QgPSBzcVNyYyArIGRlbHRhOyAgICAvLyDku47otbfngrlzcVNyY+W8gOWni++8jOayv+edgOaWueWQkWRlbHRh6LWw5LiA5q2lCiAgICAgIC8vICAgICAgICAgd2hpbGUgKHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7CiAgICAgIC8vICAgICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdID09PSAxKSB7CiAgICAgIC8vICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2QCiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkKICAgICAgLy8gICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxCiAgICAgIC8vICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgICAgZWxzZSB7ICAgICAgICAgICAgLy8g57uI54K55a2Y5Zyo5qOL5a2Q77yM54Ku6ZyA6KaB57+75bGxCiAgICAgIC8vICAgICAgICAgICAgIGJyZWFrOwogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgICAgc3FEc3QgKz0gZGVsdGE7ICAgICAvLyDmsr/nnYDmlrnlkJFkZWx0YeWQkeWJjei1sOS4gOatpQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUKICAgICAgLy8gICAgICAgICB3aGlsZSAodGhpcy5JTl9CT0FSRChzcURzdCkpIHsgLy8g5aaC5p6cc3FEc3Tku43kvY3kuo7mo4vnm5jvvIzpgqPkuYjmraTml7bngq7lt7Lnu4/nv7vlsbHkuoYKICAgICAgLy8gICAgICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gPj0gOCAmJiB0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdIDwgMTYpIHsKICAgICAgLy8gICAgICAgICAgICAgLy/nu4jngrnlpITmmK/nuqLmlrnmo4vlrZAKICAgICAgLy8gICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQogICAgICAvLyAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0gMjkgLSAxCiAgICAgIC8vICAgICAgICAgICAgIGxldCBkb21UZW1wID0gJCgnI3BvcycgKyBpbWdJbmRleCkKICAgICAgLy8gICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApCiAgICAgIC8vICAgICAgICAgICAgIGJyZWFrCiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgICBzcURzdCArPSBkZWx0YTsKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgYnJlYWsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGNhc2UgJ3AnOiB7CiAgICAgIC8vICAgICAgIGxldCBQQVdOX2RlbHRhID0gWzE2LDEsLTFdIC8v5YW15LiA5byA5aeL5Y+q6IO95ZCR5LiL6LWwLOi/h+ays+WQjuWPr+WQkeW3pi/lj7PotbAKICAgICAgLy8gICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBQQVdOX2RlbHRhWzBdCiAgICAgIC8vICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gPCAxNikgey8v57uI54K55aSE5LiN5piv6buR5pa55qOL5a2QCiAgICAgIC8vICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQogICAgICAvLyAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQogICAgICAvLyAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApCiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgaWYoc3FTcmMgPj0gMTMxICYmIHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7Ly/oi6XlhbXov4fmsrPkuoYo5q2k5aSE55qEMTMx5piv57uP6L+H6K6h566X5b6X5Yiw55qE6L+H5rKz5Li055WM5YC8CiAgICAgIC8vICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgLy8gICAgICAgICAgIHNxRHN0ID0gc3FTcmMgKyBQQVdOX2RlbHRhW2krMV0KICAgICAgLy8gICAgICAgICAgIGlmKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gPCAxNikgewogICAgICAvLyAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpCiAgICAgIC8vICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQogICAgICAvLyAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQogICAgICAvLyAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkKICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgYnJlYWsKICAgICAgLy8gICAgIH0KICAgICAgLy8KICAgICAgLy8gICAgIGNhc2UgJ0snOiB7CiAgICAgIC8vICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOwogICAgICAvLyAgICAgICBmb3IgKGxldCBpIGluIEtJTkdfREVMVEEpIHsvLyDlsIbnmoQ05Liq5pa55ZCRCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBLSU5HX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrlj6/og73nmoTnu4jngrnkvY3nva4KICAgICAgLy8gICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkpIHsvL+e7iOeCueWkhOS4jeWcqOaji+ebmOWGhQogICAgICAvLyAgICAgICAgICAgY29udGludWUKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgaWYoISh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgOCkgJiYgdGhpcy5JTl9GT1JUKHNxRHN0KSkgewogICAgICAvLyAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjnuqLmlrnvvInmo4vlrZDvvIzkuJTnu4jngrnlnKjkuZ3lrqvmoLzlhoUKICAgICAgLy8gICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkKICAgICAgLy8gICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQogICAgICAvLyAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkKICAgICAgLy8gICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgICBicmVhawogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgY2FzZSAnQSc6IHsKICAgICAgLy8gICAgICAgbGV0IEFEVklTT1JfREVMVEEgPSBbLTE1LCAtMTcsIDE3LCAxNV07CiAgICAgIC8vICAgICAgIGZvcihsZXQgaSBpbiBBRFZJU09SX0RFTFRBKSB7CiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBBRFZJU09SX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrlj6/og73nmoTnu4jngrnkvY3nva4KICAgICAgLy8gICAgICAgICBpZighdGhpcy5JTl9CT0FSRChzcURzdCkgKSB7Ly/nu4jngrnlpITkuI3lnKjmo4vnm5jlhoXvvIzmiJbkuI3lnKjkuZ3lrqvmoLzlhoUKICAgICAgLy8gICAgICAgICAgIGNvbnRpbnVlCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIGlmKCEodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSAmIDgpICYmIHRoaXMuSU5fRk9SVChzcURzdCkpIHsKICAgICAgLy8gICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2QLOS4lOe7iOeCueWcqOS5neWuq+agvOWGhQogICAgICAvLyAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQogICAgICAvLyAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxCiAgICAgIC8vICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQogICAgICAvLyAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIGJyZWFrCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBjYXNlICdCJzogewogICAgICAvLyAgICAgICBsZXQgQklTSE9QX0RFTFRBID0gWy0zNCwgLTMwLCAzMCwgMzRdOwogICAgICAvLyAgICAgICBmb3IobGV0IGkgaW4gQklTSE9QX0RFTFRBKSB7CiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBCSVNIT1BfREVMVEFbaV07IC8vIOW+l+WIsOS4gOS4quWPr+iDveeahOe7iOeCueS9jee9rgogICAgICAvLyAgICAgICAgIGlmKCF0aGlzLklOX0JPQVJEKHNxRHN0KSB8fCAhdGhpcy5TQU1FX0hBTEYoc3FTcmMsc3FEc3QpCiAgICAgIC8vICAgICAgICAgICAgIHx8IHRoaXMuZGlzcGxheUNoZXNzVGVtcFsoc3FTcmMrc3FEc3QpLzJdID4gMSkgewogICAgICAvLyAgICAgICAgICAgLy/nu4jngrnlpITkuI3lnKjmo4vnm5jlhoUs5oiW6L+H5rKzLOaIluixoeecvOaXoOaji+WtkAogICAgICAvLyAgICAgICAgICAgY29udGludWUKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgaWYoISh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgOCkpIHsKICAgICAgLy8gICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2QCiAgICAgIC8vICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpCiAgICAgIC8vICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDEKICAgICAgLy8gICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgYnJlYWsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGNhc2UgJ04nOiB7CiAgICAgIC8vICAgICAgIGxldCBLSU5HX0RFTFRBPSBbLTE2LCAtMSwgMSwgMTZdOwogICAgICAvLyAgICAgICBsZXQgS05JR0hUX0RFTFRBID0gW1stMzMsIC0zMV0sIFstMTgsIDE0XSwgWy0xNCwgMThdLCBbMzEsIDMzXV07CiAgICAgIC8vICAgICAgIGZvcihsZXQgaSBpbiBLTklHSFRfREVMVEEpIHsvLyDpqazohb/nmoQ05Liq5pa55ZCRCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBLSU5HX0RFTFRBW2ldOyAvLyDlvpfliLDkuIDkuKrpqazohb/nmoTkvY3nva4KICAgICAgLy8gICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdID4gMSkgewogICAgICAvLyAgICAgICAgICAgLy/pqazohJrlpITmnInmo4vlrZAKICAgICAgLy8gICAgICAgICAgIGNvbnRpbnVlCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMjsgaiArKykgeyAvLyAx5Liq6ams6IW/5a+55bqUMuS4qumprOeahOaWueWQkQogICAgICAvLyAgICAgICAgICAgc3FEc3QgPSBzcVNyYyArIEtOSUdIVF9ERUxUQVtpXVtqXTsgLy8g5b6X5Yiw5LiA5Liq6ams55qE5Y+v6IO955qE57uI54K55L2N572uCiAgICAgIC8vICAgICAgICAgICBpZiAoIXRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7CiAgICAgIC8vICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgICAgaWYoISh0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgOCkpIHsKICAgICAgLy8gICAgICAgICAgICAgLy/nu4jngrnlpITmsqHmnInmo4vlrZDmsqHmnInmnKzmlrnvvIjnuqLmlrnvvInmo4vlrZAKICAgICAgLy8gICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQogICAgICAvLyAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDEKICAgICAgLy8gICAgICAgICAgICAgbGV0IGRvbVRlbXAgPSAgJCgnI3BvcycgKyBpbWdJbmRleCkKICAgICAgLy8gICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApCiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIGJyZWFrCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBjYXNlICdSJzogewogICAgICAvLyAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsKICAgICAgLy8gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpICsrKSB7CiAgICAgIC8vICAgICAgICAgbGV0IGRlbHRhID0gS0lOR19ERUxUQVtpXTsgICAgLy8g5b6X5Yiw5LiA5Liq5pa55ZCRCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBkZWx0YTsgICAgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQogICAgICAvLyAgICAgICAgIHdoaWxlICh0aGlzLklOX0JPQVJEKHNxRHN0KSkgewogICAgICAvLyAgICAgICAgICAgLy/lnKjmo4vnm5jkuIoKICAgICAgLy8gICAgICAgICAgIGlmKCEodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSAmIDgpKSB7CiAgICAgIC8vICAgICAgICAgICAgIC8v57uI54K55aSE5rKh5pyJ5qOL5a2Q5rKh5pyJ5pys5pa577yI57qi5pa577yJ5qOL5a2QLOaIluaciee6ouaWueaji+WtkAogICAgICAvLyAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpCiAgICAgIC8vICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQogICAgICAvLyAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQogICAgICAvLyAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkKICAgICAgLy8gICAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSAmIDE2KSB7CiAgICAgIC8vICAgICAgICAgICAgICAgLy/nu4jngrnlpITmnInlr7nmlrnvvIjpu5HmlrnvvInmo4vlrZAKICAgICAgLy8gICAgICAgICAgICAgICBicmVhawogICAgICAvLyAgICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgICBlbHNlIGJyZWFrCiAgICAgIC8vICAgICAgICAgICBzcURzdCArPSBkZWx0YTsgICAgIC8vIOayv+edgOaWueWQkWRlbHRh5ZCR5YmN6LWw5LiA5q2lCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIGJyZWFrCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBjYXNlICdDJzogewogICAgICAvLyAgICAgICBsZXQgS0lOR19ERUxUQT0gWy0xNiwgLTEsIDEsIDE2XTsKICAgICAgLy8gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpICsrKSB7CiAgICAgIC8vICAgICAgICAgbGV0IGRlbHRhID0gS0lOR19ERUxUQVtpXTsgICAgLy8g5b6X5Yiw5LiA5Liq5pa55ZCRCiAgICAgIC8vICAgICAgICAgbGV0IHNxRHN0ID0gc3FTcmMgKyBkZWx0YTsgICAgLy8g5LuO6LW354K5c3FTcmPlvIDlp4vvvIzmsr/nnYDmlrnlkJFkZWx0Yei1sOS4gOatpQogICAgICAvLyAgICAgICAgIHdoaWxlICh0aGlzLklOX0JPQVJEKHNxRHN0KSkgewogICAgICAvLyAgICAgICAgICAgaWYodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSA9PT0gMSkgewogICAgICAvLyAgICAgICAgICAgICAvL+e7iOeCueWkhOayoeacieaji+WtkAogICAgICAvLyAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5SQU5LX1koc3FEc3QpCiAgICAgIC8vICAgICAgICAgICAgIGxldCBpbWdJbmRleCA9IHNxRHN0IC0gNypyb3cgLTI5IC0gMQogICAgICAvLyAgICAgICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQogICAgICAvLyAgICAgICAgICAgICBzdGVwLnB1c2goZG9tVGVtcCkKICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgIC8vIOe7iOeCueWtmOWcqOaji+WtkO+8jOeCrumcgOimgee/u+WxsQogICAgICAvLyAgICAgICAgICAgICBicmVhazsKICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgIHNxRHN0ICs9IGRlbHRhOyAgICAgLy8g5rK/552A5pa55ZCRZGVsdGHlkJHliY3otbDkuIDmraUKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgc3FEc3QgKz0gZGVsdGE7ICAgICAgIC8vIOayv+edgOaWueWQkWRlbHRh5ZCR5YmN6LWw5LiA5q2lCiAgICAgIC8vICAgICAgICAgd2hpbGUgKHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7IC8vIOWmguaenHNxRHN05LuN5L2N5LqO5qOL55uY77yM6YKj5LmI5q2k5pe254Ku5bey57uP57+75bGx5LqGCiAgICAgIC8vICAgICAgICAgICBpZih0aGlzLmRpc3BsYXlDaGVzc1RlbXBbc3FEc3RdICYgMTYpIHsKICAgICAgLy8gICAgICAgICAgICAgLy/nu4jngrnlpITmmK/pu5Hmlrnmo4vlrZAKICAgICAgLy8gICAgICAgICAgICAgbGV0IHJvdyA9IHRoaXMuUkFOS19ZKHNxRHN0KQogICAgICAvLyAgICAgICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0gMjkgLSAxCiAgICAgIC8vICAgICAgICAgICAgIGxldCBkb21UZW1wID0gJCgnI3BvcycgKyBpbWdJbmRleCkKICAgICAgLy8gICAgICAgICAgICAgc3RlcC5wdXNoKGRvbVRlbXApCiAgICAgIC8vICAgICAgICAgICAgIGJyZWFrCiAgICAgIC8vICAgICAgICAgICB9CiAgICAgIC8vICAgICAgICAgICBzcURzdCArPSBkZWx0YTsKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgYnJlYWsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGNhc2UgJ1AnOiB7CiAgICAgIC8vICAgICAgIGxldCBQQVdOX2RlbHRhID0gWy0xNiwxLC0xXSAvL+WFteS4gOW8gOWni+WPquiDveWQkeS4iui1sCzov4fmsrPlkI7lj6/lkJHlt6Yv5Y+z6LWwCiAgICAgIC8vICAgICAgIGxldCBzcURzdCA9IHNxU3JjICsgUEFXTl9kZWx0YVswXQogICAgICAvLyAgICAgICBpZighKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcURzdF0gJiA4KSkgey8v57uI54K55aSE5LiN5piv57qi5pa55qOL5a2QLOWImei1sOazleWQiOazlQogICAgICAvLyAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkKICAgICAgLy8gICAgICAgICBsZXQgaW1nSW5kZXggPSBzcURzdCAtIDcqcm93IC0yOSAtIDEKICAgICAgLy8gICAgICAgICBsZXQgZG9tVGVtcCA9ICAkKCcjcG9zJyArIGltZ0luZGV4KQogICAgICAvLyAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIGlmKHNxU3JjIDwgMTMxICYmIHRoaXMuSU5fQk9BUkQoc3FEc3QpKSB7Ly/oi6XlhbXov4fmsrPkuoYo5q2k5aSE55qEMTMx5piv57uP6L+H6K6h566X5b6X5Yiw55qE6L+H5rKz5Li055WM5YC8CiAgICAgIC8vICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgLy8gICAgICAgICAgIHNxRHN0ID0gc3FTcmMgKyBQQVdOX2RlbHRhW2krMV0KICAgICAgLy8gICAgICAgICAgIGlmKCEodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW3NxRHN0XSAmIDgpKSB7CiAgICAgIC8vICAgICAgICAgICAgIGxldCByb3cgPSB0aGlzLlJBTktfWShzcURzdCkKICAgICAgLy8gICAgICAgICAgICAgbGV0IGltZ0luZGV4ID0gc3FEc3QgLSA3KnJvdyAtMjkgLSAxCiAgICAgIC8vICAgICAgICAgICAgIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCiAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucHVzaChkb21UZW1wKQogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgICBicmVhawogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgZGVmYXVsdDogc3RlcC5wdXNoKG51bGwpCiAgICAgIC8vICAgfQogICAgICAvLyAgIHJldHVybiBzdGVwCiAgICAgIC8vIH0KCiAgICB9LAoKICAgIC8q5qC55o2u5bGA6Z2i6K+E5Lyw5YC877yM6L+U5Zue5LiL5LiA5q2l6KaB6LWw55qE5qOL5a2QKi8KICAgIG1hY2hpbmVfZ2V0UGNUb0JlTW92ZWQ6IGZ1bmN0aW9uIG1hY2hpbmVfZ2V0UGNUb0JlTW92ZWQoKSB7CiAgICAgIHZhciBibGFja0FsbFBjID0gW10sCiAgICAgICAgICB3aGl0ZUFsbFBjID0gW107CiAgICAgIHZhciBkaXNwbGF5Q2hlc3NfZXZhbHVhdGUgPSB0aGlzLmRpc3BsYXlDaGVzc1RlbXAubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgIH0pOyAvL+ivpeW+queOr+W+l+WIsOaJgOacieWPr+S7pemAieaLqei1sOeahOaji+WtkO+8jOeahOS4gOe7tOWdkOaghwoKICAgICAgZm9yICh2YXIgc3FTcmMgaW4gdGhpcy5kaXNwbGF5Q2hlc3NUZW1wKSB7CiAgICAgICAgaWYgKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcVNyY10gJiAxNikgewogICAgICAgICAgYmxhY2tBbGxQYy5wdXNoKHNxU3JjKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheUNoZXNzVGVtcFtzcVNyY10gJiA4KSB3aGl0ZUFsbFBjLnB1c2goc3FTcmMpOwogICAgICB9CiAgICAgIC8q6K+l5b6q546v5Y+v5b6X5Yiw57qi5pa55qOL5a2Q5LiL5LiA5q2l55qE6LW354K56YCJ5oup5ZOq5LiqKi8KCgogICAgICB2YXIgcmFtSV93ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmxhY2tBbGxQYy5sZW5ndGgpOwogICAgICB2YXIgdmFsMiA9IDAsCiAgICAgICAgICBtYXhWYWwgPSAwLAogICAgICAgICAgbWF4VmFsMl9zcVNyY193ID0gYmxhY2tBbGxQY1tyYW1JX3ddLAogICAgICAgICAgRHN0RG9tOwoKICAgICAgZm9yICh2YXIgayBpbiB3aGl0ZUFsbFBjKSB7CiAgICAgICAgdmFyIHNxU3JjX3cgPSB3aGl0ZUFsbFBjW2tdOyAvL+afkOS4que6ouaWueaji+WtkOeahOi1t+eCueS4gOe7tOWdkOaghwogICAgICAgIC8vIGNvbnNvbGUubG9nKHNxU3JjMik7CgogICAgICAgIC8q6ZKI5a+56K+l57qi5qOL57qi5pa55b6X5Yiw5pyA5pyJ5Yip5LqO5a6D55qE6LWw5rOVKi8KCiAgICAgICAgRHN0RG9tID0gdGhpcy5tYWNoaW5lX2dldEV4YWN0U3RlcCh0aGlzLnNxVG9Eb20oc3FTcmNfdyksIHRoaXMuZGlzcGxheUNoZXNzVGVtcCk7CiAgICAgICAgaWYgKERzdERvbSA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTsgLy/lpoLmnpzpgY3ljobliLDnmoTmn5DkuKrnuqLmlrnmo4vlrZDkuIDnp43otbDms5Xpg73msqHmnInvvIzlsLHot7Pov4cKICAgICAgICAvLyBjb25zb2xlLmxvZyhEc3REb20pOwoKICAgICAgICAvKuivpee6ouaWueaji+WtkOacgOS9s+i1sOazleeahOe7iOeCueS4gOe7tOWdkOaghyovCgogICAgICAgIHZhciBzcURzdF93ID0gdGhpcy5kb21Ub1NxKERzdERvbSk7CiAgICAgICAgLyrlgYforr7or6XnuqLmo4vnp7vliqgqLwoKICAgICAgICB2YXIgdGVtcE51bSA9IHRoaXMubWFjaGluZV9zdXBwb3NlVG9Nb3ZlKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSwgc3FTcmNfdywgc3FEc3Rfdyk7CiAgICAgICAgdmFsMiA9IHRoaXMubWFjaGluZV9ldmFsdWF0ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpOyAvL+ivleaxguivhOS8sOWAvDIKCiAgICAgICAgLyrmgaLlpI3kuK3ovazmo4vnm5gqLwoKICAgICAgICB0aGlzLm1hY2hpbmVfcmVjb3ZlckZpY0JvYXJkKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSwgc3FTcmNfdywgc3FEc3RfdywgdGVtcE51bSk7CiAgICAgICAgLyrnq5nlnKjnuqLmlrnnmoTop5LluqbvvIzmiJHogq/lrprlipvmsYJ2YWwy5pyA5aSnKi8KCiAgICAgICAgaWYgKHZhbDIgPj0gbWF4VmFsKSB7CiAgICAgICAgICBtYXhWYWwgPSB2YWwyOyAvL+abtOaWsOacgOWkp+ivhOS8sOWAvAoKICAgICAgICAgIG1heFZhbDJfc3FTcmNfdyA9IHNxU3JjX3c7IC8v5pu05paw6K+E5Lyw5YC85pyA5aSn5pe26YCJ5oup55qE5qOL5a2QCiAgICAgICAgfSBlbHNlIHsvLyBtaW5NYXhWYWwyX3NxU3JjID0gYmxhY2tBbGxQY1tpXQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Vycm9yJyk7CiAgICAgICAgfSAvLyBicmVhawoKICAgICAgfSAvLyBjb25zb2xlLmxvZyh3aGl0ZUFsbFBjKTsKICAgICAgLy8gY29uc29sZS5sb2coZGlzcGxheUNoZXNzX2V2YWx1YXRlKTsKCgogICAgICB2YXIgeERzdERvbSA9IHRoaXMubWFjaGluZV9nZXRFeGFjdFN0ZXAodGhpcy5zcVRvRG9tKG1heFZhbDJfc3FTcmNfdyksIHRoaXMuZGlzcGxheUNoZXNzVGVtcCk7IC8vIGNvbnNvbGUubG9nKHhEc3REb20pOwoKICAgICAgaWYgKHhEc3REb20uYXR0cignaWQnKSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIHhBcnIgPSB0aGlzLm1hY2hpbmVfZ2V0U3RlcHModGhpcy5zcVRvRG9tKG1heFZhbDJfc3FTcmNfdyksIHRoaXMuZGlzcGxheUNoZXNzVGVtcCk7IC8vIGNvbnNvbGUubG9nKHhBcnIpOwoKICAgICAgICB4RHN0RG9tID0geEFycltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB4QXJyLmxlbmd0aCldOwogICAgICB9CgogICAgICBpZiAodGhpcy5zcVRvRG9tKG1heFZhbDJfc3FTcmNfdykuYXR0cignaWQnKSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbWF4VmFsMl9zcVNyY193ID0gd2hpdGVBbGxQY1tyYW1JX3ddOwogICAgICB9IC8vIGNvbnNvbGUubG9nKCfnuqLmlrnmnIDlpb3nmoTotbfngrk6JyArIHRoaXMuc3FUb0RvbShtYXhWYWwyX3NxU3JjX3cpLmF0dHIoJ2lkJykpOwogICAgICAvLyBjb25zb2xlLmxvZygn57qi5pa55pyA5aW955qE57uI54K5OicgKyB4RHN0RG9tLmF0dHIoJ2lkJykpOwogICAgICAvLyBjb25zb2xlLmxvZygn5YGH6K6+6K+l57qi5pa55qOL5a2Q6JC95a2Q5ZCO55qE6K+E5Lyw5YC877yaJyArIG1heFZhbCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSk7CgoKICAgICAgdmFyIHNxRHN0X2IsIHNxU3JjX2I7IC8v6buR5pa55pyA57uI5Yaz5a6a55qE6LW354K544CB57uI54K5CgogICAgICB2YXIgdmFsMSA9IDAsCiAgICAgICAgICBtaW5WYWwgPSBtYXhWYWw7IC8vIGxldCBtaW5NYXhWYWwyX3NxU3JjID0gYmxhY2tBbGxQY1swXS8v5L2/bWF4VmFsMuacgOWwj+aXtueahOaji+WtkOeahOi1t+eCueS4gOe7tOWdkOaghyjpu5Hmlrnmiafmo4spCgogICAgICBmb3IgKHZhciBpIGluIGJsYWNrQWxsUGMpIHsKICAgICAgICAvL+mBjeWOhuaJgOaciem7keajiwogICAgICAgIC8vIGNvbnNvbGUubG9nKGkpOwogICAgICAgIC8vIGlmKGkgPT0gOSkgYnJlYWsgLy/lhYjpgY3ljobliY0xMOmil+aji+WtkAogICAgICAgIHZhciBfc3FTcmMgPSBibGFja0FsbFBjW2ldOyAvL+afkOS4qum7keaWueaji+WtkOeahOi1t+eCueS4gOe7tOWdkOaghwogICAgICAgIC8vIGNvbnNvbGUubG9nKCfkuIDpu5Hmlrnmo4vlrZDnmoTotbfngrk6JyArIHRoaXMuc3FUb0RvbShzcVNyYykuYXR0cignaWQnKSk7CiAgICAgICAgLy8gY29uc29sZS5sb2coJ+S4gOm7keaWueaji+WtkOeahOe7iOeCue+8micpOwoKICAgICAgICAvKui1sOazleaVsOe7hO+8jOWFg+e0oOS4uuWvueixoeexu+WeiyovCgogICAgICAgIHZhciBzdGVwQXJyYXkgPSB0aGlzLm1hY2hpbmVfZ2V0U3RlcHModGhpcy5zcVRvRG9tKF9zcVNyYyksIHRoaXMuZGlzcGxheUNoZXNzVGVtcCkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KTsKCiAgICAgICAgZm9yICh2YXIgaiBpbiBzdGVwQXJyYXkpIHsKICAgICAgICAgIC8v6YGN5Y6G5p+Q6buR5qOL55qE5omA5pyJ6LWw5rOVCgogICAgICAgICAgLyror6Xpu5Hmlrnmo4vlrZDlhbbkuK3kuIDkuKrotbDms5XnmoTnu4jngrnvvIznmoTkuIDnu7TlnZDmoIcqLwogICAgICAgICAgdmFyIHNxRHN0ID0gdGhpcy5kb21Ub1NxKHN0ZXBBcnJheVtqXSk7IC8vIGNvbnNvbGUubG9nKHRoaXMuc3FUb0RvbShzcURzdCkpOwogICAgICAgICAgLy8KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5Y+v5Lul5Yiw6L6+5LiA5LiA5LiA5LiAJyk7CgogICAgICAgICAgLyrpu5Hmo4vnmoTomZrmi5/np7vliqgqLwoKICAgICAgICAgIHZhciB0ZW1wTnVtX2IgPSB0aGlzLm1hY2hpbmVfc3VwcG9zZVRvTW92ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUsIF9zcVNyYywgc3FEc3QpOyAvLyBjb25zb2xlLmxvZyhkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpOwoKICAgICAgICAgIC8q6YeN5paw5rGC5LiA5LiL5LmL5YmN56Gu5a6a55qE57qi5pa55qOL5a2Q55qE57uI54K5Ki8KCiAgICAgICAgICB2YXIgeHh4RHN0RG9tID0gdGhpcy5tYWNoaW5lX2dldEV4YWN0U3RlcCh0aGlzLnNxVG9Eb20obWF4VmFsMl9zcVNyY193KSwgZGlzcGxheUNoZXNzX2V2YWx1YXRlKTsKICAgICAgICAgIGlmICh4eHhEc3REb20gPT09IHVuZGVmaW5lZCkgY29udGludWU7IC8v5aaC5p6c5pS56LWw5rOV5rKh5pyJ5LqG77yM6Lez6L+HCgogICAgICAgICAgdmFyIF9zcURzdF93ID0gdGhpcy5kb21Ub1NxKHh4eERzdERvbSk7IC8vIGNvbnNvbGUubG9nKCfph43mlrDmsYLkuobnuqLmo4vnmoTnu4jngrnvvJonICsgdGhpcy5zcVRvRG9tKHNxRHN0X3cpLmF0dHIoJ2lkJykpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coJ+WPr+S7peWIsOi+vuS6jOS6jOS6jOS6jCcpOwoKCiAgICAgICAgICB2YXIgdGVtcE51bV93ID0gdGhpcy5tYWNoaW5lX3N1cHBvc2VUb01vdmUoZGlzcGxheUNoZXNzX2V2YWx1YXRlLCBtYXhWYWwyX3NxU3JjX3csIF9zcURzdF93KTsKICAgICAgICAgIHZhbDEgPSB0aGlzLm1hY2hpbmVfZXZhbHVhdGUoZGlzcGxheUNoZXNzX2V2YWx1YXRlKTsgLy/pu5HjgIHnuqLmlrnpg73lgYforr7otbDlrozlkI7vvIzmsYLor4TkvLDlgLwxCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5YGH6K6+6buR5qOL6JC95a2Q5ZCO55qE6K+E5Lyw5YC877yaJyArIHZhbDEpOwoKICAgICAgICAgIHRoaXMubWFjaGluZV9yZWNvdmVyRmljQm9hcmQoZGlzcGxheUNoZXNzX2V2YWx1YXRlLCBtYXhWYWwyX3NxU3JjX3csIF9zcURzdF93LCB0ZW1wTnVtX3cpOwogICAgICAgICAgdGhpcy5tYWNoaW5lX3JlY292ZXJGaWNCb2FyZChkaXNwbGF5Q2hlc3NfZXZhbHVhdGUsIF9zcVNyYywgc3FEc3QsIHRlbXBOdW1fYik7CiAgICAgICAgICAvKuermeWcqOm7keaWueeahOinkuW6pu+8jOaIkeiCr+WumuWKm+axgnZhbDHmnIDlsI8sbWF4VmFsMuacgOWwjyovCgogICAgICAgICAgaWYgKHZhbDEgPD0gbWluVmFsKSB7CiAgICAgICAgICAgIG1pblZhbCA9IHZhbDE7CiAgICAgICAgICAgIHNxRHN0X2IgPSBzcURzdDsKICAgICAgICAgICAgc3FTcmNfYiA9IF9zcVNyYzsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+acgOWwj+ivhOS8sOWAvCcgKyBtaW5WYWwpOwogICAgICAgICAgfSAvLyBlbHNlIGNvbnNvbGUubG9nKCdlcnInKTsKICAgICAgICAgIC8vIC8q6buR5pa56LWw5qOL56C05Z2P55qEKi8KCgogICAgICAgICAgaWYgKHRoaXMuc3FUb0RvbShfc3FTcmMpLmF0dHIoJ2lkJykgPT09ICdwb3MyJykgey8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0nKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGlzcGxheUNoZXNzX2V2YWx1YXRlKTsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGJyZWFrCgogICAgICB9IC8vIGNvbnNvbGUubG9nKCfpu5Hmo4vmnIDnu4jnmoTotbfngrk6Jyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc3FUb0RvbShzcVNyY19iKSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCfpu5Hmo4vmnIDnu4jnmoTnu4jngrk6Jyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc3FUb0RvbShzcURzdF9iKSk7CiAgICAgIC8vIHJldHVybiByYW5kb21TcmNEb20KCgogICAgICByZXR1cm4gW3RoaXMuc3FUb0RvbShzcVNyY19iKSwgdGhpcy5zcVRvRG9tKHNxRHN0X2IpXTsKICAgICAgLyrku6XkuIvkuLrmsqHmnInmkJzntKLnrpfms5XvvIznm7TmjqXpmo/mnLoqLwogICAgICAvLyBsZXQgcmFuZG9tSW5kZXgKICAgICAgLy8gbGV0IHJhbmRvbVNyY0RvbS8v6LW354K5LOe7iOeCuQogICAgICAvLyB3aGlsZSgxKSB7CiAgICAgIC8vICAgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBibGFja0FsbFBjLmxlbmd0aCkvL+maj+acuuaVsOWcqOaVsOe7hOS4reeahOe0ouW8leWAvAogICAgICAvLyAgIC8vIGxldCByYW5kb21TcSA9IGJsYWNrQWxsUGNbcmFuZG9tSW5kZXhdCiAgICAgIC8vICAgcmFuZG9tU3JjRG9tID0gdGhpcy5zcVRvRG9tKGJsYWNrQWxsUGNbcmFuZG9tSW5kZXhdKQogICAgICAvLyAgIGlmKHRoaXMubWFjaGluZV9nZXRTdGVwcyhyYW5kb21TcmNEb20pLmxlbmd0aCA+IDApCiAgICAgIC8vICAgICAvL+W9k+mAieS4reeahOaji+WtkOiHs+WwkeacieS4gOenjei1sOazleaXtu+8jOaJjemAgOWHuuW+queOr++8jOWQpuWImeS4gOebtOW+queOr+ebtOWIsOaJvuWIsOS4gOaji+WtkOWFtui1sOazleacieiHs+WwkeS4gOenjQogICAgICAvLyAgICAgYnJlYWsKICAgICAgLy8gfQogICAgfSwKCiAgICAvKuagueaNrui+k+WFpeeahOi1t+eCuWRvbeWvueixoe+8jOi/lOWbnuS9v+ivhOS8sOWAvOacgOWwj+eahOe7iOeCueeahGRvbeWvueixoSovCiAgICBtYWNoaW5lX2dldEV4YWN0U3RlcDogZnVuY3Rpb24gbWFjaGluZV9nZXRFeGFjdFN0ZXAoc3JjRG9tLCBhcnIpIHsKICAgICAgLy8gY29uc29sZS5sb2coYXJyKTsKICAgICAgdmFyIGFsbFdheXMsIGRpc3BsYXlDaGVzc19ldmFsdWF0ZTsKCiAgICAgIGlmIChhcnIgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGFsbFdheXMgPSB0aGlzLm1hY2hpbmVfZ2V0U3RlcHMoc3JjRG9tLCBhcnIpOwogICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZSA9IGFyci5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIC8v55So5LqO6K+E5Lyw5YiG5pWw55qE5Lit6L2s5qOL55uYKOS4jeiDveebtOaOpeWvueaVsOe7hOi1i+WAvO+8jOW6lOWvueWFg+e0oOi1i+WAvCkKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0pOwogICAgICB9IC8vIGVsc2UgewogICAgICAvLyAgIGFsbFdheXMgPSB0aGlzLm1hY2hpbmVfZ2V0U3RlcHMoc3JjRG9tKSAvL+ivpeaji+WtkOeahOaJgOaciei1sOazlSzmlbDnu4TlhYPntKDmmK9kb23lr7nosaEKICAgICAgLy8gICAvKuaji+ebmOS4rei9rOermSovCiAgICAgIC8vICAgZGlzcGxheUNoZXNzX2V2YWx1YXRlID0gdGhpcy5kaXNwbGF5Q2hlc3NUZW1wLm1hcCgoaXRlbSkgPT4gewogICAgICAvLyAgICAgLy/nlKjkuo7or4TkvLDliIbmlbDnmoTkuK3ovazmo4vnm5go5LiN6IO955u05o6l5a+55pWw57uE6LWL5YC877yM5bqU5a+55YWD57Sg6LWL5YC8KQogICAgICAvLyAgICAgcmV0dXJuIGl0ZW0KICAgICAgLy8gICB9KQogICAgICAvLyB9CgoKICAgICAgaWYgKCF0aGlzLnBsYXllclNpZGUpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygn6buR5pa55omn5qOL77yM5q2k5pe25rGC55qE5piv57qi5qOL55qE5pyA5L2z57uI54K5Jyk7CiAgICAgICAgLy/lpoLmnpzmmK/pu5Hmlrnmiafmo4sKICAgICAgICB2YXIgbWF4VmFsID0gdGhpcy5tYWNoaW5lX2V2YWx1YXRlKGFycik7CiAgICAgICAgdmFyIHJhbmRvbURzdEluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsV2F5cy5sZW5ndGgpOwogICAgICAgIHZhciBkc3REb20gPSBhbGxXYXlzW3JhbmRvbURzdEluZGV4XTsgLy/liJ3lp4vlsLHotYvkuIDkuKrpmo/mnLrlgLwKICAgICAgICAvLyBjb25zb2xlLmxvZyhzcmNEb20pOwoKICAgICAgICBmb3IgKHZhciBpIGluIGFsbFdheXMpIHsKICAgICAgICAgIHZhciBzcmNOdW0gPSBkaXNwbGF5Q2hlc3NfZXZhbHVhdGVbdGhpcy5kb21Ub1NxKHNyY0RvbSldOyAvL+i1t+eCueaji+WtkOS7o+ihqOeahE51beWAvAoKICAgICAgICAgIHZhciBzcURzdCA9IHRoaXMuZG9tVG9TcShhbGxXYXlzW2ldKTsgLy/nu4jngrnmo4vlrZDnmoTkuIDnu7TlnZDmoIcKCiAgICAgICAgICB2YXIgdGVtcE51bSA9IGRpc3BsYXlDaGVzc19ldmFsdWF0ZVtzcURzdF07IC8v5L+d5a2Y5LiA5LiL6JC95qOL5YmN57uI54K55aSE55qE5qOL5a2QTnVtCgogICAgICAgICAgLyrlgYforr7nu4jngrnokL3kuIvor6Xmo4vvvIzljbPnu4jngrnlpITnmoROdW3lgLzmlLnlj5gqLwoKICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVtzcURzdF0gPSBzcmNOdW07CiAgICAgICAgICB2YXIgY3VycmVudFZhbCA9IHRoaXMubWFjaGluZV9ldmFsdWF0ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpOyAvLyBjb25zb2xlLmxvZygn6K+E5Lyw5YC877yaJysgY3VycmVudFZhbCk7CgogICAgICAgICAgaWYgKHRoaXMubWFjaGluZV9ldmFsdWF0ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpID4gbWF4VmFsKSB7CiAgICAgICAgICAgIC8v5aaC5p6c6K+E5Lyw5YC85q+U5Y6f5p2l5aSnCiAgICAgICAgICAgIG1heFZhbCA9IHRoaXMubWFjaGluZV9ldmFsdWF0ZShkaXNwbGF5Q2hlc3NfZXZhbHVhdGUpOyAvL+abtOaWsOacgOWkp+WAvAoKICAgICAgICAgICAgZHN0RG9tID0gdGhpcy5zcVRvRG9tKHNxRHN0KTsgLy/mm7TmlrDnu4jngrkKICAgICAgICAgIH0gLy8gZWxzZSBjb25zb2xlLmxvZygn5q2k5qyh5b6q546v5rKh5pyJ5aSn55qEJyk7CgoKICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVt0aGlzLmRvbVRvU3Eoc3JjRG9tKV0gPSBzcmNOdW07IC8v5oGi5aSN5Lit6L2s5qOL55uYCgogICAgICAgICAgZGlzcGxheUNoZXNzX2V2YWx1YXRlW3NxRHN0XSA9IHRlbXBOdW07IC8v5oGi5aSN5Lit6L2s5qOL55uYCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZHN0RG9tOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBtaW5WYWwgPSB0aGlzLm1hY2hpbmVfZXZhbHVhdGUoYXJyKTsKCiAgICAgICAgdmFyIF9yYW5kb21Ec3RJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbFdheXMubGVuZ3RoKTsKCiAgICAgICAgdmFyIF9kc3REb20gPSBhbGxXYXlzW19yYW5kb21Ec3RJbmRleF07IC8v5Yid5aeL5bCx6LWL5LiA5Liq6ZqP5py65YC8CiAgICAgICAgLy8gY29uc29sZS5sb2coc3JjRG9tKTsKCiAgICAgICAgZm9yICh2YXIgX2kxNCBpbiBhbGxXYXlzKSB7CiAgICAgICAgICB2YXIgX3NyY051bSA9IGRpc3BsYXlDaGVzc19ldmFsdWF0ZVt0aGlzLmRvbVRvU3Eoc3JjRG9tKV07IC8v6LW354K55qOL5a2Q5Luj6KGo55qETnVt5YC8CgogICAgICAgICAgdmFyIF9zcURzdDE0ID0gdGhpcy5kb21Ub1NxKGFsbFdheXNbX2kxNF0pOyAvL+e7iOeCueaji+WtkOeahOS4gOe7tOWdkOaghwoKCiAgICAgICAgICB2YXIgX3RlbXBOdW0gPSBkaXNwbGF5Q2hlc3NfZXZhbHVhdGVbX3NxRHN0MTRdOyAvL+S/neWtmOS4gOS4i+iQveaji+WJjee7iOeCueWkhOeahOaji+WtkE51bQoKICAgICAgICAgIC8q5YGH6K6+57uI54K56JC95LiL6K+l5qOL77yM5Y2z57uI54K55aSE55qETnVt5YC85pS55Y+YKi8KCiAgICAgICAgICBkaXNwbGF5Q2hlc3NfZXZhbHVhdGVbX3NxRHN0MTRdID0gX3NyY051bTsKCiAgICAgICAgICB2YXIgX2N1cnJlbnRWYWwgPSB0aGlzLm1hY2hpbmVfZXZhbHVhdGUoZGlzcGxheUNoZXNzX2V2YWx1YXRlKTsKCiAgICAgICAgICBpZiAodGhpcy5tYWNoaW5lX2V2YWx1YXRlKGRpc3BsYXlDaGVzc19ldmFsdWF0ZSkgPCBtaW5WYWwpIHsKICAgICAgICAgICAgLy/lpoLmnpzor4TkvLDlgLzmr5Tljp/mnaXlsI8KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLScpOwogICAgICAgICAgICBtaW5WYWwgPSB0aGlzLm1hY2hpbmVfZXZhbHVhdGUoZGlzcGxheUNoZXNzX2V2YWx1YXRlKTsgLy/mm7TmlrDmnIDlsI/lgLwKCiAgICAgICAgICAgIF9kc3REb20gPSB0aGlzLnNxVG9Eb20oX3NxRHN0MTQpOyAvL+abtOaWsOe7iOeCuQogICAgICAgICAgfQoKICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVt0aGlzLmRvbVRvU3Eoc3JjRG9tKV0gPSBfc3JjTnVtOyAvL+aBouWkjeS4rei9rOaji+ebmAoKICAgICAgICAgIGRpc3BsYXlDaGVzc19ldmFsdWF0ZVtfc3FEc3QxNF0gPSBfdGVtcE51bTsgLy/mgaLlpI3kuK3ovazmo4vnm5gKICAgICAgICB9CgogICAgICAgIHJldHVybiBfZHN0RG9tOwogICAgICB9IC8vIGNvbnNvbGUubG9nKGRzdERvbSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKGFsbFdheXMpOwogICAgICAvLyBjb25zb2xlLmxvZygn5b2T5YmN6K+E5Lyw5YC8OicgKyB0aGlzLm1hY2hpbmVfZXZhbHVhdGUodGhpcy5kaXNwbGF5Q2hlc3NUZW1wKSk7CgogICAgfSwKCiAgICAvKuagueaNrui+k+WFpeeahOaVtOS4quaji+ebmOaVsOe7hO+8jOi/lOWbnue6ouaWueWIhuaVsC3pu5HmlrnliIbmlbDnmoTlgLzvvIzorrDkvZzjgIror4TkvLDlgLzjgIsqLwogICAgbWFjaGluZV9ldmFsdWF0ZTogZnVuY3Rpb24gbWFjaGluZV9ldmFsdWF0ZShhcnJheSkgewogICAgICB2YXIgd1ZhbCA9IHRoaXMubWFjaGluZV9nZXRWYWwoYXJyYXksIHRydWUpLAogICAgICAgICAgYlZhbCA9IHRoaXMubWFjaGluZV9nZXRWYWwoYXJyYXksIGZhbHNlKTsKICAgICAgcmV0dXJuIHdWYWwgLSBiVmFsOwogICAgfSwKCiAgICAvKuagueaNrui+k+WFpeeahOaVtOS4quaji+ebmOaVsOe7hO+8jOi/lOWbniovCiAgICBtYWNoaW5lX2dldFZhbDogZnVuY3Rpb24gbWFjaGluZV9nZXRWYWwoYXJyYXksIGlzV2hpdGUpIHsKICAgICAgdmFyIHZhbCA9IDA7CgogICAgICBmb3IgKHZhciBpIGluIGFycmF5KSB7CiAgICAgICAgaWYgKGlzV2hpdGUpIHsKICAgICAgICAgIC8v6Iul5piv57qi5pa5CiAgICAgICAgICBzd2l0Y2ggKGFycmF5W2ldKSB7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICB2YWwgKz0gMTAwMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICB2YWwgKz0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHZhbCArPSAyMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgdmFsICs9IDQ1OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICB2YWwgKz0gOTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIHZhbCArPSA0MDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgdmFsICs9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB2YWwgKz0gMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3dpdGNoIChhcnJheVtpXSkgewogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIHZhbCArPSAxMDAwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICB2YWwgKz0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIHZhbCArPSAyMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgdmFsICs9IDQ1OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICB2YWwgKz0gOTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIHZhbCArPSA0MDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgdmFsICs9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB2YWwgKz0gMDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWw7CiAgICB9LAoKICAgIC8q5qC55o2u6L6T5YWl55qE5Lit6L2s5qOL55uY5pWw57uE44CB6LW354K544CB57uI54K577yM5a6M5oiQ5Zyo6K+l5pWw57uE5LiK55qE6Jma5ouf56e75Yqo77yM6L+U5Zue5Lit6L2s5YC8Ki8KICAgIG1hY2hpbmVfc3VwcG9zZVRvTW92ZTogZnVuY3Rpb24gbWFjaGluZV9zdXBwb3NlVG9Nb3ZlKGFyciwgc3FTcmMsIHNxRHN0KSB7CiAgICAgIGlmIChhcnIgPT09IHVuZGVmaW5lZCB8fCBzcVNyYyA9PT0gdW5kZWZpbmVkIHx8IHNxRHN0ID09PSB1bmRlZmluZWQpIHJldHVybiAnRVJST1InOwogICAgICB2YXIgdGVtcCA9IGFycltzcURzdF07CiAgICAgIGFycltzcURzdF0gPSBhcnJbc3FTcmNdOwogICAgICBhcnJbc3FTcmNdID0gMTsKICAgICAgcmV0dXJuIHRlbXA7CiAgICB9LAoKICAgIC8q5qC55o2u6L6T5YWl55qE5Lit6L2s5qOL55uY5pWw57uE44CB5qOL5a2Q55qE6LW354K55ZKM57uI54K544CB5Lit6L2s5YC877yM5a6M5oiQ5Lit6L2s5qOL55uY55qE5oGi5aSNKi8KICAgIG1hY2hpbmVfcmVjb3ZlckZpY0JvYXJkOiBmdW5jdGlvbiBtYWNoaW5lX3JlY292ZXJGaWNCb2FyZChhcnIsIHNxU3JjLCBzcURzdCwgdGVtcCkgewogICAgICBpZiAoYXJyID09PSB1bmRlZmluZWQgfHwgc3FTcmMgPT09IHVuZGVmaW5lZCB8fCBzcURzdCA9PT0gdW5kZWZpbmVkIHx8IHRlbXAgPT09IHVuZGVmaW5lZCkgcmV0dXJuICdFUlJPUic7CiAgICAgIGFycltzcVNyY10gPSBhcnJbc3FEc3RdOwogICAgICBhcnJbc3FEc3RdID0gdGVtcDsKICAgIH0sCgogICAgLyror6Xlh73mlbDkvJrkvb/lsYDpnaLph43mlrDnu5jliLbvvIzov5Tlm54xLDIsMywwDQogICAgKiAx77ya6KGo56S66Kem5Y+R5LqG5YW157q/5Yi35pawDQogICAgKiAy77ya5pu/54i25LuO5YabDQogICAgKiAz77ya6I2J5pyo55qG5YW1Ki8KICAgIG1hY2hpbmVfcGFzc2l2ZVNraWxsczogZnVuY3Rpb24gbWFjaGluZV9wYXNzaXZlU2tpbGxzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIC8q5YW157q/5Yi35pawKi8KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAvKuWFtee6v+WIt+aWsCovCiAgICAgICAgdmFyIGFkdmlzb3JTdW0gPSAwLAogICAgICAgICAgICBpc0VhdGVuID0gZmFsc2U7CgogICAgICAgIHZhciBjdXJyZW50VmFsID0gX3RoaXM0Lm1hY2hpbmVfZXZhbHVhdGUoX3RoaXM0LmRpc3BsYXlDaGVzc1RlbXApLAogICAgICAgICAgICBpc1NraWxsMyA9IGZhbHNlOyAvLyBjb25zb2xlLmxvZyh0aGlzLm1hY2hpbmVfZ2V0VmFsKHRoaXMuZGlzcGxheUNoZXNzVGVtcCwgZmFsc2UpKTsKCgogICAgICAgIGZvciAodmFyIGkgaW4gX3RoaXM0LmRpc3BsYXlDaGVzc1RlbXApIHsKICAgICAgICAgIGlmIChfdGhpczQuZGlzcGxheUNoZXNzVGVtcFtpXSA9PT0gMjIpIHsKICAgICAgICAgICAgYWR2aXNvclN1bSsrOwogICAgICAgICAgfQogICAgICAgICAgLyrmm7/niLbku47lhpsqLwoKCiAgICAgICAgICBpZiAoX3RoaXM0LmRpc3BsYXlDaGVzc1RlbXBbaV0gJiA4ICYmIF90aGlzNC5kaXNwbGF5Q2hlc3NfT2xkW2ldICYgMTYpIHsKICAgICAgICAgICAgLy/oi6Xmn5DlpITkuIrkuIDmraXkuLrpu5Hmlrnmo4vlrZDvvIzkuIvkuIDmraXkuLrnuqLmlrnmo4vlrZDvvIzor7TmmI7pu5Hmlrnmo4vlrZDooqvlkIPmjokKICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSArIDAuMykpIHsKICAgICAgICAgICAgICAvL+mZhOWKoOadoeS7tu+8muWkp+amgjMwJeWHoOeOh+inpuWPkeabv+eItuS7juWGmwogICAgICAgICAgICAgIGlzRWF0ZW4gPSB0cnVlOwogICAgICAgICAgICAgIF90aGlzNC5kaXNwbGF5Q2hlc3NUZW1wW2ldID0gX3RoaXM0LmRpc3BsYXlDaGVzc19PbGRbaV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8q6I2J5pyo55qG5YW1Ki8KCgogICAgICAgICAgaWYgKGN1cnJlbnRWYWwgPiAxODAgfHwgX3RoaXM0Lm1hY2hpbmVfZ2V0VmFsKF90aGlzNC5kaXNwbGF5Q2hlc3NUZW1wLCBmYWxzZSkgPCAxMjIwKSB7CiAgICAgICAgICAgIC8v6buR5pa55oC75Lu35YC877ycMTIyMO+8jOWkp+e6puaNn+WkseS6huS4pOi9puS4gOeCrgogICAgICAgICAgICBpc1NraWxsMyA9IHRydWU7CgogICAgICAgICAgICBpZiAoX3RoaXM0LmRpc3BsYXlDaGVzc1RlbXBbaV0gPT09IDEpIHsKICAgICAgICAgICAgICBfdGhpczQuZGlzcGxheUNoZXNzVGVtcFtpXSA9IDIyOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYWR2aXNvclN1bSA8IDMpIHsKICAgICAgICAgIGZvciAodmFyIF9pMTUgPSAwLCBqID0gMDsgX2kxNSA8IDU7IF9pMTUrKywgaiArPSAyKSB7CiAgICAgICAgICAgIHZhciBkb21TcSA9IF90aGlzNC5kb21Ub1NxKCQoIiNwb3MiLmNvbmNhdCgyNyArIGopKSk7IC8vIGNvbnNvbGUubG9nKCQoYCNwb3MkezI3ICsgan1gKSk7CgoKICAgICAgICAgICAgX3RoaXM0LmRpc3BsYXlDaGVzc1RlbXBbZG9tU3FdID0gMjI7CiAgICAgICAgICB9CgogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NraWxsMScpLnBsYXkoKTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczQuZHJhd1dpdGhTcSgpOyAvLyBsZXQgY2hlc3NJbmZvID0gbnVsbAoKCiAgICAgICAgICAgIF90aGlzNC5jaGVzczFDbGljayhudWxsKTsKCiAgICAgICAgICAgIHJlc29sdmUoMSk7CiAgICAgICAgICB9LCAzMDAwKTsKICAgICAgICB9CiAgICAgICAgLyrmm7/niLbku47lhpsqLwogICAgICAgIGVsc2UgaWYgKGlzRWF0ZW4pIHsKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNza2lsbDInKS5wbGF5KCk7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM0LmRyYXdXaXRoU3EoKTsgLy8gbGV0IGNoZXNzSW5mbyA9IG51bGwKCgogICAgICAgICAgICBfdGhpczQuY2hlc3MxQ2xpY2sobnVsbCk7CgogICAgICAgICAgICByZXNvbHZlKDIpOwogICAgICAgICAgfSwgMzAwMCk7CiAgICAgICAgfQogICAgICAgIC8q6I2J5pyo55qG5YW1Ki8KICAgICAgICBlbHNlIGlmIChpc1NraWxsMykgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NraWxsMycpLnBsYXkoKTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczQuZHJhd1dpdGhTcSgpOyAvLyBsZXQgY2hlc3NJbmZvID0gbnVsbAoKCiAgICAgICAgICAgIF90aGlzNC5jaGVzczFDbGljayhudWxsKTsKCiAgICAgICAgICAgIHJlc29sdmUoMyk7CiAgICAgICAgICB9LCAzMDAwKTsKICAgICAgICB9IGVsc2UgcmVzb2x2ZSgwKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8q5qC55o2u6L6T5YWl55qEc3HvvIjkuIDnu7TlnZDmoIfvvInvvIzov5Tlm57mo4vnm5jkuK3or6Xmo4vlrZDnmoRkb23lr7nosaEqLwogICAgc3FUb0RvbTogZnVuY3Rpb24gc3FUb0RvbShzcSkgewogICAgICB2YXIgcm93ID0gdGhpcy5SQU5LX1koc3EpOwogICAgICB2YXIgaW1nSW5kZXggPSBzcSAtIDcgKiByb3cgLSAyOSAtIDE7IC8vIGxldCBkb21UZW1wID0gICQoJyNwb3MnICsgaW1nSW5kZXgpCgogICAgICByZXR1cm4gJCgnI3BvcycgKyBpbWdJbmRleCk7CiAgICB9LAoKICAgIC8q5qC55o2u6L6T5YWl55qEZG9t5a+56LGh77yM6L+U5Zuec3HvvIjkuIDnu7TlnZDmoIfvvIkqLwogICAgZG9tVG9TcTogZnVuY3Rpb24gZG9tVG9TcShkb20pIHsKICAgICAgdmFyIGltZ0luZGV4ID0gcGFyc2VJbnQoZG9tLmF0dHIoJ2lkJykuc2xpY2UoMykpICsgMTsKICAgICAgcmV0dXJuIHRoaXMuaW1nSW5kZXhUb1NxKGltZ0luZGV4KTsKICAgIH0sCgogICAgLyrkvKDlhaXkuIDnu7TlnZDmoIfvvIzlpoLmnpzlnKjmo4vnm5jlhoXvvIzov5Tlm550cnVlKi8KICAgIElOX0JPQVJEOiBmdW5jdGlvbiBJTl9CT0FSRChzcSkgewogICAgICByZXR1cm4gdGhpcy5JTl9CT0FSRF9bc3FdICE9PSAwOwogICAgfSwKCiAgICAvKuWIpOaWreaYr+WQpuWcqOS5neWuq+agvOWGhSzoi6XmmK/vvIzov5Tlm550cnVlKi8KICAgIElOX0ZPUlQ6IGZ1bmN0aW9uIElOX0ZPUlQoc3EpIHsKICAgICAgcmV0dXJuIHRoaXMuSU5fRk9SVF9bc3FdICE9PSAwOwogICAgfSwKCiAgICAvKuWwhuS6jOe7tOefqemYteWdkOagh+i9rOaNouS4uuS4gOe7tOefqemYteWdkOaghyAoeCx5KeWQqygwLDApKi8KICAgIENPT1JEX1hZOiBmdW5jdGlvbiBDT09SRF9YWSh4LCB5KSB7CiAgICAgIC8vIOWwhuS6jOe7tOefqemYteWdkOagh+i9rOaNouS4uuS4gOe7tOefqemYteWdkOaghyAoeCx5KeWQqygwLDApCiAgICAgIHJldHVybiB4ICsgKHkgPDwgNCk7CiAgICB9LAoKICAgIC8q5qC55o2u5LiA57u055+p6Zi177yM6I635Y+W5LqM57u055+p6Zi16KGM5pWwIOihjOaVsOS7jjDlvIDlp4sqLwogICAgUkFOS19ZOiBmdW5jdGlvbiBSQU5LX1koc3EpIHsKICAgICAgLy8g5qC55o2u5LiA57u055+p6Zi177yM6I635Y+W5LqM57u055+p6Zi16KGM5pWwIOihjOaVsOS7jjDlvIDlp4sKICAgICAgcmV0dXJuIHNxID4+IDQ7CiAgICB9LAoKICAgIC8q5qC55o2u5LiA57u055+p6Zi177yM6I635Y+W5LqM57u055+p6Zi15YiX5pWwKi8KICAgIEZJTEVfWDogZnVuY3Rpb24gRklMRV9YKHNxKSB7CiAgICAgIC8vIOagueaNruS4gOe7tOefqemYte+8jOiOt+WPluS6jOe7tOefqemYteWIl+aVsAogICAgICByZXR1cm4gc3EgJiAxNTsKICAgIH0sCgogICAgLyrliJ3lp4vljJbmo4vnm5jvvIzlvpfliLDmo4vnm5jkuIDlvIDlp4vnmoTluIPlsYAqLwogICAgaW5pdEJvYXJkOiBmdW5jdGlvbiBpbml0Qm9hcmQoKSB7CiAgICAgIHRoaXMuZGlzcGxheUNoZXNzVGVtcCA9IFtdOyAvL+a4heepuuS4gOS4i+aji+ebmAoKICAgICAgdGhpcy5GRU5BcnJheSA9IHRoaXMuRkVOLnNwbGl0KCcnKTsgLy/lsIZGRU7lrZfnrKbkuLLovazkuLrmlbDnu4QKCiAgICAgIHRoaXMuRkVOdG9Cb2FyZCh0aGlzLkZFTkFycmF5KTsgLy/lsIZGRU7kuLIoYXJyYXnlnosp6L2s5YyW5Li65LiA57u05pWw57uE5b2i5byP77yM5bm25LiU5a2X56ym5YWD57Sg5pig5bCE5Li65pW05Z6LLOS/neWtmOWcqHRoaXMuZGlzcGxheUNoZXNzVGVtcAoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykgewogICAgICAgIC8v5bCG5qOL55uY5aSW5YWD57Sg6K6+572u5Li6bnVsbAogICAgICAgIGlmICghdGhpcy5JTl9CT0FSRChpKSkgewogICAgICAgICAgdGhpcy5kaXNwbGF5Q2hlc3NUZW1wW2ldID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBzdGFydCA9IHRoaXMuQ09PUkRfWFkoMywgMyk7IC8vNTEs5b6q546v5byA5aeL5aSECgogICAgICB2YXIgZW5kID0gdGhpcy5DT09SRF9YWSgxMSwgMTIpOyAvLzIwM++8jOW+queOr+e7k+adn+WkhAogICAgICAvLyBsZXQgaW1nRG9tQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmltZ0JveCBpbWcnKQoKICAgICAgLyp0YWfnlKjkvZzorrDlvZXmlofku7blkI3lhbPplK7kv6Hmga/vvJsNCiAgICAgICoqcm935piv5b2T5YmN5b6q546v57Si5byV5YC8aeWvueW6lOeahOS6jOe7tOWdkOagh+eahOihjOaVsCxjb2zmmK/liJfmlbDvvJsNCiAgICAgICoqaW1nSW5kZXjnlKjkuo7orrDlvZVp5a+55bqU56ys5Yeg5Liq5Zu+54mHKi8KCiAgICAgIHZhciB0YWcgPSAnJywKICAgICAgICAgIHJvdyA9IDAsCiAgICAgICAgICBpbWdJbmRleCA9IDAsCiAgICAgICAgICBjb2wgPSAwOwoKICAgICAgZm9yICh2YXIgX2kxNiA9IHN0YXJ0OyBfaTE2IDw9IGVuZDsgX2kxNisrKSB7CiAgICAgICAgaWYgKHRoaXMuSU5fQk9BUkQoX2kxNikpIHsKICAgICAgICAgIHN3aXRjaCAodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW19pMTZdKSB7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICB0YWcgPSAnSyc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgdGFnID0gJ0EnOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICB0YWcgPSAnQic7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHRhZyA9ICdOJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgdGFnID0gJ1InOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICB0YWcgPSAnQyc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIHRhZyA9ICdQJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgdGFnID0gJ2tfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgdGFnID0gJ2FfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgdGFnID0gJ2JfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgdGFnID0gJ25fJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgdGFnID0gJ3JfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgdGFnID0gJ2NfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgdGFnID0gJ3BfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCc7CiAgICAgICAgICB9CgogICAgICAgICAgcm93ID0gdGhpcy5SQU5LX1koX2kxNik7CiAgICAgICAgICBjb2wgPSB0aGlzLkZJTEVfWChfaTE2KTsKICAgICAgICAgIGltZ0luZGV4ID0gX2kxNiAtIDcgKiByb3cgLSAzMDsKICAgICAgICAgIHZhciBpbWdTcmNTdHIgPSAiL2ltZy9jaGVzcy8iLmNvbmNhdCh0YWcsICIucG5nIik7CiAgICAgICAgICB0aGlzLmltZ0RvbUFycltpbWdJbmRleF0uc3JjID0gaW1nU3JjU3RyOwogICAgICAgICAgLyrmuIXnqbrlj5jph48qLwoKICAgICAgICAgIHRhZyA9ICcnOwogICAgICAgICAgcm93ID0gMDsKICAgICAgICAgIGltZ0luZGV4ID0gMDsKICAgICAgICB9IGVsc2UgY29udGludWU7CiAgICAgIH0KICAgIH0sCgogICAgLyrlsIZGRU7kuLIoYXJyYXnlnosp6L2s5YyW5Li65LiA57u05pWw57uE5b2i5byP77yM5bm25LiU5a2X56ym5YWD57Sg5pig5bCE5Li65pW05Z6LLOS/neWtmOWcqHRoaXMuZGlzcGxheUNoZXNzVGVtcCovCiAgICBGRU50b0JvYXJkOiBmdW5jdGlvbiBGRU50b0JvYXJkKEZFTkFycmF5KSB7CiAgICAgIHZhciB4ID0gMywKICAgICAgICAgIHkgPSAzOwoKICAgICAgZm9yICh2YXIgaSBpbiBGRU5BcnJheSkgewogICAgICAgIHZhciBjaCA9IEZFTkFycmF5W2ldOwoKICAgICAgICBpZiAoY2ggPT09ICcvJykgewogICAgICAgICAgLy/mjaLooYwKICAgICAgICAgIHkrKzsKICAgICAgICB9CgogICAgICAgIGlmICh5ID4gMTIpIGJyZWFrOwogICAgICAgIGlmICh4ID4gMTEpIHggPSAzO2Vsc2UgaWYgKGNoID49ICcxJyAmJiBjaCA8PSAnOScpIHsKICAgICAgICAgIC8v5Ye6546w56m65L2NCiAgICAgICAgICB4ICs9IHBhcnNlSW50KGNoKTsKICAgICAgICB9IGVsc2UgaWYgKGNoID49ICdhJyAmJiBjaCA8PSAneicpIHsKICAgICAgICAgIC8v57qi5pa55qOL5a2Q5oiW6buR5pa55qOL5a2QCiAgICAgICAgICB2YXIgaW5kZXggPSB4ICsgKHkgPDwgNCk7CiAgICAgICAgICB0aGlzLmRpc3BsYXlDaGVzc1RlbXBbaW5kZXhdID0gdGhpcy5GRU5DaGFyVG9OdW0oY2gpOwogICAgICAgICAgeCsrOwogICAgICAgIH0gZWxzZSBpZiAoY2ggPj0gJ0EnICYmIGNoIDw9ICdaJykgewogICAgICAgICAgdmFyIF9pbmRleCA9IHggKyAoeSA8PCA0KTsKCiAgICAgICAgICB0aGlzLmRpc3BsYXlDaGVzc1RlbXBbX2luZGV4XSA9IHRoaXMuRkVOQ2hhclRvTnVtKGNoKTsKICAgICAgICAgIHgrKzsKICAgICAgICB9IGVsc2UgY29uc29sZS5sb2coJ2VycicpOwogICAgICB9CiAgICB9LAoKICAgIC8q5bCG5qOL5a2Q5a2X56ym6L2s5oiQ5a+55bqU55qE5pW05pWwKi8KICAgIEZFTkNoYXJUb051bTogZnVuY3Rpb24gRkVOQ2hhclRvTnVtKGl0ZW0pIHsKICAgICAgLy/lsIbmo4vlrZDlrZfnrKbovazmiJDlr7nlupTnmoTmlbTmlbAKICAgICAgc3dpdGNoIChpdGVtKSB7CiAgICAgICAgY2FzZSAnSyc6CiAgICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiA4OwogICAgICAgICAgfQoKICAgICAgICBjYXNlICdBJzoKICAgICAgICAgIHJldHVybiA5OwoKICAgICAgICBjYXNlICdCJzoKICAgICAgICAgIHJldHVybiAxMDsKCiAgICAgICAgY2FzZSAnTic6CiAgICAgICAgICByZXR1cm4gMTE7CgogICAgICAgIGNhc2UgJ1InOgogICAgICAgICAgcmV0dXJuIDEyOwoKICAgICAgICBjYXNlICdDJzoKICAgICAgICAgIHJldHVybiAxMzsKCiAgICAgICAgY2FzZSAnUCc6CiAgICAgICAgICByZXR1cm4gMTQ7CgogICAgICAgIGNhc2UgJ2snOgogICAgICAgICAgcmV0dXJuIDE2OwoKICAgICAgICBjYXNlICdhJzoKICAgICAgICAgIHJldHVybiAxNzsKCiAgICAgICAgY2FzZSAnYic6CiAgICAgICAgICByZXR1cm4gMTg7CgogICAgICAgIGNhc2UgJ24nOgogICAgICAgICAgcmV0dXJuIDE5OwoKICAgICAgICBjYXNlICdyJzoKICAgICAgICAgIHJldHVybiAyMDsKCiAgICAgICAgY2FzZSAnYyc6CiAgICAgICAgICByZXR1cm4gMjE7CgogICAgICAgIGNhc2UgJ3AnOgogICAgICAgICAgcmV0dXJuIDIyOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICdlcnInOwogICAgICB9CiAgICB9LAoKICAgIC8q5qC55o2u5a2X56ym77yM6L+U5Zue5Zu+54mH5paH5Lu25ZCNKOeahOWFs+mUruS/oeaBrykqLwogICAgRkVOQ2hhclRvSW1nOiBmdW5jdGlvbiBGRU5DaGFyVG9JbWcoY2gpIHsKICAgICAgc3dpdGNoIChjaCkgewogICAgICAgIGNhc2UgJ0snOgogICAgICAgICAgewogICAgICAgICAgICByZXR1cm4gJ0snOwogICAgICAgICAgfQoKICAgICAgICBjYXNlICdBJzoKICAgICAgICAgIHJldHVybiAnQSc7CgogICAgICAgIGNhc2UgJ0InOgogICAgICAgICAgcmV0dXJuICdCJzsKCiAgICAgICAgY2FzZSAnTic6CiAgICAgICAgICByZXR1cm4gJ04nOwoKICAgICAgICBjYXNlICdSJzoKICAgICAgICAgIHJldHVybiAnUic7CgogICAgICAgIGNhc2UgJ0MnOgogICAgICAgICAgcmV0dXJuICdDJzsKCiAgICAgICAgY2FzZSAnUCc6CiAgICAgICAgICByZXR1cm4gJ1AnOwoKICAgICAgICBjYXNlICdrJzoKICAgICAgICAgIHJldHVybiAna18nOwoKICAgICAgICBjYXNlICdhJzoKICAgICAgICAgIHJldHVybiAnYV8nOwoKICAgICAgICBjYXNlICdiJzoKICAgICAgICAgIHJldHVybiAnYl8nOwoKICAgICAgICBjYXNlICduJzoKICAgICAgICAgIHJldHVybiAnbl8nOwoKICAgICAgICBjYXNlICdyJzoKICAgICAgICAgIHJldHVybiAncl8nOwoKICAgICAgICBjYXNlICdjJzoKICAgICAgICAgIHJldHVybiAnY18nOwoKICAgICAgICBjYXNlICdwJzoKICAgICAgICAgIHJldHVybiAncF8nOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICdlcnInOwogICAgICB9CiAgICB9LAoKICAgIC8q5qC55o2u5qOL5a2Q5Zu+54mH5paH5Lu25ZCN77yM6L+U5Zue5qOL5a2Q5Lit5paH5a2X56ym5LiyKi8KICAgIEltZ05hbWVUb0NoZXNzTmFtZTogZnVuY3Rpb24gSW1nTmFtZVRvQ2hlc3NOYW1lKGltZ05hbWUpIHsKICAgICAgc3dpdGNoIChpbWdOYW1lKSB7CiAgICAgICAgY2FzZSAnSyc6CiAgICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiAn57qi5pa5X+W4hSc7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgJ0EnOgogICAgICAgICAgcmV0dXJuICfnuqLmlrlf5aOrJzsKCiAgICAgICAgY2FzZSAnQic6CiAgICAgICAgICByZXR1cm4gJ+e6ouaWuV/nm7gnOwoKICAgICAgICBjYXNlICdOJzoKICAgICAgICAgIHJldHVybiAn57qi5pa5X+mprCc7CgogICAgICAgIGNhc2UgJ1InOgogICAgICAgICAgcmV0dXJuICfnuqLmlrlf6L2mJzsKCiAgICAgICAgY2FzZSAnQyc6CiAgICAgICAgICByZXR1cm4gJ+e6ouaWuV/ngq4nOwoKICAgICAgICBjYXNlICdQJzoKICAgICAgICAgIHJldHVybiAn57qi5pa5X+WFtSc7CgogICAgICAgIGNhc2UgJ2snOgogICAgICAgICAgcmV0dXJuICfpu5Hmlrlf5bCGJzsKCiAgICAgICAgY2FzZSAnYSc6CiAgICAgICAgICByZXR1cm4gJ+m7keaWuV/ku5UnOwoKICAgICAgICBjYXNlICdiJzoKICAgICAgICAgIHJldHVybiAn6buR5pa5X+ixoSc7CgogICAgICAgIGNhc2UgJ24nOgogICAgICAgICAgcmV0dXJuICfpu5Hmlrlf6amsJzsKCiAgICAgICAgY2FzZSAncic6CiAgICAgICAgICByZXR1cm4gJ+m7keaWuV/ovaYnOwoKICAgICAgICBjYXNlICdjJzoKICAgICAgICAgIHJldHVybiAn6buR5pa5X+eCric7CgogICAgICAgIGNhc2UgJ3AnOgogICAgICAgICAgcmV0dXJuICfpu5Hmlrlf5Y2SJzsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAn56m6JzsKICAgICAgfQogICAgfSwKCiAgICAvKuagueaNrkZFTuS4sue7mOWItuaji+ebmCovCiAgICBkcmF3V2l0aEZFTjogZnVuY3Rpb24gZHJhd1dpdGhGRU4oRkVOKSB7CiAgICAgIHRoaXMuRkVOQXJyYXkgPSBbXTsKICAgICAgdGhpcy5GRU5BcnJheSA9IEZFTi5zcGxpdCgnJyk7CiAgICAgIHRoaXMuZGlzcGxheUNoZXNzVGVtcCA9IFtdOwogICAgICB0aGlzLkZFTnRvQm9hcmQodGhpcy5GRU5BcnJheSk7IC8vIGNvbnNvbGUubG9nKHRoaXMuZGlzcGxheUNoZXNzVGVtcCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7CiAgICAgICAgLy/lsIbmo4vnm5jlpJblhYPntKDorr7nva7kuLpudWxsCiAgICAgICAgaWYgKCF0aGlzLklOX0JPQVJEKGkpKSB7CiAgICAgICAgICB0aGlzLmRpc3BsYXlDaGVzc1RlbXBbaV0gPSBudWxsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5DT09SRF9YWSgzLCAzKTsgLy81MSzlvqrnjq/lvIDlp4vlpIQKCiAgICAgIHZhciBlbmQgPSB0aGlzLkNPT1JEX1hZKDExLCAxMik7IC8vMjAz77yM5b6q546v57uT5p2f5aSECiAgICAgIC8vIHRoaXMuaW1nRG9tQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmltZ0JveCBpbWcnKQoKICAgICAgLyp0YWfnlKjkvZzorrDlvZXmlofku7blkI3lhbPplK7kv6Hmga/vvJsNCiAgICAgICoqcm935piv5b2T5YmN5b6q546v57Si5byV5YC8aeWvueW6lOeahOS6jOe7tOWdkOagh+eahOihjOaVsCxjb2zmmK/liJfmlbDvvJsNCiAgICAgICoqaW1nSW5kZXjnlKjkuo7orrDlvZVp5a+55bqU56ys5Yeg5Liq5Zu+54mHKi8KCiAgICAgIHZhciB0YWcgPSAnJywKICAgICAgICAgIHJvdyA9IDAsCiAgICAgICAgICBpbWdJbmRleCA9IDAsCiAgICAgICAgICBjb2wgPSAwOwoKICAgICAgZm9yICh2YXIgX2kxNyA9IHN0YXJ0OyBfaTE3IDw9IGVuZDsgX2kxNysrKSB7CiAgICAgICAgaWYgKHRoaXMuSU5fQk9BUkQoX2kxNykpIHsKICAgICAgICAgIHN3aXRjaCAodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW19pMTddKSB7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICB0YWcgPSAnSyc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgdGFnID0gJ0EnOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICB0YWcgPSAnQic7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHRhZyA9ICdOJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgdGFnID0gJ1InOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICB0YWcgPSAnQyc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIHRhZyA9ICdQJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgdGFnID0gJ2tfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgdGFnID0gJ2FfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgdGFnID0gJ2JfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgdGFnID0gJ25fJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgdGFnID0gJ3JfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgdGFnID0gJ2NfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgdGFnID0gJ3BfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCc7CiAgICAgICAgICB9CgogICAgICAgICAgcm93ID0gdGhpcy5SQU5LX1koX2kxNyk7CiAgICAgICAgICBjb2wgPSB0aGlzLkZJTEVfWChfaTE3KTsKICAgICAgICAgIGltZ0luZGV4ID0gX2kxNyAtIDcgKiByb3cgLSAzMDsKICAgICAgICAgIHZhciBpbWdTcmNTdHIgPSAiL2ltZy9jaGVzcy8iLmNvbmNhdCh0YWcsICIucG5nIik7CiAgICAgICAgICB0aGlzLmltZ0RvbUFycltpbWdJbmRleF0uc3JjID0gaW1nU3JjU3RyOyAvLyDph43mlrDmuLLmn5Pmo4vlrZDlm77niYcKCiAgICAgICAgICAvKua4heepuuWPmOmHjyovCgogICAgICAgICAgdGFnID0gJyc7CiAgICAgICAgICByb3cgPSAwOwogICAgICAgICAgaW1nSW5kZXggPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvKuagueaNrmRpc3BsYXlDaGVzc1RlbXDph43mlrDnu5jliLblsYDpnaIqLwogICAgZHJhd1dpdGhTcTogZnVuY3Rpb24gZHJhd1dpdGhTcSgpIHsKICAgICAgdGhpcy4kZW1pdCgnYm9hcmQtdXBkYXRlJywgdGhpcy5kaXNwbGF5Q2hlc3NUZW1wKTsKICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5DT09SRF9YWSgzLCAzKTsgLy81MSzlvqrnjq/lvIDlp4vlpIQKCiAgICAgIHZhciBlbmQgPSB0aGlzLkNPT1JEX1hZKDExLCAxMik7IC8vMjAz77yM5b6q546v57uT5p2f5aSECiAgICAgIC8vIHRoaXMuaW1nRG9tQXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmltZ0JveCBpbWcnKQoKICAgICAgLyp0YWfnlKjkvZzorrDlvZXmlofku7blkI3lhbPplK7kv6Hmga/vvJsNCiAgICAgICoqcm935piv5b2T5YmN5b6q546v57Si5byV5YC8aeWvueW6lOeahOS6jOe7tOWdkOagh+eahOihjOaVsCxjb2zmmK/liJfmlbDvvJsNCiAgICAgICoqaW1nSW5kZXjnlKjkuo7orrDlvZVp5a+55bqU56ys5Yeg5Liq5Zu+54mHKi8KCiAgICAgIHZhciB0YWcgPSAnJywKICAgICAgICAgIHJvdyA9IDAsCiAgICAgICAgICBpbWdJbmRleCA9IDAsCiAgICAgICAgICBjb2wgPSAwOwoKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuSU5fQk9BUkQoaSkpIHsKICAgICAgICAgIHN3aXRjaCAodGhpcy5kaXNwbGF5Q2hlc3NUZW1wW2ldKSB7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICB0YWcgPSAnSyc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgdGFnID0gJ0EnOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICB0YWcgPSAnQic7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHRhZyA9ICdOJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgdGFnID0gJ1InOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICB0YWcgPSAnQyc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIHRhZyA9ICdQJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgdGFnID0gJ2tfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgdGFnID0gJ2FfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgdGFnID0gJ2JfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgdGFnID0gJ25fJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgdGFnID0gJ3JfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgdGFnID0gJ2NfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgdGFnID0gJ3BfJzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGFnID0gJ1VOZXhpc3QnOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0YWcgPSAnVU5leGlzdCc7CiAgICAgICAgICB9CgogICAgICAgICAgcm93ID0gdGhpcy5SQU5LX1koaSk7CiAgICAgICAgICBjb2wgPSB0aGlzLkZJTEVfWChpKTsKICAgICAgICAgIGltZ0luZGV4ID0gaSAtIDcgKiByb3cgLSAzMDsKICAgICAgICAgIHZhciBpbWdTcmNTdHIgPSAiL2ltZy9jaGVzcy8iLmNvbmNhdCh0YWcsICIucG5nIik7CiAgICAgICAgICB0aGlzLmltZ0RvbUFycltpbWdJbmRleF0uc3JjID0gaW1nU3JjU3RyOyAvLyDph43mlrDmuLLmn5Pmo4vlrZDlm77niYcKCiAgICAgICAgICAvKua4heepuuWPmOmHjyovCgogICAgICAgICAgdGFnID0gJyc7CiAgICAgICAgICByb3cgPSAwOwogICAgICAgICAgaW1nSW5kZXggPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvKuWwhuesrOWHoOS4quWbvueJh+agh+etvui9rOaNouS4unNxKi8KICAgIGltZ0luZGV4VG9TcTogZnVuY3Rpb24gaW1nSW5kZXhUb1NxKGltZ0luZGV4KSB7CiAgICAgIHZhciByb3cgPSBNYXRoLmZsb29yKChpbWdJbmRleCAtIDEpIC8gOSkgKyAzOwogICAgICByZXR1cm4gaW1nSW5kZXggKyAzMCArIDcgKiByb3cgLSAxOyAvLyBjb25zb2xlLmxvZygnc3E6JyArIHNxKTsKICAgIH0sCgogICAgLyrlpoLmnpzku47otbfngrlzcVNyY+WIsOe7iOeCuXNxRHN05rKh5pyJ6L+H5rKz77yM5YiZ6L+U5ZuedHJ1Ze+8m+WQpuWImei/lOWbnmZhbHNlKi8KICAgIFNBTUVfSEFMRjogZnVuY3Rpb24gU0FNRV9IQUxGKHNxU3JjLCBzcURzdCkgewogICAgICAvLyDlpoLmnpzku47otbfngrlzcVNyY+WIsOe7iOeCuXNxRHN05rKh5pyJ6L+H5rKz77yM5YiZ6L+U5ZuedHJ1Ze+8m+WQpuWImei/lOWbnmZhbHNlCiAgICAgIHJldHVybiAoKHNxU3JjIF4gc3FEc3QpICYgMHg4MCkgPT09IDA7CiAgICB9LAogICAgc3VyZUlucHV0OiBmdW5jdGlvbiBzdXJlSW5wdXQoKSB7CiAgICAgIHZhciBuZXdGRU4gPSB0aGlzLnVzZXJJbnB1dDsKICAgICAgdGhpcy5kcmF3V2l0aEZFTihuZXdGRU4pOwogICAgfSwKICAgIHRlc3QyOiBmdW5jdGlvbiB0ZXN0MigpIHsKICAgICAgdmFyIG5ld0ZFTiA9ICcxbjFha2FibnIvcjgvOS85LzkvOS9QMVAxUDFQMVAvMUM1QzEvOS9STkJBS0FCTlInOwogICAgICB0aGlzLmRyYXdXaXRoRkVOKG5ld0ZFTik7CiAgICB9LAogICAgYnRuQ2xpY2syOiBmdW5jdGlvbiBidG5DbGljazIoKSB7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hdWRpb0J4IGxpID4gYXVkaW8nKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZS5wbGF5KCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNoZXNzMUNsaWNrOiBmdW5jdGlvbiBjaGVzczFDbGljayhpbmZvKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGluZm8pOwogICAgICB0aGlzLiRlbWl0KCdzaG93JywgaW5mbyk7CiAgICB9CiAgfQp9Ow=="},null]}