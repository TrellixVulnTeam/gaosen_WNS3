{"remainingRequest":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\CodingForFun\\Vue\\gaosen\\docs\\.vuepress\\components\\prize.vue?vue&type=style&index=0&id=0aac911a&scoped=true&lang=css&","dependencies":[{"path":"D:\\CodingForFun\\Vue\\gaosen\\docs\\.vuepress\\components\\prize.vue","mtime":1651991163876},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\css-loader\\dist\\cjs.js","mtime":1648514419984},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1648514420974},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\postcss-loader\\src\\index.js","mtime":1648514420186},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648514419946},{"path":"D:\\CodingForFun\\Vue\\gaosen\\node_modules\\vue-loader\\lib\\index.js","mtime":1648514420515}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmJ4IHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KICAubXNnLCAudXNlck51bSB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogOXB4Ow0KICAgIGxlZnQ6IDUwcHg7DQogICAgei1pbmRleDogMjsNCiAgICBvcGFjaXR5OiAwOw0KICAgIC8qZGlzcGxheTogbm9uZTsqLw0KICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICAgIGNvbG9yOiBncmV5Ow0KICB9DQogIC51c2VyTnVtIHsNCiAgICAvKm9wYWNpdHk6IDE7Ki8NCiAgICB0b3A6IC00NXB4Ow0KICB9DQogIC5tc2cgaSwgLnVzZXJOdW0gaSB7DQogICAgbWFyZ2luLXJpZ2h0OiA1cHg7DQogIH0NCg0K"},{"version":3,"sources":["prize.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"prize.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\r\n  <div class=\"bx\">\r\n    <div class=\"msg\"><i class=\"iconfont reco-tongzhi\"></i>{{msg}}</div>\r\n    <div class=\"userNum\"><i class=\"iconfont reco-document\"></i>现在你拥有的数字是：\r\n      {{userNumbers.join('-')}}</div>\r\n    <LuckyGrid\r\n        ref=\"myLucky\"\r\n        rows=\"5\"\r\n        cols=\"6\"\r\n        :width=\"prizeWidth\"\r\n        :height=\"prizeHeight\"\r\n        :prizes=\"prizes\"\r\n        :blocks=\"blocks\"\r\n        :buttons=\"buttons\"\r\n        :default-config=\"defaultConfig\"\r\n        :active-style=\"activeStyle\"\r\n        @start=\"startCallback\"\r\n        @end=\"endCallback\"\r\n    />\r\n    <button @click=\"showMsg\">按钮</button>\r\n    <button @click=\"seriesDraw\">\r\n      <i class=\"iconfont reco-up\"></i>\r\n      五连抽\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueLuckyCanvas from '@lucky-canvas/vue'\r\nimport Vue from 'vue'\r\nVue.use(VueLuckyCanvas)\r\n\r\nconst prizeImg = {\r\n  src: 'https://cdn.jsdelivr.net/gh/buuing/cdn/demo/prize.png',\r\n  width: '50%',\r\n  top: '25%'\r\n}\r\nconst cellImg = {\r\n  src: 'https://cdn.jsdelivr.net/gh/buuing/cdn/demo/cell-80.png',\r\n  width: '100%',\r\n  height: '100%'\r\n}\r\nconst btnImg = {\r\n  src: '/img/btn.png',\r\n  height: '80%',\r\n  width: '80%',\r\n  top: '10%'\r\n}\r\nconst bg = {\r\n  src: '/img/prizeBg.png',\r\n  height: '100%',\r\n  // width: '100%',\r\n}\r\nexport default {\r\n  name: \"prize\",\r\n  data () {\r\n    return {\r\n      msg: '',\r\n      isShowMsg: false,\r\n      prizeWidth: '500',\r\n      prizeHeight: '500',\r\n      blocks: [\r\n        { padding: '50px', background: '#869cfa', imgs: [bg] },\r\n        { padding: '10px', background: '#e9e8fe' },\r\n      ],\r\n      prizes: [\r\n        { x: 0, y: 0, imgs: [cellImg], fonts: [{text: '1', top: '35%',fontWeight: '600'}] },\r\n        { x: 1, y: 0, imgs: [cellImg], fonts: [{text: '2', top: '35%',fontWeight: '600'}] },\r\n        { x: 2, y: 0, imgs: [cellImg], fonts: [{text: '3', top: '35%',fontWeight: '600'}] },\r\n        { x: 3, y: 0, imgs: [cellImg], fonts: [{text: '4', top: '35%',fontWeight: '600'}] },\r\n        { x: 4, y: 0, imgs: [cellImg], fonts: [{text: '5', top: '35%',fontWeight: '600'}] },\r\n        { x: 5, y: 0, imgs: [cellImg], fonts: [{text: '6', top: '35%',fontWeight: '600'}] },\r\n\r\n        { x: 0, y: 1, imgs: [cellImg], fonts: [{text: '7', top: '35%',fontWeight: '600'}] },\r\n        { x: 1, y: 1, imgs: [cellImg], fonts: [{text: '8', top: '35%',fontWeight: '600'}] },\r\n        { x: 2, y: 1, imgs: [cellImg], fonts: [{text: '9', top: '35%',fontWeight: '600'}] },\r\n        { x: 3, y: 1, imgs: [cellImg], fonts: [{text: '10', top: '35%',fontWeight: '600'}] },\r\n        { x: 4, y: 1, imgs: [cellImg], fonts: [{text: '11', top: '35%',fontWeight: '600'}] },\r\n        { x: 5, y: 1, imgs: [cellImg], fonts: [{text: '12', top: '35%',fontWeight: '600'}] },\r\n\r\n        { x: 0, y: 2, imgs: [cellImg], fonts: [{text: '13', top: '35%',fontWeight: '600'}] },\r\n        { x: 1, y: 2, imgs: [cellImg], fonts: [{text: '14', top: '35%',fontWeight: '600'}] },\r\n        { x: 2, y: 2, imgs: [cellImg], fonts: [{text: '15', top: '35%',fontWeight: '600'}] },\r\n        { x: 3, y: 2, imgs: [cellImg], fonts: [{text: '16', top: '35%',fontWeight: '600'}] },\r\n        { x: 4, y: 2, imgs: [cellImg], fonts: [{text: '17', top: '35%',fontWeight: '600'}] },\r\n        { x: 5, y: 2, imgs: [cellImg], fonts: [{text: '18', top: '35%',fontWeight: '600'}] },\r\n\r\n        // { x: 0, y: 3, imgs: [cellImg, prizeImg] },\r\n        { x: 1, y: 3, imgs: [cellImg], fonts: [{text: '19', top: '35%',fontWeight: '600'}] },\r\n        { x: 2, y: 3, imgs: [cellImg], fonts: [{text: '20', top: '35%',fontWeight: '600'}] },\r\n        { x: 3, y: 3, imgs: [cellImg], fonts: [{text: '21', top: '35%',fontWeight: '600'}] },\r\n        { x: 4, y: 3, imgs: [cellImg], fonts: [{text: '22', top: '35%',fontWeight: '600'}] },\r\n        // { x: 5, y: 3, imgs: [cellImg, prizeImg] },\r\n\r\n        // { x: 0, y: 4, imgs: [cellImg, prizeImg] },\r\n        // { x: 1, y: 4, imgs: [cellImg, prizeImg] },\r\n        // { x: 2, y: 4, imgs: [cellImg, prizeImg] },\r\n        // { x: 3, y: 4, imgs: [cellImg, prizeImg] },\r\n        // { x: 4, y: 4, imgs: [cellImg, prizeImg] },\r\n        // { x: 5, y: 4, imgs: [cellImg, prizeImg] }\r\n\r\n      ],\r\n      buttons: [{\r\n        x: 3, y: 4,\r\n        col: 1,row:1,\r\n        background: '#7f95d1',\r\n        fonts: [{ text: '', top: '25%' }],\r\n        imgs: [btnImg]\r\n      }],\r\n      defaultConfig: {speed: 30,accelerationTime: 500,decelerationTime:1000},\r\n      activeStyle: {\r\n        fontColor: '#e9e8fe',\r\n        fontSize: '26px'\r\n      },\r\n      userNumbers: [0]\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击抽奖按钮会触发star回调\r\n    startCallback (index) {\r\n      // 调用抽奖组件的play方法开始游戏\r\n      this.$refs.myLucky.play()\r\n      // 模拟调用接口异步抽奖\r\n      setTimeout(() => {\r\n        // 假设后端返回的中奖索引是0\r\n        let flag = false\r\n        let prizeIndex = 0//奖品的索引\r\n        let i = 0\r\n        while(!flag) {\r\n          prizeIndex = Math.floor(Math.random() * 21 + 1) //得到1~22之间的一个随机数，不保证不重复\r\n          // console.log(prizeIndex);\r\n          flag = this.userNumbers.some((val) => {\r\n            //当prizeIndex != 之前抽中的某个数，则flag = true,退出循环\r\n            return val !== prizeIndex\r\n          })\r\n          i++\r\n          if(i > 500) {\r\n            console.log('循环次数：'+i);\r\n            break\r\n          }\r\n        }\r\n        this.userNumbers.push(prizeIndex + 1)\r\n        if(this.userNumbers.length >= 6) {\r\n          this.userNumbers.splice(0,1)\r\n          setTimeout(() => {\r\n            $('.userNum').animate({opacity: '1'})\r\n          }, 1500)\r\n        }\r\n\r\n        console.log(this.userNumbers);\r\n\r\n        // 调用stop停止旋转并传递中奖索引\r\n        this.$refs.myLucky.stop(prizeIndex)\r\n      }, 1000)\r\n    },\r\n    // 抽奖结束会触发end回调\r\n    endCallback (prize) {\r\n      this.msg = '你抽到了数字：' + prize.fonts[0].text\r\n      this.showMsg()\r\n    },\r\n    seriesDraw() {\r\n      for(let i = 0;i <= 4;i++) {\r\n        setTimeout(() => {\r\n          this.startCallback(i)\r\n        },i*3000)\r\n      }\r\n    },\r\n    showMsg() {\r\n      $('.msg').animate({\r\n        opacity: '1'\r\n      })\r\n      this.isShowMsg = true\r\n      setTimeout(() => {\r\n        $('.msg').animate({\r\n          opacity: '0'\r\n        })\r\n      },1500)\r\n    }\r\n  },\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.bx {\r\n  position: relative;\r\n}\r\n  .msg, .userNum {\r\n    position: absolute;\r\n    top: 9px;\r\n    left: 50px;\r\n    z-index: 2;\r\n    opacity: 0;\r\n    /*display: none;*/\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    color: grey;\r\n  }\r\n  .userNum {\r\n    /*opacity: 1;*/\r\n    top: -45px;\r\n  }\r\n  .msg i, .userNum i {\r\n    margin-right: 5px;\r\n  }\r\n\r\n</style>"]}]}